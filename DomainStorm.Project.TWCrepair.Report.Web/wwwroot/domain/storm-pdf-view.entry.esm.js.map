{"version":3,"file":"storm-pdf-view.entry.esm.js","sources":["src/utils/browser-env.ts","src/components/storm-pdf-view/storm-pdf-view.css?tag=storm-pdf-view&encapsulation=shadow","src/components/storm-pdf-view/storm-pdf-view.tsx"],"sourcesContent":["/**\r\n * 瀏覽器環境檢測類別\r\n */\r\nexport class BrowserEnv {\r\n  /**\r\n   * 是否為現代瀏覽器\r\n   */\r\n  isModernBrowser: boolean;\r\n\r\n  /**\r\n   * 是否為 Safari iOS 桌面模式\r\n   */\r\n  isSafariIOSDesktopMode: boolean;\r\n\r\n  /**\r\n   * 是否為移動裝置\r\n   */\r\n  isMobileDevice: boolean;\r\n\r\n  /**\r\n   * 是否為 Safari 桌面版\r\n   */\r\n  isSafariDesktop: boolean;\r\n\r\n  private static _current: BrowserEnv;\r\n\r\n  /**\r\n   * 私有建構子，初始化瀏覽器環境屬性\r\n   */\r\n  private constructor() {\r\n    const nav = window.navigator;\r\n    const ua = window.navigator.userAgent;\r\n\r\n    // 檢查是否支援 Promise，以判斷是否為現代瀏覽器\r\n    this.isModernBrowser = typeof window.Promise === 'function';\r\n\r\n    // 檢查是否為 Safari iOS 桌面模式\r\n    this.isSafariIOSDesktopMode = nav.platform === 'MacIntel' && nav.maxTouchPoints !== undefined && nav.maxTouchPoints > 1;\r\n\r\n    // 檢查是否為移動裝置\r\n    this.isMobileDevice = this.isSafariIOSDesktopMode || /Mobi|Tablet|Android|iPad|iPhone/.test(ua);\r\n\r\n    // 檢查是否為 Safari 桌面版\r\n    this.isSafariDesktop = !this.isMobileDevice && nav.vendor !== undefined && /Apple/.test(nav.vendor) && /Safari/.test(ua);\r\n  }\r\n\r\n  /**\r\n   * 取得目前的瀏覽器環境實例\r\n   * @returns {BrowserEnv} 目前的瀏覽器環境實例\r\n   */\r\n  static getCurrent(): BrowserEnv {\r\n    if (!BrowserEnv._current) {\r\n      BrowserEnv._current = new BrowserEnv();\r\n    }\r\n    return BrowserEnv._current;\r\n  }\r\n}\r\n",":host {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}","import { Component, Element, Prop, h } from '@stencil/core';\r\nimport { BrowserEnv } from '../../utils/browser-env';\r\nimport { SharedStyles } from '../../utils/shared-styles';\r\n\r\n@Component({\r\n  tag: 'storm-pdf-view',\r\n  styleUrl: 'storm-pdf-view.css',\r\n  shadow: true,\r\n})\r\nexport class StormPdfView {\r\n  @Element() host: HTMLElement;\r\n  @Prop() assumptionMode: boolean = true;\r\n  @Prop() supportRedirect: boolean = false;\r\n  @Prop() forceIframe: boolean = false;\r\n  @Prop() url: string;\r\n  @Prop() width: string = '100%';\r\n  @Prop() height: string = '100%';\r\n  @Prop() viewTitle: string = '';\r\n  @Prop() omitInlineStyles: boolean = false;\r\n\r\n  componentWillLoad() {\r\n    SharedStyles.applyShadowRootStyles(this.host);\r\n  }\r\n\r\n  render() {\r\n    if (!this.url) {\r\n      console.log('URL is not valid');\r\n      return;\r\n    }\r\n\r\n    if ((!BrowserEnv.getCurrent().isMobileDevice && BrowserEnv.getCurrent().isModernBrowser) || (this.assumptionMode && !BrowserEnv.getCurrent().isMobileDevice)) {\r\n      if (this.forceIframe || this.supportRedirect || BrowserEnv.getCurrent().isSafariDesktop) {\r\n        return <storm-html-view url={this.url} width={this.width} height={this.height} viewTitle={this.viewTitle} omitInlineStyles={this.omitInlineStyles} />;\r\n      } else {\r\n        let style: any = {};\r\n        if (!this.omitInlineStyles) {\r\n          style.width = this.width;\r\n          style.height = this.height;\r\n        }\r\n        return <embed title={this.viewTitle} src={this.url} type=\"application/pdf\" style={style} />;\r\n      }\r\n    }\r\n    throw new Error('This browser does not support embedded PDFs');\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}