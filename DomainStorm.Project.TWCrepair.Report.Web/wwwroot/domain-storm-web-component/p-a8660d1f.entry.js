import{r as e,a as s,h as t,H as r}from"./p-D7_hI2Rs.js";import{S as i}from"./p-B0cWbvbo.js";import{b as a}from"./p-BGxJrMAs.js";const o=".storm-carousel .center{display:block;text-align:-webkit-center}";const c=class{constructor(s){e(this,s)}get host(){return s(this)}dataSet;fade=false;wrap=true;carousel;carouselRef;videoRefs;async componentWillLoad(){await i.applyShadowRootStylesAsync(this.host,"material")}componentDidRender(){if(!this.dataSet)return;this.carousel=new a.Carousel(this.carouselRef,{wrap:this.wrap,ride:"carousel"});this.carouselRef.addEventListener("slid.bs.carousel",(e=>{this.controlInterval(this.dataSet.playListItems[e.to])}));if(this.dataSet&&this.dataSet.playListItems?.length>0){this.controlInterval(this.dataSet.playListItems[0])}this.videoRefs?.forEach((e=>{e.addEventListener("ended",(()=>{this.carousel.next()}))}))}addItem(){if(!this.dataSet)return;this.videoRefs=new Map;return this.dataSet.playListItems.map(((e,s)=>t("div",{class:s==0?"carousel-item center active":"carousel-item center","data-bs-interval":e.playDuration>0?e.playDuration*1e3:false},this.addItemElement(e))))}addItemElement=e=>{if(e.mimeType=="text/html"){return t("div",{innerHTML:e.content})}else if(e.mimeType.startsWith("image/")){return t("img",{class:"d-block",src:e.url})}else if(e.mimeType.startsWith("video/")){return t("video",{ref:s=>this.videoRefs.set(e,s),controls:true,autoplay:true},t("source",{src:e.url,type:e.mimeType}))}};controlInterval=e=>{if(e.mimeType.startsWith("video/")){this.carousel.pause();this.videoRefs.get(e).currentTime=0;this.videoRefs.get(e).play()}else{this.carousel.cycle()}};render(){return t(r,{key:"f1dfca311ab036833d9721edf5e4b96c94349baa"},t("div",{key:"e40d1f6985048819fc3fc9f7874eb650fa93b244",id:"carouselControls",class:this.fade?"carousel slide carousel-fade":"carousel slide",ref:e=>this.carouselRef=e},t("div",{key:"6807c8f4fb6c364a21ddf02b73c8abca058598a9",class:"carousel-inner"},this.addItem())))}};c.style=o;export{c as storm_carousel};
//# sourceMappingURL=p-a8660d1f.entry.js.map