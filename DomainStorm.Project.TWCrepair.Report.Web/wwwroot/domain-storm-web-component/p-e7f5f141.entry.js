import{r as t,c as i,h as s,H as e,a as h,f as r}from"./p-BrLtLH4U.js";import{p as n,g as c,a as o,s as a,b as l}from"./p-DXafifC8.js";import{F as u}from"./p-B4NwC13r.js";import{d}from"./p-9Du3dL5x.js";import"./p-E-ZsRS8r.js";const f=":host{display:block}:host>.form-check{padding-left:0.25rem}:host>.form-check.form-switch{padding-left:2.75rem}:host>.form-check.form-switch .form-check-input{margin-top:.3rem}:host>.form-check.form-check-inline{margin-right:.75rem}:host>.form-check:not(.form-switch) .form-check-input[type=checkbox]{margin-top:0}:host .input-group.input-group-static label{margin-left:.25rem;margin-top:.15rem}:host label{cursor:pointer}";const m=class{constructor(s){t(this,s);this.valueChanged=i(this,"valueChanged")}_uid;_inputEl;type="checkbox";label;labelClasses="custom-control-label";isDisabled;isChecked;isIndeterminate;isSwitch=false;isInline=false;timeStamp;valueChanged;async check(){if(this.isChecked)return;this.isChecked=true;this.valueChanged.emit(this.isChecked)}async uncheck(){if(!this.isChecked)return;this.isChecked=false;this.valueChanged.emit(this.isChecked)}renderLabel(){if(!this.label)return;return s("label",{htmlFor:this._uid,class:n(this.labelClasses)},this.label)}componentDidRender(){if(this._inputEl){this._inputEl.indeterminate=!!this.isIndeterminate}}render(){if(!this._uid)this._uid=c("storm-checkbox");return s(e,{key:"533ee62f567d7158ec6b46d3988b60ffbbac6134"},s("div",{key:"e3717e9c39a8e883fcef35dae417156baf6c4148",class:{"form-check":true,"form-check-inline":this.isInline,"form-switch":this.isSwitch}},s("input",{key:"b140fd51708ed36e67e047735a8b740669686273",ref:t=>this._inputEl=t,class:{"form-check-input":true},id:this._uid,type:this.type,checked:this.isChecked,disabled:this.isDisabled,indeterminate:this.isIndeterminate,onChange:async t=>{t.stopPropagation();if(t.target["checked"])await this.check();else await this.uncheck()}}),this.renderLabel()))}};m.style=f;const p=':host{display:block;-webkit-user-select:none;user-select:none}.list-group-item.active .form-check:not(.form-switch) .form-check-input[type="checkbox"]:checked{background:#fff !important;border-color:#fff !important}.list-group-item.active .form-check:not(.form-switch) .form-check-input[type="checkbox"]::after{color:#e91e63 !important}.list-group-item .form-check{margin-bottom:0 !important}';const k=class{constructor(s){t(this,s);this.nodeSelect=i(this,"nodeSelect");this.nodeUnselect=i(this,"nodeUnselect");this.nodeClick=i(this,"nodeClick");this.nodeDblClick=i(this,"nodeDblClick");this.nodeCheck=i(this,"nodeCheck");this.nodeUncheck=i(this,"nodeUncheck")}_child;get host(){return h(this)}href="javascript:void(0);";dataSet;tree;parent;content;searchText;nodeSelect;nodeUnselect;nodeClick;nodeDblClick;nodeCheck;nodeUncheck;async handleNodeClick(t){if(t.detail!==this.getId())return;if(this.getSelectable()){if(!this.getSelected()){await this.select()}else if(this.tree.nullable){await this.unselect()}}else{t.stopPropagation();if(this.hasChild()){this.expandToggle()}}}expandToggle(){this.getExpanded()?this.collapse():this.expand()}getId(){return o(this.dataSet,this.tree.fieldId)}getHref(){const t=o(this.dataSet,this.tree.fieldHref);return t??this.href}getChild(){return o(this.dataSet,this.tree.fieldChildren)||[]}getSelectable(){const t=o(this.dataSet,this.tree.fieldSelectable);return t??this.tree.selection!="none"}getCheckSelectable(){return o(this.dataSet,this.tree.fieldCheckSelectable)===true}getSelected(){return o(this.dataSet,this.tree.fieldSelected)===true}getChecked(){return o(this.dataSet,this.tree.fieldChecked)===true}getDisabled(){return o(this.dataSet,this.tree.fieldDisabled)===true}setSelected(t){if(o(this.dataSet,this.tree.fieldSelected)===t)return;a(this.dataSet,this.tree.fieldSelected,t);this.rerender()}setChecked(t){if(o(this.dataSet,this.tree.fieldChecked)===t)return;a(this.dataSet,this.tree.fieldChecked,t);this.rerender()}getExpanded(){return o(this.dataSet,this.tree.fieldExpanded)===true}async setExpanded(t){if(this.getExpanded()===t)return;a(this.dataSet,this.tree.fieldExpanded,t);if(t&&!o(this.dataSet,this.tree.fieldChildLoaded)){await this.tree.loadChild(this)}this.rerender()}rerender=d((()=>{r(this)}),50);async select(){if(this.getSelected()){return}this.setSelected(true);this.nodeSelect.emit(this.getId())}async unselect(){if(!this.getSelected()){return}this.setSelected(false);this.nodeUnselect.emit(this.getId())}async check(){if(this.getChecked()){return}this.setChecked(true);this.nodeCheck.emit(this.getId())}async uncheck(){if(!this.getChecked()){return}this.setChecked(false);this.nodeUncheck.emit(this.getId())}async expand(){await this.setExpanded(true)}async collapse(){await this.setExpanded(false)}hasChild(){return!!this.getChild()?.length}renderExpandIcon(){if(this.searchText)return;if(!this.hasChild()||this.getExpanded()&&this.tree.collapseIcon===""||!this.getExpanded()&&this.tree.expandIcon===""){return this.tree.expandIconAlign==="left"?s("span",{class:"indent"}):undefined}const t={"mb-1":true,"mx-1":true,"position-absolute":this.tree.expandIconAlign==="right","end-0":this.tree.expandIconAlign==="right"};return s("span",{class:t,onClick:t=>{t.stopPropagation();this.expandToggle()}},s(u,null,this.getExpanded()?this.tree.collapseIcon:this.tree.expandIcon))}renderIndent(){if(this.searchText)return;const t=[];const i=o(this.dataSet,this.tree.fieldLevel);for(let e=1;e<i;e++){t.push(s("span",{class:"indent"}))}if(!this.hasChild()&&this.tree.expandIconAlign==="left"){t.push(s("span",{class:"leaf"}))}return t}renderChild(){if(this.searchText)return;if(!this.hasChild()||!this.getExpanded())return;this._child=this.getChild().map((t=>this.renderNodeItem(t)));return s("div",{class:"list-group"},this._child)}renderNodeItem(t){let i=o(t,this.tree.fieldLabel);if(i&&this.searchText){i=l(i,this.searchText)}const e=s("storm-tree-node",{tree:this.tree,dataSet:t,content:i,searchText:this.searchText});return e}renderLabel(){return s("span",{innerHTML:this.content})}componentWillLoad(){a(this.dataSet,this.tree.fieldElement,this)}renderCheckbox(){if(!this.getCheckSelectable())return;return s("storm-checkbox",{type:"checkbox",isInline:true,isChecked:this.getChecked(),onValueChanged:t=>{t.stopPropagation()},onClick:async t=>{t.stopPropagation();if(this.tree.selectToCheck){this.nodeClick.emit(this.getId())}else if(!this.getChecked()){await this.check()}else{await this.uncheck()}}})}render(){if(!this.dataSet)return;return s(e,null,s("a",{href:this.getHref(),class:{"py-1":true,"px-1":true,"list-group-item":true,"list-group-item-action":o(this.dataSet,this.tree.fieldSelectable),"list-group-item-primary":this.tree.color=="primary","list-group-item-secondary":this.tree.color=="secondary","list-group-item-success":this.tree.color=="success","list-group-item-danger":this.tree.color=="danger","list-group-item-warning":this.tree.color=="warning","list-group-item-info":this.tree.color=="info","list-group-item-light":this.tree.color=="light","list-group-item-dark":this.tree.color=="dark","d-flex":true,"align-items-end":true,active:this.getSelected(),disabled:this.getDisabled()},onClick:t=>{t.stopPropagation();this.nodeClick.emit(this.getId())},onDblClick:t=>{t.stopPropagation();this.nodeDblClick.emit(this.getId())}},this.renderIndent(),this.renderExpandIcon(),s(u,null,o(this.dataSet,this.tree.fieldIcon)),this.renderCheckbox(),this.renderLabel()),this.renderChild())}disconnectedCallback(){a(this.dataSet,this.tree.fieldElement,undefined)}};k.style=p;export{m as storm_checkbox,k as storm_tree_node};
//# sourceMappingURL=p-e7f5f141.entry.js.map