import{r as t,c as s,a as e,h as i,H as r}from"./p-DTU8m96f.js";import{F as o,b as a,a as n}from"./p-CIZYPRjy.js";import{m as l,d as h,g as c,e as p,f as d,h as m}from"./p-CoYRMer0.js";import{P as f}from"./p-BXd-IQAx.js";import"./p-9Du3dL5x.js";import"./p-E-ZsRS8r.js";const u=class{constructor(e){t(this,e),this.innerScroll=s(this,"innerScroll")}_cardBodyRef;_slotCardHeader=!1;_slotTitle=!1;_slotHeader=!1;_slotFooter=!1;_slotBody=!1;_perfectScrollbar;_scrollListener=null;get host(){return e(this)}class;icon;headline;bodyClass;scrollable=!1;cardStyle="info";innerScroll;_observer=new MutationObserver((()=>{this.checkSlots()}));checkSlots=()=>{const t={cardHeader:this._slotCardHeader,title:this._slotTitle,header:this._slotHeader,footer:this._slotFooter,body:this._slotBody},s=this.host.children,e=new Set(["card-header","title","header","body","footer"]);let i=0;for(let r=0;r<s.length;r++){const o=s[r],a=o.getAttribute("slot");if(a&&e.has(a))switch(a){case"card-header":t.cardHeader||(t.cardHeader=!0,i++);break;case"title":t.title||(t.title=!0,i++);break;case"header":t.header||(t.header=!0,i++);break;case"footer":t.footer||(t.footer=!0,i++)}else a||o.nodeType!==Node.ELEMENT_NODE||t.body||(t.body=!0,i++);if(5===i)break}this._slotCardHeader=t.cardHeader,this._slotTitle=t.title,this._slotHeader=t.header,this._slotFooter=t.footer,this._slotBody=t.body};componentWillRender(){this._observer.observe(this.host,{childList:!0,subtree:!1})}componentDidRender(){this._cardBodyRef&&(this.scrollable?this.initScrollbar():this.disposeScrollbar())}_cardClassesCache=null;_lastCardProps="";buildCardClasses(){const t=`${this.class||""}-${this.icon||""}`;if(this._cardClassesCache&&this._lastCardProps===t)return this._cardClassesCache;const s={card:!0},e=this.class?l(s,this.class):s;return Object.keys(e).some((t=>/^mt-[0-5]|mt-auto$/.test(t)))||(e[this.icon?"mt-4":"mt-3"]=!0),this._cardClassesCache=e,this._lastCardProps=t,e}_bodyClassesCache=null;_lastBodyProps="";buildBodyClasses(){const t=`${this.bodyClass||""}-${this.scrollable}`;if(this._bodyClassesCache&&this._lastBodyProps===t)return this._bodyClassesCache;const s={"card-body":!0,"py-2":!0,"overflow-auto":this.scrollable},e=this.bodyClass?l(s,this.bodyClass):s;return this._bodyClassesCache=e,this._lastBodyProps=t,e}initScrollbar(){this.disposeScrollbar(),this._perfectScrollbar=new f(this._cardBodyRef);let t=0,s=null;this._scrollListener=e=>{e.stopPropagation();const i=this._cardBodyRef.scrollTop;Math.abs(i-t)<1||(t=i,s&&cancelAnimationFrame(s),s=requestAnimationFrame((()=>{this.innerScroll.emit(t),s=null})))},this._cardBodyRef?.addEventListener("scroll",this._scrollListener,{passive:!0})}disposeScrollbar(){this._scrollListener&&(this._cardBodyRef?.removeEventListener("scroll",this._scrollListener),this._scrollListener=null),this._perfectScrollbar&&(this._perfectScrollbar.destroy(),this._perfectScrollbar=null)}disconnectedCallback(){this.disposeScrollbar(),this._cardClassesCache=null,this._bodyClassesCache=null,this._iconCache=null,this._titleCache=null,this._observer.disconnect()}_iconCache=null;_lastIconProps="";renderIcon(){if(!this.icon)return;const t=`${this.icon}-${this.cardStyle}`;if(this._iconCache&&this._lastIconProps===t)return this._iconCache;const s={icon:!0,"icon-lg":!0,"icon-shape":!0,"text-center":!0,"border-radius-xl":!0,"mt-n4":!0,"me-3":!0,"mb-2":!0};return s["bg-gradient-"+this.cardStyle]=!0,s["shadow-"+this.cardStyle]=!0,this._iconCache=i("div",{class:s},i(o,{class:"opacity-10"},this.icon)),this._lastIconProps=t,this._iconCache}_titleCache=null;_lastHeadline="";renderCardTitle(){if(this.headline)return this._titleCache&&this._lastHeadline===this.headline||(this._titleCache=i("h5",{class:"mt-3 me-auto"},this.headline),this._lastHeadline=this.headline),this._titleCache}renderTitleSlot(){if(this._slotTitle)return i("slot",{name:"title"})}renderHeader(){return this._slotCardHeader?i("slot",{name:"card-header"}):this._slotHeader||this._slotTitle||this.icon||this.headline?i("div",{class:{"card-header":!0,"py-2":!0}},i("div",{class:"title-header d-flex"},this.renderIcon(),this.renderCardTitle(),this.renderTitleSlot()),this.renderHeaderSlot()):void 0}renderHeaderSlot(){if(this._slotHeader)return i("slot",{name:"header"})}renderBody(){if(this._slotBody)return[i(a,null),i("div",{class:this.buildBodyClasses(),ref:t=>this._cardBodyRef=t},i("slot",{name:"body"}))]}renderFooterSlot(){if(this._slotFooter)return[i(a,null),i("div",{class:"card-footer py-2"},i("slot",{name:"footer"}))]}render(){return i(r,{key:"5aae1e9b5993719b81c4b6cb3cbbe319efc8d88c"},i("div",{key:"ea773d65f28b4b92048e4a1b1b5dc7a0787b6a8e",class:this.buildCardClasses()},this.renderHeader(),this.renderBody(),this.renderFooterSlot()))}};u.style=":host{display:block}.vh-75{height:75vh !important}.card-header:first-child{border-radius:.75rem !important}";const b=class{constructor(e){t(this,e),this.valueChanged=s(this,"valueChanged"),this.itemClick=s(this,"itemClick"),this.selectChange=s(this,"selectChange"),this.searchChanged=s(this,"searchChanged")}_itemRefs;_searchRef;get host(){return e(this)}dataSet;headline;searchText;searchable=!1;selection="single";nullable=!1;value;class;itemClass;valueChanged;itemClick;selectChange;searchChanged;valueWatcher(t,s){h(t,s)||(this.setSelectedItems(),this.valueChanged.emit(t))}dataSetWatcher(){this.initDataSet(),this.setSelectedItems()}itemClickHandler(t){if("none"===this.selection)return;const s=t.detail;s.selected?this.unselect(s):this.select(s)}searchChangedHandler(t){this.searchText=t.detail}async setSearchFocus(){this.searchable&&this._searchRef&&requestAnimationFrame((async()=>{await this._searchRef.setFocus()}))}handleSearchChanged(t){t.stopPropagation();const s=t.detail?.trim();this.searchText!==s&&this.searchChanged.emit(s)}select(t){if(!t.selected){switch(this.selection){case"single":this.value=t.id;break;case"multiple":{const s=this.getCurrentValueAsArray();s.includes(t.id)||(this.value=[...s,t.id]);break}default:console.warn(`Unknown selection mode: ${this.selection}`)}this.selectChange.emit(t)}}unselect(t){if(t.selected){switch(this.selection){case"single":if(!this.nullable)return;this.value=null;break;case"multiple":{const s=this.getCurrentValueAsArray();if(s.length<=1)return;s.includes(t.id)&&(this.value=s.filter((s=>s!==t.id)));break}default:console.warn(`Unknown selection mode: ${this.selection}`)}this.selectChange.emit(t)}}getCurrentValueAsArray(){return Array.isArray(this.value)?this.value:this.value?[this.value]:[]}initDataSet(){Array.isArray(this.dataSet)&&this.dataSet.forEach((t=>{t.id=t.id||c("ilist-item")}))}setSelectedItems(){if(!Array.isArray(this.dataSet))return;const t=new Set(this.getCurrentValueAsArray());this.dataSet.forEach((s=>{s.selected=t.has(s.id)}))}render(){const t=this.renderListGroup();return i(r,null,this.headline?i("storm-card",{scrollable:!0,class:"mt-4",bodyClass:"p-0"},i("div",{slot:"card-header"},i("div",{class:"border-radius-xl mt-n4 mx-4 mb-2 bg-gradient-dark shadow-dark p-1"},i("h6",{class:"text-white font-weight-bolder text-center m-1"},this.headline))),i("div",{slot:"body"},t)):t)}renderItems(){return this._itemRefs={},Array.isArray(this.dataSet)&&0!==this.dataSet.length?this.getFilteredItems().map((t=>this.renderItem(t))):i("div",{class:"disabled list-group-item align-middle text-center p-4 h6"},"沒有找到符合的結果")}getFilteredItems(){let t=this.dataSet.filter((t=>p(this,t.visible)??!0));if(this.searchable&&this.searchText?.trim()){const s=this.searchText.toLowerCase();t=t.filter((t=>t.title?.toLowerCase().includes(s)))}return t}renderItem(t){const s=p(this,t.disabled)??!1;return i("a",{href:"javascript:void(0);",class:l({"list-group-item":!0,"list-group-item-action":!0,disabled:s,active:t.selected,"px-2":!0,"py-1":!0},this.itemClass),onClick:s=>{s.stopPropagation(),this.itemClick.emit(t)},ref:s=>this._itemRefs[t.id]=s},i(o,null,t.icon),i(o,{class:{"float-end":!0}},t.selected&&"multiple"===this.selection?"check_circle":""),this.renderItemLabel(t.title))}renderListGroup(){return i("div",{class:l({"list-group":!0,"list-group-flush":!!this.headline},this.class)},this.renderSearch(),this.renderItems())}renderItemLabel(t){const s=this.searchText?.trim()&&t?d(t,this.searchText):t;return i("span",{class:{"nav-link-text":!0},innerHTML:s})}renderSearch(){if(this.searchable)return i("div",{class:"search"},i(n,{ref:t=>this._searchRef=t,value:this.searchText,onValueChanged:t=>this.handleSearchChanged(t)}))}componentWillLoad(){this.initDataSet(),this.value&&("string"==typeof this.value&&this.value.trim()||Array.isArray(this.value)&&this.value.length>0)||(this.value=m(this.dataSet,this.nullable,this.selection)),this.setSelectedItems()}componentDidLoad(){("string"==typeof this.value&&""!==this.value.trim()||Array.isArray(this.value)&&this.value.length>0)&&this.valueChanged.emit(this.value)}static get watchers(){return{value:[{valueWatcher:0}],dataSet:[{dataSetWatcher:0}]}}};b.style=":host{display:block}";const v=class{constructor(e){t(this,e),this.innerScroll=s(this,"innerScroll")}_splitBarMove=!1;_splitBarRef;_stormContainerRef;_secondPaneRef;get host(){return e(this)}splitPercent=50;fixedSize;fixedPane;direction="vertical";firstPaneVisible=!0;secondPaneVisible=!0;firstPaneName="first-pane";secondPaneName="second-pane";innerScroll;async viewToggle(t,s){this._stormContainerRef.classList.toggle("storm-"+t+"-pane-d-none",!s)}renderPane(t){const s={};return s["storm-"+t+"-pane"]=!0,i("div",{ref:s=>{"second"===t&&(this._secondPaneRef=s)},class:s},i("div",{class:{"storm-pane":!0}},i("slot",{name:"first"===t?this.firstPaneName:this.secondPaneName})))}render(){const t={};return this.fixedSize&&this.fixedPane?t["--fixed-size"]=this.fixedSize:t["--split-percent"]=this.splitPercent+"%",i(r,{key:"4ea80a7eda3f1f9484029b174feaa212d19a5ba2",style:t},i("div",{key:"4a5823dc67398e9107a3c07a1065e0d7e0d6d3fe",ref:t=>this._stormContainerRef=t,class:{"storm-container":!0,"storm-first-pane-d-none":!this.firstPaneVisible,"storm-second-pane-d-none":!this.secondPaneVisible,"storm-split-percent":!this.fixedSize||!this.fixedPane,"storm-fixed-first-pane":"first"===this.fixedPane,"storm-fixed-second-pane":"second"===this.fixedPane,"storm-horizontal-split":"horizontal"===this.direction,"storm-vertical-split":"vertical"===this.direction}},this.renderPane("first"),this.renderPane("second"),i("div",{key:"4af541c5feeb2cd3f9838753b10850798babd636",ref:t=>{this._splitBarRef=t},class:{"split-bar":!0}})))}componentDidLoad(){this._splitBarRef.addEventListener("mousedown",(()=>{this._splitBarRef.classList.add("active"),this._splitBarMove=!0;const t=document.createElement("div");t.classList.add("storm-"+this.direction+"-static-backdrop"),t.addEventListener("mousemove",(t=>{this._splitBarMove&&("vertical"===this.direction?this._splitBarRef.style.setProperty("left",t.offsetX+"px"):this._splitBarRef.style.setProperty("top",t.offsetY+"px"))})),t.addEventListener("mouseup",(s=>{if(this._splitBarRef.classList.remove("active"),this._splitBarMove){let e=0;e="vertical"===this.direction?s.offsetX/t.offsetWidth*100:s.offsetY/t.offsetHeight*100,e<10&&(e=10),e>90&&(e=90),this.host.style.setProperty("--split-percent",e+"%"),this._splitBarMove=!1,this._splitBarRef.style.removeProperty("vertical"===this.direction?"left":"top"),this.host.removeChild(t)}})),this.host.appendChild(t)}));const t=this._secondPaneRef.firstElementChild;if(t){new f(t);const s=this.innerScroll;let e=0,i=!1;t.addEventListener("scroll",(r=>{e=t.scrollTop,i||(window.requestAnimationFrame((function(){s.emit(e),i=!1})),i=!0),r.stopPropagation()}))}}};v.style=".ps{overflow:hidden !important;overflow-anchor:none;-ms-overflow-style:none;touch-action:auto;-ms-touch-action:auto}.ps__rail-x{display:none;opacity:0;transition:background-color .2s linear, opacity .2s linear;-webkit-transition:background-color .2s linear, opacity .2s linear;height:15px;bottom:0px;position:absolute}.ps__rail-y{display:none;opacity:0;transition:background-color .2s linear, opacity .2s linear;-webkit-transition:background-color .2s linear, opacity .2s linear;width:15px;right:0;position:absolute}.ps--active-x>.ps__rail-x,.ps--active-y>.ps__rail-y{display:block;background-color:transparent}.ps:hover>.ps__rail-x,.ps:hover>.ps__rail-y,.ps--focus>.ps__rail-x,.ps--focus>.ps__rail-y,.ps--scrolling-x>.ps__rail-x,.ps--scrolling-y>.ps__rail-y{opacity:0.6}.ps .ps__rail-x:hover,.ps .ps__rail-y:hover,.ps .ps__rail-x:focus,.ps .ps__rail-y:focus,.ps .ps__rail-x.ps--clicking,.ps .ps__rail-y.ps--clicking{background-color:#eee;opacity:0.9}.ps__thumb-x{background-color:#aaa;border-radius:6px;transition:background-color .2s linear, height .2s ease-in-out;-webkit-transition:background-color .2s linear, height .2s ease-in-out;height:6px;bottom:2px;position:absolute}.ps__thumb-y{background-color:#aaa;border-radius:6px;transition:background-color .2s linear, width .2s ease-in-out;-webkit-transition:background-color .2s linear, width .2s ease-in-out;width:6px;right:2px;position:absolute}.ps__rail-x:hover>.ps__thumb-x,.ps__rail-x:focus>.ps__thumb-x,.ps__rail-x.ps--clicking .ps__thumb-x{background-color:#999;height:11px}.ps__rail-y:hover>.ps__thumb-y,.ps__rail-y:focus>.ps__thumb-y,.ps__rail-y.ps--clicking .ps__thumb-y{background-color:#999;width:11px}@supports (-ms-overflow-style: none){.ps{overflow:auto !important}}@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none){.ps{overflow:auto !important}}:host{display:block}.storm-container,.storm-vertical-static-backdrop,.storm-horizontal-static-backdrop{position:absolute;top:0;left:0;right:0;bottom:0}.storm-first-pane-d-none>.first-second-pane,.storm-second-pane-d-none>.storm-second-pane{display:none !important}.storm-pane{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;}.storm-split-percent:has(.storm-first-pane-AD-none,.storm-second-pane-d-none)>.split-bar{display:none}.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar{-webkit-background-clip:padding-box;background-clip:padding-box;position:absolute;z-index:9998}.split-bar.active,.split-bar:hover{background-color:#e91e63}.storm-vertical-static-backdrop,.storm-horizontal-static-backdrop{z-index:9999}.storm-vertical-split>.storm-first-pane,.storm-vertical-split>.storm-second-pane{position:absolute;top:0;bottom:0}.storm-vertical-split>.storm-first-pane{left:0}.storm-vertical-split>.storm-second-pane{right:0}.storm-vertical-split.storm-split-percent>.storm-first-pane{right:auto;width:var(--split-percent)}.storm-vertical-split.storm-split-percent>.storm-second-pane{left:var(--split-percent);width:auto}.storm-vertical-split.storm-fixed-first-pane>.storm-first-pane{right:auto;width:var(--fixed-size)}.storm-vertical-split.storm-fixed-first-pane>.storm-second-pane{left:var(--fixed-size);width:auto}.storm-vertical-split.storm-fixed-second-pane>.storm-first-pane{right:var(--fixed-size);width:auto}.storm-vertical-split.storm-fixed-second-pane>.storm-second-pane{left:auto;width:var(--fixed-size)}.storm-vertical-split.storm-first-pane-d-none>.storm-second-pane,.storm-vertical-split.storm-second-pane-d-none>.storm-first-pane{left:0 !important;right:0 !important;width:auto !important}.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-first-pane>.storm-pane{right:2px !important}.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-second-pane>.storm-pane{left:2px !important}.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar{border-left:1px solid rgba(0, 0, 0, 0);border-right:1px solid rgba(0, 0, 0, 0);top:0;bottom:0;left:var(--split-percent);margin-left:-2px;width:4px}.storm-vertical-static-backdrop,.storm-vertical-split .split-bar:hover{cursor:col-resize}.storm-horizontal-split>.storm-first-pane,.storm-horizontal-split>.storm-second-pane{position:absolute;left:0;right:0}.storm-horizontal-split>.storm-first-pane{top:0}.storm-horizontal-split>.storm-second-pane{bottom:0}.storm-horizontal-split.storm-split-percent>.storm-first-pane{bottom:auto;height:var(--split-percent)}.storm-horizontal-split.storm-split-percent>.storm-second-pane{top:var(--split-percent);height:auto}.storm-horizontal-split.storm-fixed-first-pane>.storm-first-pane{bottom:auto;height:var(--fixed-size)}.storm-horizontal-split.storm-fixed-first-pane>.storm-second-pane{top:var(--fixed-size);height:auto}.storm-horizontal-split.storm-fixed-second-pane>.storm-first-pane{bottom:var(--fixed-size);height:auto}.storm-horizontal-split.storm-fixed-second-pane>.storm-second-pane{top:auto;height:var(--fixed-size)}.storm-horizontal-split.storm-first-pane-d-none>.storm-second-pane,.storm-horizontal-split.storm-second-pane-d-none>.storm-first-pane{top:0 !important;bottom:0 !important;height:auto !important}.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-first-pane>.storm-pane{bottom:2px !important}.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-second-pane>.storm-pane{top:2px !important}.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar{border-top:1px solid rgba(0, 0, 0, 0);border-bottom:1px solid rgba(0, 0, 0, 0);left:0;right:0;top:var(--split-percent);margin-top:-2px;height:4px}.storm-horizontal-static-backdrop,.storm-horizontal-split>.split-bar:hover{cursor:row-resize}";const g=class{constructor(s){t(this,s)}_splitViewRef;get host(){return e(this)}splitPercent=50;fixedSize;fixedPane;leftPaneVisible;rightPaneVisible;async viewToggle(t,s){await this._splitViewRef.viewToggle("left"===t?"first":"second",s)}componentWillLoad(){this.leftPaneVisible=this.leftPaneVisible??null!=this.host.querySelector(':scope>[slot="left-pane"]'),this.rightPaneVisible=this.rightPaneVisible??null!=this.host.querySelector(':scope>[slot="right-pane"]')}render(){return i(r,{key:"03b6b9520c96faf172071c2e2e971b3b87a0cc4f"},i("storm-split-view",{key:"417b6450313b7c1029c4daf7978b630e997e5134",ref:t=>this._splitViewRef=t,splitPercent:this.splitPercent,fixedSize:this.fixedSize,fixedPane:null==this.fixedPane?null:"left"==this.fixedPane?"first":"second",firstPaneVisible:this.leftPaneVisible,secondPaneVisible:this.rightPaneVisible,direction:"vertical",firstPaneName:"left-pane",secondPaneName:"right-pane"},i("slot",{key:"65bd559439499eb96fa5580244e60d6d5518bb35",name:"left-pane"}),i("slot",{key:"a1e7db477d742ca16c9b7131904d262b092dd79d",name:"right-pane"})))}};g.style="";export{u as storm_card,b as storm_list_group,v as storm_split_view,g as storm_vertical_split_view}