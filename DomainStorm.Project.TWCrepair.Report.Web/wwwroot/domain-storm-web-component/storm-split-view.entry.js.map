{"file":"storm-split-view.entry.esm.js","mappings":"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","names":[],"sources":["src/layouts/storm-split-view/storm-split-view.css?tag=storm-split-view","src/layouts/storm-split-view/storm-split-view.tsx"],"sourcesContent":["@import '../../../node_modules/perfect-scrollbar/css/perfect-scrollbar.css';\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n.storm-container,\r\n.storm-vertical-static-backdrop,\r\n.storm-horizontal-static-backdrop {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.storm-first-pane-d-none>.first-second-pane,\r\n.storm-second-pane-d-none>.storm-second-pane {\r\n  display: none !important;\r\n}\r\n\r\n.storm-pane {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: auto;\r\n  /* overflow: hidden; */\r\n}\r\n\r\n.storm-split-percent:has(.storm-first-pane-AD-none, .storm-second-pane-d-none)>.split-bar {\r\n  display: none;\r\n}\r\n\r\n.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar {\r\n  -webkit-background-clip: padding-box;\r\n  /* for Safari */\r\n  background-clip: padding-box;\r\n  /* for IE9+, Firefox 4+, Opera, Chrome */\r\n  position: absolute;\r\n  z-index: 9998;\r\n}\r\n\r\n.split-bar.active,\r\n.split-bar:hover {\r\n  background-color: #e91e63;\r\n}\r\n\r\n.storm-vertical-static-backdrop,\r\n.storm-horizontal-static-backdrop {\r\n  z-index: 9999;\r\n}\r\n\r\n.storm-vertical-split>.storm-first-pane,\r\n.storm-vertical-split>.storm-second-pane {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.storm-vertical-split>.storm-first-pane {\r\n  left: 0;\r\n}\r\n\r\n.storm-vertical-split>.storm-second-pane {\r\n  right: 0;\r\n}\r\n\r\n.storm-vertical-split.storm-split-percent>.storm-first-pane {\r\n  right: auto;\r\n  width: var(--split-percent);\r\n}\r\n\r\n.storm-vertical-split.storm-split-percent>.storm-second-pane {\r\n  left: var(--split-percent);\r\n  width: auto;\r\n}\r\n\r\n.storm-vertical-split.storm-fixed-first-pane>.storm-first-pane {\r\n  right: auto;\r\n  width: var(--fixed-size);\r\n}\r\n\r\n.storm-vertical-split.storm-fixed-first-pane>.storm-second-pane {\r\n  left: var(--fixed-size);\r\n  width: auto;\r\n}\r\n\r\n.storm-vertical-split.storm-fixed-second-pane>.storm-first-pane {\r\n  right: var(--fixed-size);\r\n  width: auto;\r\n}\r\n\r\n.storm-vertical-split.storm-fixed-second-pane>.storm-second-pane {\r\n  left: auto;\r\n  width: var(--fixed-size);\r\n}\r\n\r\n.storm-vertical-split.storm-first-pane-d-none>.storm-second-pane,\r\n.storm-vertical-split.storm-second-pane-d-none>.storm-first-pane {\r\n  left: 0 !important;\r\n  right: 0 !important;\r\n  width: auto !important;\r\n}\r\n\r\n.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-first-pane>.storm-pane {\r\n  right: 2px !important;\r\n}\r\n\r\n.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-second-pane>.storm-pane {\r\n  left: 2px !important;\r\n}\r\n\r\n.storm-vertical-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar {\r\n  border-left: 1px solid rgba(0, 0, 0, 0);\r\n  border-right: 1px solid rgba(0, 0, 0, 0);\r\n  top: 0;\r\n  bottom: 0;\r\n  left: var(--split-percent);\r\n  margin-left: -2px;\r\n  width: 4px;\r\n}\r\n\r\n.storm-vertical-static-backdrop,\r\n.storm-vertical-split .split-bar:hover {\r\n  cursor: col-resize;\r\n}\r\n\r\n.storm-horizontal-split>.storm-first-pane,\r\n.storm-horizontal-split>.storm-second-pane {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.storm-horizontal-split>.storm-first-pane {\r\n  top: 0;\r\n}\r\n\r\n.storm-horizontal-split>.storm-second-pane {\r\n  bottom: 0;\r\n}\r\n\r\n.storm-horizontal-split.storm-split-percent>.storm-first-pane {\r\n  bottom: auto;\r\n  height: var(--split-percent);\r\n}\r\n\r\n.storm-horizontal-split.storm-split-percent>.storm-second-pane {\r\n  top: var(--split-percent);\r\n  height: auto;\r\n}\r\n\r\n.storm-horizontal-split.storm-fixed-first-pane>.storm-first-pane {\r\n  bottom: auto;\r\n  height: var(--fixed-size);\r\n}\r\n\r\n.storm-horizontal-split.storm-fixed-first-pane>.storm-second-pane {\r\n  top: var(--fixed-size);\r\n  height: auto;\r\n}\r\n\r\n.storm-horizontal-split.storm-fixed-second-pane>.storm-first-pane {\r\n  bottom: var(--fixed-size);\r\n  height: auto;\r\n}\r\n\r\n.storm-horizontal-split.storm-fixed-second-pane>.storm-second-pane {\r\n  top: auto;\r\n  height: var(--fixed-size);\r\n}\r\n\r\n.storm-horizontal-split.storm-first-pane-d-none>.storm-second-pane,\r\n.storm-horizontal-split.storm-second-pane-d-none>.storm-first-pane {\r\n  top: 0 !important;\r\n  bottom: 0 !important;\r\n  height: auto !important;\r\n}\r\n\r\n.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-first-pane>.storm-pane {\r\n  bottom: 2px !important;\r\n}\r\n\r\n.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none):not(.storm-fixed-first-pane):not(.storm-fixed-second-pane)>.storm-second-pane>.storm-pane {\r\n  top: 2px !important;\r\n}\r\n\r\n.storm-horizontal-split.storm-split-percent:not(.storm-first-pane-d-none):not(.storm-second-pane-d-none)>.split-bar {\r\n  border-top: 1px solid rgba(0, 0, 0, 0);\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0);\r\n  left: 0;\r\n  right: 0;\r\n  top: var(--split-percent);\r\n  margin-top: -2px;\r\n  height: 4px;\r\n}\r\n\r\n.storm-horizontal-static-backdrop,\r\n.storm-horizontal-split>.split-bar:hover {\r\n  cursor: row-resize;\r\n}","import { Component, Element, Event, EventEmitter, Host, Method, Prop, h } from '@stencil/core';\r\nimport PerfectScrollbar from 'perfect-scrollbar';\r\n\r\n@Component({\r\n  tag: 'storm-split-view',\r\n  styleUrl: 'storm-split-view.css',\r\n  shadow: false,\r\n})\r\nexport class StormSplitView {\r\n  private _splitBarMove: boolean = false;\r\n  private _splitBarRef: HTMLDivElement;\r\n  private _stormContainerRef: HTMLDivElement;\r\n  private _secondPaneRef: HTMLDivElement;\r\n\r\n  @Element() host: HTMLElement;\r\n  @Prop() splitPercent: number = 50;\r\n  @Prop() fixedSize?: string;\r\n  @Prop() fixedPane?: 'first' | 'second';\r\n  @Prop() direction: 'horizontal' | 'vertical' = 'vertical';\r\n  @Prop() firstPaneVisible: boolean = true;\r\n  @Prop() secondPaneVisible: boolean = true;\r\n  @Prop() firstPaneName: string = 'first-pane';\r\n  @Prop() secondPaneName: string = 'second-pane';\r\n\r\n  @Event() innerScroll: EventEmitter<number>;\r\n\r\n  @Method()\r\n  async viewToggle(token: 'first' | 'second', force: boolean) {\r\n    this._stormContainerRef.classList.toggle('storm-' + token + '-pane-d-none', !force);\r\n  }\r\n\r\n  renderPane(token: string) {\r\n    const classes = {};\r\n    classes['storm-' + token + '-pane'] = true;\r\n    return (\r\n      <div\r\n        ref={elm => {\r\n          if (token === 'second') this._secondPaneRef = elm;\r\n        }}\r\n        class={classes}\r\n      >\r\n        <div class={{ 'storm-pane': true }}>\r\n          <slot name={token === 'first' ? this.firstPaneName : this.secondPaneName}></slot>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const styles = {};\r\n    if (!this.fixedSize || !this.fixedPane) styles['--split-percent'] = this.splitPercent + '%';\r\n    else styles['--fixed-size'] = this.fixedSize;\r\n    return (\r\n      <Host style={styles}>\r\n        <div\r\n          ref={elm => (this._stormContainerRef = elm)}\r\n          class={{\r\n            'storm-container': true,\r\n            'storm-first-pane-d-none': !this.firstPaneVisible,\r\n            'storm-second-pane-d-none': !this.secondPaneVisible,\r\n            'storm-split-percent': !this.fixedSize || !this.fixedPane,\r\n            'storm-fixed-first-pane': this.fixedPane === 'first',\r\n            'storm-fixed-second-pane': this.fixedPane === 'second',\r\n            'storm-horizontal-split': this.direction === 'horizontal',\r\n            'storm-vertical-split': this.direction === 'vertical',\r\n          }}\r\n        >\r\n          {this.renderPane('first')}\r\n          {this.renderPane('second')}\r\n          <div\r\n            ref={elm => {\r\n              this._splitBarRef = elm;\r\n            }}\r\n            class={{ 'split-bar': true }}\r\n          ></div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this._splitBarRef.addEventListener('mousedown', () => {\r\n      this._splitBarRef.classList.add('active');\r\n      this._splitBarMove = true;\r\n      const staticBackdrop: HTMLDivElement = document.createElement('div');\r\n      staticBackdrop.classList.add('storm-' + this.direction + '-static-backdrop');\r\n      staticBackdrop.addEventListener('mousemove', (e: MouseEvent) => {\r\n        if (this._splitBarMove) {\r\n          if (this.direction === 'vertical') this._splitBarRef.style.setProperty('left', e.offsetX + 'px');\r\n          else this._splitBarRef.style.setProperty('top', e.offsetY + 'px');\r\n        }\r\n      });\r\n      staticBackdrop.addEventListener('mouseup', e => {\r\n        this._splitBarRef.classList.remove('active');\r\n        if (this._splitBarMove) {\r\n          let percent = 0;\r\n          if (this.direction === 'vertical') percent = (e.offsetX / staticBackdrop.offsetWidth) * 100;\r\n          else percent = (e.offsetY / staticBackdrop.offsetHeight) * 100;\r\n          if (percent < 10) percent = 10;\r\n          if (percent > 90) percent = 90;\r\n          this.host.style.setProperty('--split-percent', percent + '%');\r\n          this._splitBarMove = false;\r\n          if (this.direction === 'vertical') this._splitBarRef.style.removeProperty('left');\r\n          else this._splitBarRef.style.removeProperty('top');\r\n          this.host.removeChild(staticBackdrop);\r\n        }\r\n      });\r\n      this.host.appendChild(staticBackdrop);\r\n    });\r\n\r\n    const container = this._secondPaneRef.firstElementChild;\r\n    if (container) {\r\n      new PerfectScrollbar(container);\r\n      const innerScroll = this.innerScroll;\r\n      let lastKnownScrollPosition = 0;\r\n      let ticking = false;\r\n      container.addEventListener('scroll', (e: Event) => {\r\n        lastKnownScrollPosition = container.scrollTop;\r\n        if (!ticking) {\r\n          window.requestAnimationFrame(function () {\r\n            innerScroll.emit(lastKnownScrollPosition);\r\n            ticking = false;\r\n          });\r\n          ticking = true;\r\n        }\r\n        e.stopPropagation();\r\n      });\r\n    }\r\n  }\r\n}\r\n"],"version":3}