import{r as t,c as e,a as s,f as i,h,H as n}from"./p-D7_hI2Rs.js";import{a as l}from"./p-79tVaPxu.js";import{S as o}from"./p-B0cWbvbo.js";import{s as r,a,r as c,g as d,i as f,c as u,p as b}from"./p-D7QsdlJW.js";import{d as p,a as m,c as g}from"./p-CSLe0qE2.js";import"./p-E-ZsRS8r.js";function w(t,e,s){const i=e<0?t.length+e:e;if(i>=0&&i<t.length){const i=s<0?t.length+s:s;const[h]=t.splice(e,1);t.splice(i,0,h)}}const C=':host{display:block;line-height:1}:host .table td,:host .table th{white-space:pre-wrap}:host .table thead{z-index:1}:host .table thead th{padding:0.75rem 0.5rem}:host .table thead th.thead-xxs{width:2.3rem}:host .table.table-sm thead th{padding:0.5rem 0.25rem}:host .table.table-sm thead th.thead-xxs{padding:0.25rem}:host .table .form-check>.form-check-input[type=radio]{background-color:#fff;cursor:pointer}:host .form-check{padding:0}:host .table-sorter{cursor:pointer}:host .table-sorter>.cell{display:inline-block;height:100%;position:relative;width:100%;line-height:1.1}:host .table-sorter>.cell:before{border-top:5px solid #000;bottom:0.15rem}:host .table-sorter>.cell:after{border-bottom:5px solid #000;border-top:5px solid transparent;top:-0.2rem}:host .table-sorter>.cell:after,:host .table-sorter>.cell:before{content:"";height:0;width:0;position:absolute;right:5px;border-left:5px solid transparent;border-right:5px solid transparent;opacity:0.3}:host .table-sorter.asc>.cell:after{opacity:0.7}:host .table-sorter.asc>.cell:before{opacity:0}:host .table-sorter.desc>.cell:before{opacity:0.7}:host .table-sorter.desc>.cell:after{opacity:0}:host .table-layout-fixed{table-layout:fixed}:host .table-layout-auto{table-layout:auto}:host .no-records-found{height:30vh}:host .fixed-table-header th{position:sticky;top:0}:host .fixed-table-header thead{position:sticky;top:0;background:white}:host .fixed-table-header thead tr{border-top-width:0}:host .table-description{font-size:0.5rem;font-weight:normal !important}:host .table-top,:host .table-bottom{padding:0.5rem}:host .table-top:after,:host .table-bottom:after{clear:both;content:" ";display:table}:host .table-top label{margin-bottom:0}:host .table-top .table-pageSizeMenu label select{border-color:#f0f2f5;border-radius:0.375rem;padding:6px}:host .table-selectedInfo,:host .table-pageSizeMenu,:host .table-pageInfo{float:left;color:#7b809a;font-size:0.875rem}:host .table-selectedInfo,:host .table-pageInfo{margin:0.7rem 0;padding-right:2rem}:host .table-search,:host .table-pagination{float:right}:host .table-search input{font-size:0.875rem;color:#495057;border:1px solid #f0f2f5;border-radius:0.375rem;padding:6px 12px}:host .tr.table-sorter{cursor:pointer}:host tr storm-toolbar storm-button .btn{width:1.5rem;height:1.5rem;padding:0.3rem 0.3rem}:host tr storm-toolbar.storm-dynamic-label storm-button .storm-button-label{display:none}:host tr:hover storm-toolbar.storm-dynamic-label storm-button .btn:not(.btn-icon-only){width:auto;height:auto;padding:0.06rem 0.5rem 0.06rem 0.2rem}:host tr:hover storm-toolbar.storm-dynamic-label storm-button .storm-button-label{display:block}';const y=class{constructor(s){t(this,s);this.pageNumberChange=e(this,"pageNumberChange");this.pageSizeChange=e(this,"pageSizeChange");this.sortChange=e(this,"sortChange");this.searchChanged=e(this,"searchChanged");this.tableWillRender=e(this,"tableWillRender");this.rowMove=e(this,"rowMove");this.rowWillSelect=e(this,"rowWillSelect");this.rowWillUnselect=e(this,"rowWillUnselect");this.rowSelect=e(this,"rowSelect");this.rowUnselect=e(this,"rowUnselect");this.rowDidSelect=e(this,"rowDidSelect");this.rowDidUnselect=e(this,"rowDidUnselect");this.rowSelectChange=e(this,"rowSelectChange");this.selectWillChange=e(this,"selectWillChange");this.selectChange=e(this,"selectChange");this.selectDidChange=e(this,"selectDidChange");this.cellWillCheck=e(this,"cellWillCheck");this.cellWillUncheck=e(this,"cellWillUncheck");this.cellCheck=e(this,"cellCheck");this.cellUncheck=e(this,"cellUncheck");this.cellDidCheck=e(this,"cellDidCheck");this.cellDidUncheck=e(this,"cellDidUncheck");this.cellCheckChange=e(this,"cellCheckChange");this.checkWillChange=e(this,"checkWillChange");this.checkChange=e(this,"checkChange");this.checkDidChange=e(this,"checkDidChange");this.clickRow=e(this,"clickRow")}__columns;__pageDate;__cellCheckChangeTimeoutRafId={};__bodyRef;__selectedInfoRef;__breakpoints=[{size:"4xs",width:239},{size:"3xs",width:359},{size:"xxs",width:479},{size:"xs",width:576},{size:"sm",width:768},{size:"md",width:992},{size:"lg",width:1200},{size:"xl",width:1400},{size:"xxl",width:1600},{size:"3xl",width:1920},{size:"4xl",width:Infinity}];get host(){return s(this)}fieldId="id";fieldSelected="__selected";fieldIndex="__index";pagination=false;sidePagination="stencil";searchable=false;pageSizeMenu=true;pageInfo=true;selectedInfo=true;escape=true;classes;layout="fixed";cellTemplate="{value}";clickRowTo;selection="single";pageList=[5,10,15,20,25];tableHeight;columns;dataSet;pageNumber=1;pageSize=10;searchText;sortName;sortOrder;groupBy;totalRows;totalSelected;checkedItemsSum;isColumnResponsive=false;expand={visibleColumnCount:0};timeStamp;pageNumberChange;pageSizeChange;sortChange;searchChanged;tableWillRender;rowMove;rowWillSelect;rowWillUnselect;rowSelect;rowUnselect;rowDidSelect;rowDidUnselect;rowSelectChange;selectWillChange;selectChange;selectDidChange;cellWillCheck;cellWillUncheck;cellCheck;cellUncheck;cellDidCheck;cellDidUncheck;cellCheckChange;checkWillChange;checkChange;checkDidChange;clickRow;watchDataSetHandler(t,e){this.timeStamp=Date.now();if(p(t,e)){return}this.initDataSet();this.rerender()}async watchColumnsHandler(t,e){if(p(t,e)){return}this.initColumns()}watchTotalSelectedHandler(t,e){this.debouncedDisplaySelectedCount()}searchChangedHandler(t){if(this.sidePagination==="stencil"){this.searchText=t.detail}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:t.detail})}}pageNumberChangeHandler(t){if(this.sidePagination==="stencil"){this.pageNumber=t.detail}else{this.tableWillRender.emit({pageNumber:t.detail,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}}pageSizeChangeHandler(t){if(this.sidePagination==="stencil"){this.pageSize=t.detail}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:t.detail,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}}sortChangeHandler(t){if(this.sidePagination==="stencil"){this.sortName=t.detail.sortName;this.sortOrder=t.detail.sortOrder}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:t.detail.sortName,sortOrder:t.detail.sortOrder,searchText:this.searchText})}}async rowWillSelectHandler(t){if(this.sidePagination==="stencil"){if(this.selection==="single"){await this.unselectAll()}this.rowSelect.emit(t.detail)}}async rowSelectHandler(t){const e=await this.getRowById(t.detail);r(e,this.fieldSelected,true);this.__bodyRef.updateRowSelection(e);this.rowDidSelect.emit(e)}rowDidSelectHandler(t){this.rowSelectChange.emit(t.detail)}rowWillUnselectHandler(t){if(this.sidePagination==="stencil"){this.rowUnselect.emit(t.detail)}}async rowUnselectHandler(t){const e=await this.getRowById(t.detail);r(e,this.fieldSelected,false);this.__bodyRef.updateRowSelection(e);this.rowDidUnselect.emit(e)}rowDidUnselectHandler(t){this.rowSelectChange.emit(t.detail)}rowSelectChangeHandler(t){this.debouncedRowSelectionUpdate()}async selectWillChangeHandler(t){if(this.sidePagination==="stencil"){const t=await this.getSelected();this.selectChange.emit(t.length)}}selectChangeHandler(t){this.totalSelected=t.detail;this.debouncedDisplaySelectedCount();this.selectDidChange.emit(t.detail)}async cellWillCheckHandler(t){if(this.sidePagination==="stencil"){const e=await this.getColumnByField(t.detail.field);if(e.type==="radio"){await this.uncheckAll(e.field)}this.cellCheck.emit(t.detail)}}async cellCheckHandler(t){const e=await this.getColumnByField(t.detail.field);const s=await this.getRowById(t.detail.id);r(s,e.field,true);this.__bodyRef.updateRowCheckbox(s,e);this.cellDidCheck.emit({row:s,column:e})}cellDidCheckHandler(t){this.cellCheckChange.emit(t.detail)}cellWillUncheckHandler(t){if(this.sidePagination==="stencil"){this.cellUncheck.emit(t.detail)}}async cellUncheckHandler(t){const e=await this.getColumnByField(t.detail.field);const s=await this.getRowById(t.detail.id);r(s,e.field,false);this.__bodyRef.updateRowCheckbox(s,e);this.cellDidUncheck.emit({row:s,column:e})}cellDidUncheckHandler(t){this.cellCheckChange.emit(t.detail)}cellCheckChangeHandler(t){const e=t.detail.column;const s=this.__cellCheckChangeTimeoutRafId[e.field];if(s){clearTimeout(s);delete this.__cellCheckChangeTimeoutRafId[e.field]}this.__cellCheckChangeTimeoutRafId[e.field]=setTimeout((()=>{delete this.__cellCheckChangeTimeoutRafId[e.field];this.checkWillChange.emit(e.field)}),100)}async checkWillChangeHandler(t){if(this.sidePagination==="stencil"){const e=await this.getChecked(t.detail);this.checkChange.emit({total:e.length,field:t.detail})}}async checkChangeHandler(t){this.setCheckedItemsSum(t.detail.field,t.detail.total);if(t.detail.field===this.fieldSelected){this.totalSelected=t.detail.total}const e=await this.getColumnByField(t.detail.field);await this.__bodyRef.updateColumnCheckbox(e);this.checkDidChange.emit({total:t.detail.total,column:e})}async clickCellHandler(t){const e=await this.getColumnByField(t.detail.field);if(e.type==="checkbox"||e.type==="radio"){await this.checkClick(t.detail.id,t.detail.field)}else{this.clickRow.emit(t.detail.id)}}async clickRowHandler(t){if(this.clickRowTo==="check"){await this.checkClick(t.detail,this.fieldSelected)}else if(this.clickRowTo==="select"){const e=await this.getRowById(t.detail);a(e,this.fieldSelected)?this.unselect(t.detail):this.select(t.detail)}}async moveRow(t,e){w(this.dataSet,t,e);this.dataSet.forEach(((t,e)=>{const s=a(t,this.fieldIndex);if(s!==e){this.rowMove.emit({row:t,from:s,to:e});r(t,this.fieldIndex,e)}}));this.rerender()}async dispatchCustomEvent(t,e){this[t].emit(e)}async dispatchCellCustomEvent(t,e){const s=this.host.shadowRoot?.querySelector('tr[data-id="'+e["id"]+'"] storm-table-cell[data-field="'+e["field"]+'"]');await s.dispatchCustomEvent(t,e)}async getRowAt(t){return this.dataSet.find((e=>a(e,this.fieldIndex)===t))}async getRowById(t){if(typeof t==="object")return t;return this.dataSet.find((e=>a(e,this.fieldId)===t))}async getColumnByField(t){if(typeof t==="object")return t;return this.__columns.find((e=>e.field===t))}async getSelected(){if(this.sidePagination!=="stencil"){return null}const t=this.dataSet||[];const e=[];for(const s of t){const t=a(s,this.fieldSelected);if(t!=null&&t===true){const t=a(s,this.fieldId);if(t!=null)e.push(String(t))}}return e}async getChecked(t){if(this.sidePagination!=="stencil"){return null}const e=await this.getColumnByField(t);if(!e||!e.field)return[];const s=this.dataSet||[];const i=[];for(const t of s){const s=a(t,e.field);if(s!=null&&s===true){const e=a(t,this.fieldId);if(e!=null)i.push(String(e))}}return i}async select(t){this.rowWillSelect.emit(t)}async selectAll(){this.dataSet.filter((t=>!a(t,this.fieldSelected))).forEach((t=>{this.select(a(t,this.fieldId))}))}async unselect(t){this.rowWillUnselect.emit(t)}async unselectAll(){this.dataSet.filter((t=>a(t,this.fieldSelected))).forEach((t=>{this.unselect(a(t,this.fieldId))}))}async check(t,e){const s=await this.getRowById(t);if(a(s,e))return;this.cellWillCheck.emit({id:t,field:e})}async uncheck(t,e){const s=await this.getRowById(t);if(!a(s,e))return;this.cellWillUncheck.emit({id:t,field:e})}async checkAll(t){const e=await this.getColumnByField(t);const s=this.dataSet.filter((e=>!a(e,t)));for(const i of s){const s=await this.resolveColumnData(e,[i,a(i,this.fieldIndex),e]);if(s&&s.disabled)continue;this.check(a(i,this.fieldId),t)}}async uncheckAll(t){const e=await this.getColumnByField(t);const s=this.dataSet.filter((e=>a(e,t)));for(const i of s){const s=await this.resolveColumnData(e,[i,a(i,this.fieldIndex),e]);if(s&&s.disabled)continue;this.uncheck(a(i,this.fieldId),t)}}async resolveColumnData(t,e){const s=c(t,"data",e);return s instanceof Promise?await s:s}rerender=m((async()=>{this.timeStamp=Date.now();i(this)}),50);debouncedDisplaySelectedCount=m((async()=>{if(!this.isSelectedInfoVisible()||!this.__selectedInfoRef)return;const t=this.totalSelected?`已選取 ${this.totalSelected} 筆`:"";if(this.__selectedInfoRef.innerHTML!==t){this.__selectedInfoRef.innerHTML=t}}),50);debouncedRowSelectionUpdate=m((async()=>{this.selectWillChange.emit()}),500);async checkClick(t,e){const s=await this.getColumnByField(e);const i=await this.getRowById(t);if(a(i,s.field)){if(s.type==="radio"&&(!s.data||!s.data.unchecked))return;this.uncheck(t,s.field)}else this.check(t,s.field)}isPaginationVisible(){return this.__columns&&this.pageInfo&&this.pagination&&this.__pageDate&&this.__pageDate.length>0}isPageSizeMenuVisible(){return this.pageSizeMenu&&this.isPaginationVisible()}isSelectedInfoVisible(){return this.selectedInfo&&this.clickRowTo!=null}getCheckedItemsSum(t){if(!this.checkedItemsSum)return 0;return this.checkedItemsSum[t]}handleSearchChanged(t){t.stopPropagation();const e=t.detail?.trim();if(this.searchText===e)return;this.searchChanged.emit(e)}handleColumnCheckChange(t,e){const s=t.target["checked"];if(s)this.checkAll(e.field);else this.uncheckAll(e.field)}handleColumnClick(t){if(!t.sortable)return;if(t.field==this.sortName){if(this.sortOrder=="desc")this.sortChange.emit({sortName:undefined,sortOrder:undefined});else this.sortChange.emit({sortName:this.sortName,sortOrder:"desc"})}else this.sortChange.emit({sortName:t.field,sortOrder:"asc"})}renderPagination(){if(!this.isPaginationVisible())return;return h("div",{class:"table-pagination"},h("storm-pagination",{"page-number":this.pageNumber,"total-pages":Math.ceil(this.totalRows/this.pageSize),onPageChange:t=>{this.pageNumberChange.emit(t.detail)}}))}renderPageSizeMenu(){if(!this.isPageSizeMenuVisible())return;return h("div",{class:"table-pageSizeMenu"},h("label",null,"顯示"," ",h("select",{class:"table-selector",onChange:t=>this.pageSizeChange.emit(Number(t.currentTarget.value))},this.pageList.map((t=>h("option",{value:t,selected:this.pageSize==t},t))))," ","筆結果"))}renderSearch(){if(!this.searchable)return;return h("div",{class:"table-search"},h(l,{placeholder:"請輸入關鍵字",onValueChanged:t=>this.handleSearchChanged(t)}))}renderPageInfo(){if(!this.pageInfo)return;return h("div",{class:"table-pageInfo"},this.searchable&&this.searchText?`篩選 ${this.__pageDate.length} 筆，`:"",this.pagination&&this.__pageDate.length>0?`顯示第 ${(this.pageNumber-1)*this.pageSize+1} 至 ${this.totalRows<this.pageNumber*this.pageSize?this.totalRows:this.pageNumber*this.pageSize} 筆，`:"","共 ",this.totalRows," 筆")}renderSelectedInfo(){if(!this.isSelectedInfoVisible())return;return h("div",{ref:t=>this.__selectedInfoRef=t,class:"table-selectedInfo"})}renderTableTop(){if(!this.isPageSizeMenuVisible()&&!this.searchable)return;return h("div",{class:"table-top p-1"},this.renderPageSizeMenu(),this.renderSearch())}renderTableBottom(){if(!this.isSelectedInfoVisible()&&!this.isPaginationVisible())return;return h("div",{class:"table-bottom p-1"},this.renderPageInfo(),this.renderSelectedInfo(),this.renderPagination())}initDataSet(){if(!this.dataSet?.length||!this.__columns?.length)return;const t=this.__columns.filter((t=>t.type==="checkbox"||t.type==="radio"));const e=t.length;const s=this.dataSet.length;const i=this.sidePagination==="stencil";const h=new Map;if(e>0){t.forEach((t=>{h.set(t.field,0)}))}let n=0;this.sortData(this.dataSet);const l=this.fieldId;const o=this.fieldIndex;const c=this.fieldSelected;for(let f=0;f<s;f++){const s=this.dataSet[f];const u=a(s,l);const b=a(s,o);const p=a(s,c);if(u==null){r(s,l,d("row"))}if(b==null){r(s,o,f)}if(p==null){r(s,c,false)}if(e>0){for(let n=0;n<e;n++){const e=t[n];const l=a(s,e.field);if(l==null){r(s,e.field,false)}else if(i&&l){h.set(e.field,h.get(e.field)+1)}}}if(i&&(p||a(s,c))){n++}}if(i){this.totalSelected=n;this.totalRows=s;if(e>0){for(const[t,e]of h){this.setCheckedItemsSum(t,e)}}}else{this.checkedItemsSum=null}}initColumns(){if(!this.columns)return;this.__columns=g()(this.columns);this.__columns.forEach(((t,e)=>{t.type??="text";if(t.cellType!=null&&typeof t.cellType==="string"&&f(t.cellType)){t.cellType=u(t.cellType)}if(t.type!=="action"){t.field??=["checkbox","radio"].includes(t.type)?d(t.type,e.toString()):e;t.searchable??=this.searchable}if(typeof t.render==="string"&&f(t.render)){t.render=u(t.render)}const s=t.classes??{};const i=Object.entries(s).filter((([t,e])=>t.startsWith("d-table-")&&t!=="d-table-none"&&t!=="d-table-cell"&&e===true));if(i.length>0){t.responsive=true;t.rwdClassReversal={};const e=i.some((([t])=>t.endsWith("-none")));const h=i.some((([t])=>t.endsWith("-cell")));if(e&&(h||!h)){t.rwdClassReversal["d-table-none"]=s["d-table-none"]!==true}for(const[e]of i){if(e.endsWith("-cell")){const s=e.replace(/-cell$/,"-none");t.rwdClassReversal[s]=true}else if(e.endsWith("-none")){const s=e.replace(/-none$/,"-cell");t.rwdClassReversal[s]=true}}}if(typeof t.data==="string"){if(f(t.data)){t.data=u(t.data)}else if(t.data.startsWith("{")&&t.data.endsWith("}")){try{t.data=JSON.parse(t.data)}catch(e){console.warn("無法解析欄位 data JSON：",t.data)}}}}));if(this.__columns.some((t=>t.responsive===true))){this.isColumnResponsive=true;this.__columns.unshift({type:"detail"})}this.expand.visibleColumnCount=this.__columns.filter((t=>t.visible!==false)).length;if(this.clickRowTo==="check"){const t=this.__columns.find((t=>t.type==="checkbox"||t.type==="radio"));if(t&&(!this.fieldSelected||this.fieldSelected==="__selected")){this.fieldSelected=t.field?.toString()}}if(!this.dataSet){this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}else{this.initDataSet()}}_resizeObserver;responsiveResize(){if(this._resizeObserver)return;this._resizeObserver=new ResizeObserver((()=>{this.refreshColumnVisibility()}));this._resizeObserver.observe(this.host)}_breakpointIndex;refreshColumnVisibility=m((()=>{const t=this.host.shadowRoot?.querySelector("table");if(!t)return;const e=t.offsetWidth;if(this._breakpointIndex!=null){const t=this.__breakpoints[this._breakpointIndex];const s=this.__breakpoints[this._breakpointIndex-1];if(e>=t.width&&(!s||e<s.width)){return}}let s;const i=this.__breakpoints.length;for(let t=0;t<i;t++){const{width:h}=this.__breakpoints[t];const n=t===i-1;if(e>=h&&(n||e<this.__breakpoints[t+1].width)){s=t;break}}if(s!==undefined){for(let e=0;e<i;e++){const i=`storm-table-${this.__breakpoints[e].size}`;t.classList.toggle(i,e===s)}}this._breakpointIndex=s;const h=[];let n=false;const l=this.__columns.length;for(let t=0;t<l;t++){const e=this.__columns[t];const s=this.isColumnVisible(e);e["__columnVisible"]=s;if(s){h.push(e)}else if(e.responsive===true){n=true}}if(this.__bodyRef){const t=this.__bodyRef.querySelectorAll(".detail-toggle, .row-detail");if(t.length>0){const e=n;const s=t.length;for(let i=0;i<s;i++){t[i].classList.toggle("d-table-none",!e)}}const e=n?h.length:h.filter((t=>t.type!=="detail")).length;if(this.expand.visibleColumnCount!==e){this.expand.visibleColumnCount=e;const t=e.toString();const s=this.__bodyRef.querySelectorAll(".full-cell[colspan]");const i=s.length;for(let e=0;e<i;e++){s[e].setAttribute("colspan",t)}}}}),50);isColumnVisible(t){if(t.visible===false)return false;if(!t.classes||t.responsive!==true)return true;let e=true;if(t.classes["d-table-none"]===true)e=false;if(t.classes["d-table-cell"]===true)e=true;if(typeof this._breakpointIndex==="number"&&Array.isArray(this.__breakpoints)){for(let s=0;s<=this._breakpointIndex;s++){const i=this.__breakpoints[s]?.size;if(!i)continue;if(t.classes[`d-table-${i}-none`]===true)e=false;if(t.classes[`d-table-${i}-cell`]===true)e=true}}return e}setCheckedItemsSum(t,e){this.checkedItemsSum??={};this.checkedItemsSum[t]=e}async componentWillLoad(){await o.applyShadowRootStylesAsync(this.host,"material");this.initColumns()}disconnectedCallback(){Object.values(this.__cellCheckChangeTimeoutRafId).forEach((t=>{if(t)clearTimeout(t)}));this.__cellCheckChangeTimeoutRafId={};if(this._resizeObserver){this._resizeObserver.disconnect();this._resizeObserver=undefined}}componentWillRender(){if(!this.dataSet||!this.__columns)return;this.classes=b(this.classes);this.__pageDate=this.dataSet;if(this.sidePagination==="stencil"){if(this.searchable&&this.searchText){const t=this.searchText.toLowerCase();const e=this.__columns.filter((t=>t.searchable));const s=e.length;if(s>0){this.__pageDate=this.__pageDate.filter((i=>{for(let h=0;h<s;h++){const s=e[h];const n=a(i,s.field);if(n!=null&&String(n).toLowerCase().includes(t)){return true}}return false}))}}this.sortData(this.__pageDate)}}sortData(t){if(!t||t.length<=1)return;const e=[];if(this.groupBy)e.push(this.groupBy);if(this.sortName!=null)e.push(this.sortName);if(this.fieldIndex!==undefined)e.push(this.fieldIndex);if(e.length===0)return;const s=e.length;const i=this.sortName;const h=this.sortOrder==="desc";t.sort(((t,n)=>{for(let l=0;l<s;l++){const s=e[l];const o=a(t,s);const r=a(n,s);if(o===r)continue;if(o==null&&r==null)continue;if(o==null)return-1;if(r==null)return 1;const c=s===i&&h;const d=typeof o;const f=typeof r;if(d==="string"&&f==="string"){const t=o.localeCompare(r);if(t!==0)return c?-t:t}else if(d==="number"&&f==="number"){return c?r-o:o-r}else{const t=String(o).localeCompare(String(r));if(t!==0)return c?-t:t}}return 0}))}render(){if(!this.__pageDate)return;let t=this.__pageDate;if(this.pagination&&this.sidePagination=="stencil"){const e=(this.pageNumber-1)*this.pageSize+1;const s=this.pageNumber*this.pageSize;t=t.slice(e-1,s)}return h(n,null,this.renderTableTop(),h("div",{class:{"text-sm":true,"table-responsive":true,border:this.classes&&!!this.classes["table-bordered"]}},h("div",{class:{"table-container":true,"fixed-table-header":!!this.tableHeight},style:{height:!!this.tableHeight?this.tableHeight:"inherit"}},h("storm-table-body",{ref:t=>this.__bodyRef=t,table:this,dataSet:t,columns:this.__columns,timeStamp:this.timeStamp}))),this.renderTableBottom())}componentDidRender(){this.debouncedDisplaySelectedCount();if(!this.__columns||!this.__bodyRef)return;if(this.isColumnResponsive){this.responsiveResize()}this.__columns.forEach((t=>{this.__bodyRef.updateColumnCheckbox(t)}))}static get watchers(){return{dataSet:["watchDataSetHandler"],columns:["watchColumnsHandler"],totalSelected:["watchTotalSelectedHandler"]}}};y.style=C;export{y as storm_table};
//# sourceMappingURL=p-79d3e200.entry.js.map