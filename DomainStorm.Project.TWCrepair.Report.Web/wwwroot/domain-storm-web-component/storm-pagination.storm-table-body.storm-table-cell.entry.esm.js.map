{"version":3,"file":"storm-pagination.storm-table-body.storm-table-cell.entry.esm.js","sources":["src/components/storm-pagination/storm-pagination.css?tag=storm-pagination&encapsulation=shadow","src/components/storm-pagination/storm-pagination.tsx","src/components/storm-table/storm-table-body/storm-table-body.scss?tag=storm-table-body","src/components/storm-table/storm-table-body/storm-table-body.tsx","src/utils/command-utils/command-utils.ts","src/utils/cache/memory-cache.ts","src/utils/dotnet-method-invoker/dotnet-method-invoker.ts","src/components/storm-table/storm-table-cell/storm-table-cell.css?tag=storm-table-cell","src/components/storm-table/storm-table-cell/storm-table-cell.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n:host dl,\r\n:host ol,\r\n:host ul {\r\n  margin-bottom: 0;\r\n}","import { Component, Element, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { FnIcon } from '../../utils/functional/functional';\r\nimport { SharedStyles } from '../../utils/shared-styles';\r\n\r\n@Component({\r\n  tag: 'storm-pagination',\r\n  styleUrl: 'storm-pagination.css',\r\n  shadow: true,\r\n})\r\nexport class StormPagination {\r\n  @Element() host: HTMLElement;\r\n  @Prop({ mutable: true }) pageNumber: number = 1;\r\n  @Prop() totalPages: number;\r\n  @Prop() paginationSuccessivelySize: number = 5;\r\n  @Prop() paginationPagesBySide = 1;\r\n\r\n  @Event() pageChange: EventEmitter<number>;\r\n\r\n  pageFrom: number = -1;\r\n  pageTo: number = -1;\r\n\r\n  setPage(newPageNumber: number) {\r\n    this.pageNumber = newPageNumber;\r\n    this.pageChange.emit(this.pageNumber);\r\n  }\r\n\r\n  componentWillLoad() {\r\n    SharedStyles.applyShadowRootStyles(this.host);\r\n  }\r\n\r\n  componentWillRender() {\r\n    if (this.pageNumber > this.totalPages) {\r\n      this.setPage(this.totalPages);\r\n    }\r\n    if (this.pageNumber < 1) {\r\n      this.setPage(1);\r\n    }\r\n    if (this.totalPages < this.paginationSuccessivelySize) {\r\n      this.pageFrom = 1;\r\n      this.pageTo = this.totalPages;\r\n    } else {\r\n      this.pageFrom = this.pageNumber - this.paginationPagesBySide;\r\n      this.pageTo = this.pageFrom + this.paginationPagesBySide * 2;\r\n    }\r\n\r\n    if (this.pageNumber < this.paginationSuccessivelySize - 1) {\r\n      this.pageTo = this.paginationSuccessivelySize;\r\n    }\r\n\r\n    if (this.paginationSuccessivelySize > this.totalPages - this.pageFrom) {\r\n      this.pageFrom = this.pageFrom - (this.paginationSuccessivelySize - (this.totalPages - this.pageFrom)) + 1;\r\n    }\r\n\r\n    if (this.pageFrom < 1) {\r\n      this.pageFrom = 1;\r\n    }\r\n\r\n    if (this.pageTo > this.totalPages) {\r\n      this.pageTo = this.totalPages;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let paginationItems = new Array<IPaginationItem>();\r\n\r\n    if (this.pageFrom > 1) {\r\n      let max = this.paginationPagesBySide;\r\n      if (max >= this.pageFrom) max = this.pageFrom - 1;\r\n\r\n      for (let i = 1; i <= max; i++) {\r\n        paginationItems.push({\r\n          page: i,\r\n        });\r\n      }\r\n      if (this.pageFrom - 1 === max + 1) {\r\n        paginationItems.push({\r\n          page: this.pageFrom - 1,\r\n        });\r\n      } else {\r\n        if (this.pageFrom - 1 > max) {\r\n          paginationItems.push({\r\n            title: '...',\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = this.pageFrom; i <= this.pageTo; i++) {\r\n      paginationItems.push({\r\n        page: i,\r\n      });\r\n    }\r\n\r\n    if (this.totalPages > this.pageTo) {\r\n      let min = this.totalPages - (this.paginationPagesBySide - 1);\r\n      if (this.pageTo >= min) min = this.pageTo + 1;\r\n\r\n      if (this.pageTo + 1 === min - 1) {\r\n        paginationItems.push({\r\n          page: this.pageTo + 1,\r\n        });\r\n      } else {\r\n        paginationItems.push({\r\n          title: '...',\r\n        });\r\n      }\r\n\r\n      for (let i = min; i <= this.totalPages; i++) {\r\n        paginationItems.push({\r\n          page: i,\r\n        });\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Host>\r\n        <ul class=\"pagination pagination-primary\">\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"Previous\"\r\n              onClick={() => this.setPage(this.pageNumber == 1 ? (this.pageNumber = this.totalPages) : (this.pageNumber = this.pageNumber - 1))}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_left</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n          {paginationItems.map(x => {\r\n            return (\r\n              <li\r\n                class={{ 'page-item': true, active: x.page === this.pageNumber, disabled: x.page == null }}\r\n                onClick={() => {\r\n                  if (x.page) this.setPage((this.pageNumber = x.page));\r\n                }}\r\n              >\r\n                <a class=\"page-link\" href=\"javascript:;\">\r\n                  {x.title ? x.title : x.page.toString()}\r\n                </a>\r\n              </li>\r\n            );\r\n          })}\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"Next\"\r\n              onClick={() => this.setPage(this.pageNumber == this.totalPages ? (this.pageNumber = 1) : (this.pageNumber = this.pageNumber + 1))}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_right</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n\r\nexport interface IPaginationItem {\r\n  title?: string;\r\n  page?: number;\r\n}\r\n","@use \"sass:list\";\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n:host .group-item {\r\n  > th {\r\n    cursor: auto;\r\n\r\n    > div {\r\n      line-height: 1;\r\n      margin: 0.25rem;\r\n    }\r\n  }\r\n}\r\n\r\n:host span.detail-title {\r\n  display: inline-block;\r\n  min-width: 75px;\r\n  font-weight: bold;\r\n}\r\n\r\n:host .d-table-none {\r\n  display: none !important;\r\n}\r\n\r\n:host .d-table-cell {\r\n  display: table-cell !important;\r\n}\r\n\r\n// 響應式類別設定\r\n$sizes: 4xs, 3xs, xxs, xs, sm, md, lg, xl, xxl, 3xl, 4xl;\r\n\r\n@each $innerSize in $sizes {\r\n  $none-selectors: ();\r\n  $cell-selectors: ();\r\n\r\n  @each $size in $sizes {\r\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\r\n      $none-selectors: list.append($none-selectors, \":host .storm-table-#{$size} .d-table-#{$innerSize}-none\", comma);\r\n    }\r\n\r\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\r\n      $cell-selectors: list.append($cell-selectors, \":host .storm-table-#{$size} .d-table-#{$innerSize}-cell\", comma);\r\n    }\r\n  }\r\n\r\n  #{$none-selectors} {\r\n    display: none !important;\r\n  }\r\n\r\n  #{$cell-selectors} {\r\n    display: table-cell !important;\r\n  }\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, forceUpdate, h } from '@stencil/core';\r\nimport { getFieldValue, mergeClasses, parseClassNames } from '../../../utils/utils';\r\nimport type { TableColumnInterface } from '../interface';\r\nimport { StormTable } from '../storm-table';\r\n\r\n@Component({\r\n  tag: 'storm-table-body',\r\n  styleUrl: 'storm-table-body.scss',\r\n  shadow: false,\r\n})\r\nexport class StormTableBody {\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop() table: StormTable;\r\n  @Prop() dataSet: object[];\r\n  @Prop({ mutable: true }) timeStamp?: number;\r\n\r\n  @Event() clickRow: EventEmitter<string>;\r\n\r\n  @Method()\r\n  async updateColumnCheckbox(col: TableColumnInterface) {\r\n    if (!this.dataSet || col.type !== 'checkbox') return;\r\n    const checkedCount = this.getTotalChecked(col.field);\r\n    const stormCheckbox = this.host.querySelector('th[data-field=\"' + col.field + '\"] storm-checkbox') as HTMLStormCheckboxElement;\r\n\r\n    stormCheckbox.checked = checkedCount === this.table.totalRows;\r\n    stormCheckbox.indeterminate = checkedCount > 0 && checkedCount < this.table.totalRows;\r\n  }\r\n\r\n  @Method()\r\n  async updateRowCheckbox(row: object, col: TableColumnInterface) {\r\n    const cell = this.host.querySelector(\r\n      'tr[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"] storm-table-cell[data-field=\"' + col.field + '\"]',\r\n    ) as HTMLStormTableCellElement;\r\n    if (cell) {\r\n      forceUpdate(cell);\r\n    }\r\n    if (col.field === this.table.fieldSelected) {\r\n      await this.updateRowSelection(row);\r\n    }\r\n  }\r\n\r\n  @Method()\r\n  async updateRowSelection(row: object) {\r\n    const el = this.host.querySelector('tr[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"]') as HTMLInputElement;\r\n    if (el) el.classList.toggle('table-primary', getFieldValue(row, this.table.fieldSelected));\r\n  }\r\n\r\n  private computeColumnClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\r\n    return {\r\n      'text-center': col.align === 'center',\r\n      'text-start': !col.align || col.align === 'left',\r\n      'text-end': col.align === 'right',\r\n      'align-middle': !col.valign || col.valign === 'middle',\r\n      'align-top': col.valign === 'top',\r\n      'align-bottom': col.valign === 'bottom',\r\n      'font-weight-bolder': true,\r\n      'text-truncate': true,\r\n      'table-sorter': col.sortable,\r\n      asc: this.table.sortName === col.field && this.table.sortOrder !== 'desc',\r\n      desc: this.table.sortName === col.field && this.table.sortOrder === 'desc',\r\n      ...(classes || {}),\r\n      ...(col.classes || {}),\r\n    };\r\n  }\r\n\r\n  renderThead() {\r\n    if (!this.table.columns) return;\r\n    return (\r\n      <thead>\r\n        <tr>\r\n          {this.table.columns\r\n            .filter(col => col.visible !== false)\r\n            .map(col => {\r\n              return this.renderColumn(col);\r\n            })}\r\n        </tr>\r\n      </thead>\r\n    );\r\n  }\r\n\r\n  renderColumn(col: TableColumnInterface) {\r\n    let content: any = col.title;\r\n    const classes: any = {\r\n      'thead-xxs': col.type === 'detail' || col.type === 'serialNumber' || col.type === 'radio' || col.type === 'checkbox',\r\n      'detail-toggle': col.type === 'detail',\r\n    };\r\n\r\n    if (content == null && col.type === 'checkbox') {\r\n      const checkedCount = this.getTotalChecked(col.field);\r\n      content = (\r\n        <storm-checkbox\r\n          type=\"checkbox\"\r\n          indeterminate={checkedCount > 0 && checkedCount < this.table.totalRows}\r\n          checked={checkedCount === this.table.totalRows}\r\n          onValueChanged={ev => this.handleColumnCheckChange(ev, col)}\r\n        ></storm-checkbox>\r\n      );\r\n    }\r\n\r\n    return this.renderHeaderCell(content, col, classes);\r\n  }\r\n\r\n  renderHeaderCell(content: any, col: TableColumnInterface, classes: Record<string, boolean> = {}) {\r\n    return (\r\n      <th data-field={col.field} scope=\"col\" class={this.computeColumnClasses(col, classes)} onClick={() => this.handleColumnClick(col)}>\r\n        <div class=\"cell\">{content}</div>\r\n        {col.description && <div class=\"table-description\">{col.description}</div>}\r\n      </th>\r\n    );\r\n  }\r\n\r\n  handleColumnClick(col: TableColumnInterface) {\r\n    if (!col.sortable) return;\r\n    if (col.field == this.table.sortName) {\r\n      if (this.table.sortOrder == 'desc') this.table.sortChange.emit({ sortName: undefined, sortOrder: undefined });\r\n      else this.table.sortChange.emit({ sortName: this.table.sortName, sortOrder: 'desc' });\r\n    } else this.table.sortChange.emit({ sortName: col.field, sortOrder: 'asc' });\r\n  }\r\n\r\n  async handleColumnCheckChange(ev: CustomEvent<boolean>, col: TableColumnInterface) {\r\n    const checked = ev.detail;\r\n    if (checked) await this.table.checkAll(col.field);\r\n    else await this.table.uncheckAll(col.field);\r\n  }\r\n\r\n  initSelect() {\r\n    if (!this.dataSet || !this.table.columns) return;\r\n\r\n    this.dataSet.forEach(async row => {\r\n      await this.updateRowSelection(row);\r\n    });\r\n  }\r\n\r\n  getTotalChecked(field: string | number): number {\r\n    if (!this.table.totalChecked) return 0;\r\n    return this.table.totalChecked[field];\r\n  }\r\n\r\n  private computeCellClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\r\n    return {\r\n      'text-center': col.align === 'center',\r\n      'text-start': !col.align || col.align === 'left',\r\n      'text-end': col.align === 'right',\r\n      'align-middle': !col.valign || col.valign === 'middle',\r\n      'align-top': col.valign === 'top',\r\n      'align-bottom': col.valign === 'bottom',\r\n      ...(classes || {}),\r\n      ...(col.classes || {}),\r\n    };\r\n  }\r\n\r\n  renderCell(row: object, index: number, col: TableColumnInterface) {\r\n    const cellClasses = this.computeCellClasses(col, { 'text-xs': col.type === 'serialNumber', 'detail-toggle': col.type === 'detail' });\r\n    return (\r\n      <td data-field={col.field} class={cellClasses}>\r\n        {this.renderCellContent(row, index, col)}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  renderCellContent(row: object, index: number, col: TableColumnInterface) {\r\n    return <storm-table-cell table={this.table} row={row} index={index} column={col} time-stamp={this.timeStamp} data-field={col.field}></storm-table-cell>;\r\n  }\r\n\r\n  private renderRow(row: object, index: number) {\r\n    const rowId = getFieldValue(row, this.table.fieldId);\r\n    const isSelected = getFieldValue(row, this.table.fieldSelected);\r\n    const visibleColumns = this.table.columns.filter(col => col.visible !== false);\r\n\r\n    const mainRow = (\r\n      <tr data-id={rowId} class={{ 'table-primary': isSelected }} onClick={() => this.clickRow.emit(rowId)}>\r\n        {visibleColumns.map(col => this.renderCell(row, index, col))}\r\n      </tr>\r\n    );\r\n\r\n    if (this.table.isColumnResponsive) {\r\n      const detailCol = this.table.columns.find(col => col.type === 'detail');\r\n      const detailClasses = detailCol?.classes ? { ...detailCol.classes, 'row-detail': true, 'd-none': true } : { 'row-detail': true, 'd-none': true };\r\n      \r\n      return [\r\n        mainRow,\r\n        <tr class={detailClasses} data-index={index}>\r\n          <td class=\"full-cell\" colSpan={this.table.expand.visibleColumnCount}>\r\n            <ul class=\"list-group list-group-flush\">{this.renderDetail(row, index)}</ul>\r\n          </td>\r\n        </tr>,\r\n      ];\r\n    }\r\n\r\n    return mainRow;\r\n  }\r\n\r\n  renderDetail(row: object, index: number) {\r\n    return this.table.columns\r\n      .filter(col => col.responsive === true && col.visible !== false)\r\n      .map(col => (\r\n        <li class={mergeClasses({ 'list-group-item': true }, col.rwdClassReversal)}>\r\n          <span class=\"detail-title\">{col.title}</span>\r\n          <span>{this.renderCellContent(row, index, col)}</span>\r\n        </li>\r\n      ));\r\n  }\r\n\r\n  private renderRows() {\r\n    if (this.table.groupBy) {\r\n      let groupItem: string = '';\r\n      const result: any[] = [];\r\n      \r\n      for (let i = 0; i < this.dataSet.length; i++) {\r\n        const row = this.dataSet[i];\r\n        const groupByValue = getFieldValue(row, this.table.groupBy);\r\n        \r\n        if (groupByValue !== groupItem) {\r\n          groupItem = groupByValue;\r\n          result.push(\r\n            <tr class=\"group-item table-info\">\r\n              <th class=\"align-middle full-cell\" colSpan={this.table.expand.visibleColumnCount}>\r\n                {groupByValue}\r\n              </th>\r\n            </tr>\r\n          );\r\n        }\r\n        result.push(this.renderRow(row, i));\r\n      }\r\n      return result;\r\n    }\r\n    \r\n    return this.dataSet.map((row, index) => this.renderRow(row, index));\r\n  }\r\n\r\n  private renderBody() {\r\n    if (!this.dataSet?.length) {\r\n      const emptyClasses = {\r\n        'align-middle': true,\r\n        'text-center': true,\r\n        'full-cell': true,\r\n        ...(this.table.classes?.['table-sm'] ? { 'height-100': true } : { 'height-300': true })\r\n      };\r\n      \r\n      return (\r\n        <tbody>\r\n          <tr>\r\n            <td class={emptyClasses} colSpan={this.table.expand.visibleColumnCount}>\r\n              <p class=\"p-4 h6\">沒有找到符合的結果</p>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      );\r\n    }\r\n    return <tbody>{this.renderRows()}</tbody>;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <table class={{ ...{ table: true, 'mb-0': true, 'table-hover': !!this.table.clickRowTo }, ...parseClassNames(this.table.classes) }}>\r\n          {this.renderThead()}\r\n          {this.renderBody()}\r\n        </table>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  componentDidRender() {\r\n    this.initSelect();\r\n  }\r\n}\r\n","import type { ParsedCommand } from './interface';\n\n/**\n * 判斷輸入是否為有效命令格式，例如 @Invoke:DotNet('GetUser')\n * @param value 任意輸入\n * @returns 是否符合命令格式\n */\nexport function isCommandString(value: unknown): value is string {\n    if (typeof value !== 'string') return false;\n    // 檢查型別與正則，確保格式正確\n    // 僅允許單層括號內容，且括號內可為任意字元\n    return (\n        typeof value === 'string' &&\n        /^@[a-zA-Z0-9:-]+\\('.*'\\)$/.test(value.trim())\n    );\n}\n\n/**\n * 解析命令字串，回傳 ParsedCommand 或 null\n * 格式範例：@Invoke:DotNet('GetUser')\n * @param value 命令字串\n * @returns 解析後的命令物件，若格式不符則回傳 null\n */\nexport function parseCommandString(value: string): ParsedCommand | null {\n    const trimmed = value.trim();\n    // 強化正則表達式，避免括號內為空或出現多行情況\n    const commandRegex = /^@([a-zA-Z0-9:-]+)\\('([^']*)'\\)$/;\n\n    const match = commandRegex.exec(trimmed);\n    if (!match) return null;\n\n    return {\n        command: match[1],\n        value: match[2]\n    };\n}\n\n/**\n * 檢查解析後命令是否符合指定 path\n * @param parsed 解析後的命令物件\n * @param expectedPath 預期的 path 字串，例如 \"Invoke:DotNet\"\n * @returns 是否符合預期 path\n */\nexport function isPath(parsed: ParsedCommand | null, expectedPath: string): boolean {\n    return !!parsed && parsed.command === expectedPath;\n}","import type { CacheEntry, ICacheProvider } from './interface';\n\n/**\n * 記憶體快取 (MemoryCache) 的實作，使用 Map<string, CacheEntry> 儲存所有項目\n */\nexport class MemoryCache implements ICacheProvider {\n    private readonly store: Map<string, CacheEntry> = new Map();\n\n    async get(key: string): Promise<CacheEntry | null> {\n        const entry = this.store.get(key) ?? null;\n        if (!entry) return null;\n\n        const now = Date.now();\n        // 如果已過期，就刪除並回傳 null\n        if (now - entry.timestamp >= entry.expiredMillis) {\n            this.store.delete(key);\n            return null;\n        }\n        return entry;\n    }\n\n    async set(key: string, entry: CacheEntry): Promise<void> {\n        this.store.set(key, entry);\n    }\n\n    async delete(key: string): Promise<void> {\n        this.store.delete(key);\n    }\n\n    async clear(): Promise<void> {\n        this.store.clear();\n    }\n\n    async deleteByPrefix(prefix: string): Promise<void> {\n        for (const key of this.store.keys()) {\n            if (key.startsWith(prefix)) {\n                this.store.delete(key);\n            }\n        }\n    }\n}\n","import { CacheService } from '../cache/cache-service';\nimport { MemoryCache } from '../cache/memory-cache';\n\ndeclare global {\n    interface Window {\n        counterInterop: {\n            invokeMethodAsync: (method: string, ...args: any[]) => Promise<any>;\n        };\n    }\n}\n\nconst cacheService = new CacheService(new MemoryCache());\n\n/**\n * 呼叫 .NET Interop 方法，支援快取與錯誤保護\n * @param value    字串，格式可為 \"Invoke:DotNet('methodName')\" 或僅 methodName\n * @param args     傳給 .NET 方法的參數陣列\n * @param settings 可選設定：\n *                 - cache: 是否啟用快取，預設 true\n *                 - regionName: 快取區域名稱，預設 'dotnetInterop'\n * @return Promise<any> 回傳 .NET 方法的結果\n */\nexport async function invokeDotNetMethodAsync(\n    methodName: string,\n    args: any[] = [],\n    settings: { cache?: boolean, regionName?: string } = {}\n): Promise<any> {\n    if (typeof methodName !== 'string') {\n        throw new TypeError('methodName 必須是字串');\n    }\n\n    settings = { cache: true, regionName: 'dotnetInterop', ...settings };\n\n    // 組成 key：methodName + args\n    const key = `${methodName}:${JSON.stringify(args)}`;\n    const useCache = settings.cache ?? true;\n\n    if (useCache) {\n        const cachedValue = await cacheService.get<any>(key, settings.regionName);\n        if (cachedValue !== null) {\n            return cachedValue;\n        }\n    }\n\n    try {\n        const result = await window.counterInterop?.invokeMethodAsync(\n            methodName,\n            ...args\n        );\n\n        if (useCache) {\n            await cacheService.set(key, result, settings.regionName);\n        }\n        return result;\n    } catch (err) {\n        console.error(`[Interop] 無法呼叫 '${methodName}'：`, err);\n        return 'unknown';\n    }\n}\n\n/**\n * 清除 .NET Interop 方法的快取\n * @param regionName (可選) 指定要清除的 region，預設為 'dotnetInterop'\n * @return Promise<void>\n */\nexport async function clearDotNetMethodCache(regionName: string = 'dotnetInterop'): Promise<void> {\n    await cacheService.clearRegion(regionName);\n}",":host {\r\n  display: block;\r\n}\r\n\r\n.input-group.input-group-static .form-control {\r\n  background-color: white;\r\n  line-height: 1.25rem;\r\n  padding: .25rem;\r\n}\r\n\r\n.detail-button {\r\n  cursor: pointer;\r\n}","import { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, State } from '@stencil/core';\r\nimport { isCommandString, parseCommandString } from '../../../utils/command-utils/command-utils';\r\nimport { invokeDotNetMethodAsync } from '../../../utils/dotnet-method-invoker/dotnet-method-invoker';\r\nimport { FnIconSwitch } from '../../../utils/functional/functional';\r\nimport {\r\n  appendHighlight,\r\n  escapeHtml,\r\n  evaluateConditions,\r\n  getFieldValue,\r\n  isConditionGroups,\r\n  isConditions,\r\n  replacePlaceholders,\r\n  resolvePropertyValue,\r\n  setFieldValue,\r\n} from '../../../utils/utils';\r\nimport type { ICheckboxItem } from '../../storm-checkbox-group/storm-checkbox-group';\r\nimport type { CheckboxGroupInterface, TableColumnInterface } from '../interface';\r\nimport { StormTable } from '../storm-table';\r\nimport type { ClickActionDetail } from '../storm-table-toolbar/interface';\r\nimport type {\r\n  CheckboxGroupControlOptionInterface,\r\n  CheckControlOptionInterface,\r\n  DropdownControlOptionInterface,\r\n  DropdownTreeControlOptionInterface,\r\n  TextAreaControlOptionInterface,\r\n} from './interface';\r\n\r\n@Component({\r\n  tag: 'storm-table-cell',\r\n  styleUrl: 'storm-table-cell.css',\r\n  shadow: false,\r\n})\r\nexport class StormTableCell {\r\n  @State() private cellData: any;\r\n  @State() private cellType: string = 'text';\r\n  @State() private isDisabled: boolean = false;\r\n  @State() private prependText?: string;\r\n  @State() private appendText?: string;\r\n\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop() table: StormTable;\r\n  @Prop() row: object;\r\n  @Prop() index: number;\r\n  @Prop() column: TableColumnInterface;\r\n  @Prop({ mutable: true }) timeStamp?: number;\r\n\r\n  @Event() clickCell: EventEmitter<{ id: string; field: string | number }>;\r\n  @Event() clickAction: EventEmitter<ClickActionDetail>;\r\n  @Event() valueChanged: EventEmitter<any>;\r\n  @Event() cellValueChanged: EventEmitter<{ id: string; field: string | number; value: any }>;\r\n\r\n  @Listen('valueChanged')\r\n  valueChangedHandler(ev: CustomEvent<any>) {\r\n    if (this.column.field) {\r\n      setFieldValue(this.row, this.column.field, ev.detail);\r\n      this.cellValueChanged.emit({ id: getFieldValue(this.row, this.table.fieldId), field: this.column.field, value: ev.detail });\r\n    }\r\n  }\r\n\r\n  renderSerialNumber() {\r\n    return (this.table.pageNumber - 1) * this.table.pageSize + this.index + 1;\r\n  }\r\n\r\n  renderDetail() {\r\n    return (\r\n      <FnIconSwitch\r\n        onToggle={on => {\r\n          const detailRow = this.table.host.shadowRoot.querySelector('.row-detail[data-index=\"' + this.index + '\"]');\r\n          if (detailRow) {\r\n            detailRow.classList.toggle('d-none', !on);\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderActionControl() {\r\n    return (\r\n      <storm-table-toolbar\r\n        table={this.table}\r\n        column={this.column}\r\n        row={this.row}\r\n        timeStamp={this.timeStamp}\r\n        onClickAction={ev => {\r\n          ev.stopPropagation();\r\n          this.clickAction.emit(ev.detail);\r\n        }}\r\n      ></storm-table-toolbar>\r\n    );\r\n  }\r\n\r\n  renderInputControl() {\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <input\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          aria-label={this.column.title}\r\n          disabled={this.isDisabled}\r\n          value={getFieldValue(this.row, this.column.field)}\r\n          onClick={ev => ev.stopPropagation()}\r\n          onChange={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit((ev.target as HTMLInputElement).value);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTextareaControl() {\r\n    const option = this.cellData as TextAreaControlOptionInterface;\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <textarea\r\n          class=\"form-control\"\r\n          disabled={this.isDisabled}\r\n          cols={option.cols}\r\n          rows={option.rows}\r\n          title={this.column.title}\r\n          value={getFieldValue(this.row, this.column.field)}\r\n          onClick={ev => ev.stopPropagation()}\r\n          onChange={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit((ev.target as HTMLInputElement).value);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDropdownControl() {\r\n    const option = this.cellData as DropdownControlOptionInterface;\r\n    const dataSet = option.dataSet.map(item => ({\r\n      ...item,\r\n    }));\r\n    return (\r\n      <storm-dropdown\r\n        disabled={this.isDisabled}\r\n        label={option.label}\r\n        value={getFieldValue(this.row, this.column.field)}\r\n        dataSet={dataSet}\r\n        nullable={option.nullable ?? false}\r\n        searchable={option.searchable ?? true}\r\n        selection={'single'}\r\n        timeStamp={this.timeStamp}\r\n        type={'select'}\r\n        onValueChanged={ev => {\r\n          ev.stopPropagation();\r\n          this.valueChanged.emit(ev.detail);\r\n        }}\r\n      ></storm-dropdown>\r\n    );\r\n  }\r\n\r\n  renderDropdownTreeControl() {\r\n    const option = this.cellData as DropdownTreeControlOptionInterface;\r\n    let dataSet = option.dataSet;\r\n    if (option.dataSets != null && isConditionGroups(option.dataSets)) {\r\n      for (const conditionGroup of option.dataSets) {\r\n        if (isConditions(conditionGroup.conditions) && evaluateConditions(conditionGroup.conditions, this.row)) {\r\n          dataSet = conditionGroup.value;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return (\r\n      <storm-dropdown-tree\r\n        disabled={this.isDisabled}\r\n        loading={option.loading}\r\n        partialLoad={option.partialLoad}\r\n        label={option.label}\r\n        value={getFieldValue(this.row, this.column.field)}\r\n        text={option.fieldText ? getFieldValue(this.row, option.fieldText) : null}\r\n        dataSet={dataSet}\r\n        dataSource={option.dataSource}\r\n        fieldId={option.fieldId ?? 'id'}\r\n        fieldLabel={option.fieldLabel ?? 'label'}\r\n        fieldChildren={option.fieldChildren ?? 'children'}\r\n        expandLevel={option.expandLevel ?? 2}\r\n        nodeSelectableRule={option.nodeSelectableRule}\r\n        nullable={option.nullable ?? false}\r\n        searchable={option.searchable ?? true}\r\n        selection={'single'}\r\n        timeStamp={this.timeStamp}\r\n        onValueChanged={ev => {\r\n          ev.stopPropagation();\r\n          this.valueChanged.emit(ev.detail);\r\n        }}\r\n        onTextChanged={ev => {\r\n          ev.stopPropagation();\r\n          if (option.fieldText) setFieldValue(this.row, option.fieldText, ev.detail);\r\n        }}\r\n        onSearchChanged={ev => {\r\n          ev.stopPropagation();\r\n        }}\r\n      ></storm-dropdown-tree>\r\n    );\r\n  }\r\n\r\n  renderCheckControl() {\r\n    return (\r\n      <storm-checkbox type={this.cellType === 'checkbox' ? 'checkbox' : 'radio'} disabled={this.isDisabled} checked={getFieldValue(this.row, this.column.field)}></storm-checkbox>\r\n    );\r\n  }\r\n\r\n  renderCheckboxGroupControl() {\r\n    const option = this.cellData as CheckboxGroupControlOptionInterface;\r\n    const value = getFieldValue(this.row, this.column.field);\r\n    const dataSet = (option.dataSet as CheckboxGroupInterface[])\r\n      .filter(x => x.visible === undefined || (typeof x.visible === 'function' && x.visible(this.row)) || (typeof x.visible === 'boolean' && x.visible))\r\n      .map(x => {\r\n        return {\r\n          id: x.id,\r\n          label: x.label,\r\n          labelClasses: x.labelClasses,\r\n          checked: x.checked,\r\n          disabled: x.disabled,\r\n        } as ICheckboxItem;\r\n      });\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <storm-checkbox-group\r\n          disabled={this.isDisabled}\r\n          type={option.groupType}\r\n          value={value}\r\n          dataSet={dataSet}\r\n          isSwitch={option.isSwitch ?? false}\r\n          isInline={option.isInline ?? true}\r\n          onValueChanged={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit(ev.detail);\r\n          }}\r\n        ></storm-checkbox-group>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCellContent() {\r\n    switch (this.cellType) {\r\n      case 'action':\r\n        return this.renderActionControl();\r\n      case 'input':\r\n        return this.renderInputControl();\r\n      case 'checkbox':\r\n      case 'radio':\r\n        return this.renderCheckControl();\r\n      case 'textarea':\r\n        return this.renderTextareaControl();\r\n      case 'dropdown':\r\n        return this.renderDropdownControl();\r\n      case 'dropdownTree':\r\n        return this.renderDropdownTreeControl();\r\n      case 'checkboxGroup':\r\n        return this.renderCheckboxGroupControl();\r\n      case 'serialNumber':\r\n        return this.renderSerialNumber();\r\n      case 'detail':\r\n        return this.renderDetail();\r\n      case 'text':\r\n        return this.renderCellValue();\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  renderCell() {\r\n    if (!this.prependText && !this.appendText) {\r\n      return this.renderCellContent();\r\n    } else {\r\n      return (\r\n        <div class=\"d-flex flex-row gap-1 align-items-center\">\r\n          {this.prependText && <span>{this.prependText}</span>}\r\n          {this.renderCellContent()}\r\n          {this.appendText && <span>{this.appendText}</span>}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCellValue() {\r\n    let content = getFieldValue(this.row, this.column.field);\r\n\r\n    if (typeof this.column.render === 'function') {\r\n      content = this.column.render(content, this.row, this.index);\r\n    } else {\r\n      if (Array.isArray(content)) {\r\n        content = content.filter(item => item != null && item !== '').join('、');\r\n      }\r\n\r\n      if (this.table.escape && typeof content !== 'boolean' && content != null) {\r\n        content = escapeHtml(content);\r\n      }\r\n\r\n      if (content != null && this.column.transform && this.column.transform[content.toString()]) {\r\n        content = this.column.transform[content];\r\n      } else if (content && this.table.searchable && this.table.searchText) {\r\n        content = appendHighlight(content, this.table.searchText);\r\n      }\r\n    }\r\n\r\n    const template = this.column.cellTemplate || this.table.cellTemplate;\r\n    const displayValue = content != null && content.toString().trim().length > 0 ? content : '-';\r\n    return (\r\n      <span\r\n        innerHTML={replacePlaceholders(template, {\r\n          value: displayValue,\r\n          row: this.row,\r\n          index: this.index,\r\n        })}\r\n      ></span>\r\n    );\r\n  }\r\n\r\n  async componentWillRender() {\r\n    if (!this.column) {\r\n      this.cellType = 'text';\r\n      this.cellData = undefined;\r\n      this.isDisabled = false;\r\n      return;\r\n    }\r\n\r\n    const [cellType, cellData] = await Promise.all([this.resolvePropertyValueAsync<string>(this.column, 'type'), this.resolvePropertyValueAsync(this.column, 'data')]);\r\n    this.cellType = cellType;\r\n    this.cellData = cellData;\r\n\r\n    if (cellData && typeof cellData === 'object' && !Array.isArray(cellData)) {\r\n      this.isDisabled = (await this.resolvePropertyValueAsync<boolean>(cellData, 'disabled')) ?? false;\r\n      this.prependText = await this.resolvePropertyValueAsync<string>(cellData, 'prependText');\r\n      this.appendText = await this.resolvePropertyValueAsync<string>(cellData, 'appendText');\r\n      if (this.isDisabled && (cellType === 'input' || cellType === 'textarea')) {\r\n        this.cellType = 'text';\r\n      }\r\n    } else {\r\n      this.isDisabled = false;\r\n    }\r\n  }\r\n\r\n  private async resolvePropertyValueAsync<T>(targetObject: any, propertyName: string): Promise<T> {\r\n    const result = resolvePropertyValue(targetObject, propertyName, [this.row, this.index, this.column]);\r\n    if (isCommandString(result)) {\r\n      const parsed = parseCommandString(result);\r\n      if (parsed.command === 'Invoke:DotNet') {\r\n        const rowId = getFieldValue(this.row, this.table?.fieldId);\r\n        try {\r\n          return await invokeDotNetMethodAsync(parsed.value, [rowId, this.index, this.column.field], { cache: true, regionName: this.table.uid });\r\n        } catch (error) {\r\n          console.error('InvokeDotNetMethod 執行失敗', error);\r\n          throw error;\r\n        }\r\n      }\r\n      if (parsed.command === 'Get:Field') {\r\n        return getFieldValue(this.row, parsed.value);\r\n      }\r\n    }\r\n\r\n    if (isConditions(result)) {\r\n      return evaluateConditions(result, this.row) as T;\r\n    }\r\n\r\n    if (isConditionGroups(result)) {\r\n      for (const conditionGroup of result) {\r\n        if (isConditions(conditionGroup.conditions) && evaluateConditions(conditionGroup.conditions, this.row)) {\r\n          return conditionGroup.value as T;\r\n        }\r\n      }\r\n      return undefined;\r\n    }\r\n\r\n    if (result instanceof Promise) {\r\n      try {\r\n        const resolved = await result;\r\n        return resolved;\r\n      } catch (error) {\r\n        console.error('屬性 Promise 解析失敗', error);\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host\r\n        onClick={ev => {\r\n          if (this.cellType === 'checkbox' || this.cellType === 'radio') {\r\n            const option = this.cellData as CheckControlOptionInterface;\r\n            if (option && option.disabled) {\r\n              ev.stopPropagation();\r\n              ev.preventDefault();\r\n              return;\r\n            }\r\n          }\r\n          this.clickCell.emit({ id: getFieldValue(this.row, this.table.fieldId), field: this.column.field });\r\n        }}\r\n      >\r\n        {this.renderCell()}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}