{"version":3,"file":"storm-pagination.storm-table-body.storm-table-cell.entry.esm.js","sources":["src/components/storm-pagination/storm-pagination.css?tag=storm-pagination&encapsulation=shadow","src/components/storm-pagination/storm-pagination.tsx","src/components/storm-table/storm-table-body/storm-table-body.scss?tag=storm-table-body","src/components/storm-table/storm-table-body/storm-table-body.tsx","src/utils/command-utils/command-utils.ts","src/utils/cache/memory-cache.ts","src/utils/dotnet-method-invoker/dotnet-method-invoker.ts","src/components/storm-table/storm-table-cell/storm-table-cell.css?tag=storm-table-cell","src/components/storm-table/storm-table-cell/storm-table-cell.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n:host dl,\r\n:host ol,\r\n:host ul {\r\n  margin-bottom: 0;\r\n}","import { Component, Element, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { FnIcon } from '../../utils/functional/functional';\r\nimport { SharedStyles } from '../../utils/shared-styles';\r\nimport type { PaginationItem } from './interface';\r\n\r\n@Component({\r\n  tag: 'storm-pagination',\r\n  styleUrl: 'storm-pagination.css',\r\n  shadow: true,\r\n})\r\nexport class StormPagination {\r\n  @Element() host: HTMLElement;\r\n  @Prop({ mutable: true }) pageNumber: number = 1;\r\n  @Prop() totalPages: number;\r\n  @Prop() paginationSuccessivelySize: number = 5;\r\n  @Prop() paginationPagesBySide = 1;\r\n\r\n  @Event() pageChange: EventEmitter<number>;\r\n\r\n  private pageFrom: number = -1;\r\n  private pageTo: number = -1;\r\n  private cachedPaginationItems: PaginationItem[] | null = null;\r\n  private lastCalculationKey: string = '';\r\n\r\n  setPage(newPageNumber: number) {\r\n    // 邊界檢查和驗證\r\n    if (newPageNumber < 1 || newPageNumber > this.totalPages || newPageNumber === this.pageNumber) {\r\n      return;\r\n    }\r\n\r\n    this.pageNumber = newPageNumber;\r\n    // 清除快取，因為頁碼已改變\r\n    this.cachedPaginationItems = null;\r\n    this.lastCalculationKey = '';\r\n    this.pageChange.emit(this.pageNumber);\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    await SharedStyles.applyShadowRootStylesAsync(this.host, 'material');\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    // 清理快取\r\n    this.cachedPaginationItems = null;\r\n    this.lastCalculationKey = '';\r\n  }\r\n\r\n  private calculatePageRange(): void {\r\n    // 提早返回避免不必要的計算\r\n    if (this.totalPages <= 0) {\r\n      this.pageFrom = 1;\r\n      this.pageTo = 0;\r\n      return;\r\n    }\r\n\r\n    // 邊界檢查和自動修正\r\n    if (this.pageNumber > this.totalPages) {\r\n      this.pageNumber = this.totalPages;\r\n    }\r\n    if (this.pageNumber < 1) {\r\n      this.pageNumber = 1;\r\n    }\r\n\r\n    // 簡化計算邏輯\r\n    if (this.totalPages <= this.paginationSuccessivelySize) {\r\n      this.pageFrom = 1;\r\n      this.pageTo = this.totalPages;\r\n      return;\r\n    }\r\n\r\n    // 計算顯示範圍\r\n    const halfSize = Math.floor(this.paginationSuccessivelySize / 2);\r\n    this.pageFrom = Math.max(1, this.pageNumber - halfSize);\r\n    this.pageTo = Math.min(this.totalPages, this.pageFrom + this.paginationSuccessivelySize - 1);\r\n\r\n    // 調整起始位置以保持固定數量的頁面\r\n    if (this.pageTo - this.pageFrom + 1 < this.paginationSuccessivelySize) {\r\n      this.pageFrom = Math.max(1, this.pageTo - this.paginationSuccessivelySize + 1);\r\n    }\r\n  }\r\n\r\n  componentWillRender() {\r\n    this.calculatePageRange();\r\n  }\r\n\r\n  private getPaginationItems(): PaginationItem[] {\r\n    // 使用快取避免重複計算\r\n    const currentKey = `${this.pageNumber}-${this.totalPages}-${this.paginationSuccessivelySize}-${this.paginationPagesBySide}`;\r\n    if (this.lastCalculationKey === currentKey && this.cachedPaginationItems) {\r\n      return this.cachedPaginationItems;\r\n    }\r\n\r\n    const paginationItems: PaginationItem[] = [];\r\n\r\n    // 左側頁面\r\n    if (this.pageFrom > 1) {\r\n      let max = this.paginationPagesBySide;\r\n      if (max >= this.pageFrom) max = this.pageFrom - 1;\r\n\r\n      for (let i = 1; i <= max; i++) {\r\n        paginationItems.push({ page: i });\r\n      }\r\n\r\n      if (this.pageFrom - 1 === max + 1) {\r\n        paginationItems.push({ page: this.pageFrom - 1 });\r\n      } else if (this.pageFrom - 1 > max) {\r\n        paginationItems.push({ title: '...' });\r\n      }\r\n    }\r\n\r\n    // 中間頁面\r\n    for (let i = this.pageFrom; i <= this.pageTo; i++) {\r\n      paginationItems.push({ page: i });\r\n    }\r\n\r\n    // 右側頁面\r\n    if (this.totalPages > this.pageTo) {\r\n      let min = this.totalPages - (this.paginationPagesBySide - 1);\r\n      if (this.pageTo >= min) min = this.pageTo + 1;\r\n\r\n      if (this.pageTo + 1 === min - 1) {\r\n        paginationItems.push({ page: this.pageTo + 1 });\r\n      } else {\r\n        paginationItems.push({ title: '...' });\r\n      }\r\n\r\n      for (let i = min; i <= this.totalPages; i++) {\r\n        paginationItems.push({ page: i });\r\n      }\r\n    }\r\n\r\n    // 快取結果\r\n    this.cachedPaginationItems = paginationItems;\r\n    this.lastCalculationKey = currentKey;\r\n\r\n    return paginationItems;\r\n  }\r\n\r\n  render() {\r\n    const paginationItems = this.getPaginationItems();\r\n\r\n    return (\r\n      <Host>\r\n        <ul class=\"pagination pagination-primary\">\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"上一頁\"\r\n              onClick={() => {\r\n                const newPage = this.pageNumber === 1 ? this.totalPages : this.pageNumber - 1;\r\n                this.setPage(newPage);\r\n              }}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_left</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n          {paginationItems.map((x, index) => {\r\n            const isActive = x.page === this.pageNumber;\r\n            const isDisabled = x.page == null;\r\n\r\n            return (\r\n              <li\r\n                key={x.page ? `page-${x.page}` : `ellipsis-${index}`}\r\n                class={{ 'page-item': true, active: isActive, disabled: isDisabled }}\r\n                onClick={() => {\r\n                  if (x.page && !isActive) this.setPage(x.page);\r\n                }}\r\n              >\r\n                <a class=\"page-link\" href=\"javascript:;\" aria-current={isActive ? 'page' : undefined} aria-label={x.page ? `第 ${x.page} 頁` : undefined}>\r\n                  {x.title || x.page?.toString()}\r\n                </a>\r\n              </li>\r\n            );\r\n          })}\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"下一頁\"\r\n              onClick={() => {\r\n                const newPage = this.pageNumber === this.totalPages ? 1 : this.pageNumber + 1;\r\n                this.setPage(newPage);\r\n              }}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_right</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@use \"sass:list\";\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\n:host .group-item {\r\n  > th {\r\n    cursor: auto;\r\n\r\n    > div {\r\n      line-height: 1;\r\n      margin: 0.25rem;\r\n    }\r\n  }\r\n}\r\n\r\n:host span.detail-title {\r\n  display: inline-block;\r\n  min-width: 75px;\r\n  font-weight: bold;\r\n}\r\n\r\n:host .d-table-none {\r\n  display: none !important;\r\n}\r\n\r\n:host .d-table-cell {\r\n  display: table-cell !important;\r\n}\r\n\r\n// 響應式類別設定\r\n$sizes: 4xs, 3xs, xxs, xs, sm, md, lg, xl, xxl, 3xl, 4xl;\r\n\r\n@each $innerSize in $sizes {\r\n  $none-selectors: ();\r\n  $cell-selectors: ();\r\n\r\n  @each $size in $sizes {\r\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\r\n      $none-selectors: list.append($none-selectors, \":host .storm-table-#{$size} .d-table-#{$innerSize}-none\", comma);\r\n    }\r\n\r\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\r\n      $cell-selectors: list.append($cell-selectors, \":host .storm-table-#{$size} .d-table-#{$innerSize}-cell\", comma);\r\n    }\r\n  }\r\n\r\n  #{$none-selectors} {\r\n    display: none !important;\r\n  }\r\n\r\n  #{$cell-selectors} {\r\n    display: table-cell !important;\r\n  }\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, forceUpdate, h } from '@stencil/core';\r\nimport { getFieldValue, parseClassNames } from '../../../utils/utils';\r\nimport type { TableColumnInterface } from '../interface';\r\nimport { StormTable } from '../storm-table';\r\n\r\n@Component({\r\n  tag: 'storm-table-body',\r\n  styleUrl: 'storm-table-body.scss',\r\n  shadow: false,\r\n})\r\nexport class StormTableBody {\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop() table: StormTable;\r\n  @Prop() dataSet: object[];\r\n  @Prop({ mutable: true }) timeStamp?: number;\r\n\r\n  @Event() clickRow: EventEmitter<string>;\r\n\r\n  @Method()\r\n  async updateColumnCheckbox(col: TableColumnInterface) {\r\n    if (!this.dataSet || col.type !== 'checkbox') return;\r\n    const checkedCount = this.getTotalChecked(col.field);\r\n    const stormCheckbox = this.host.querySelector('th[data-field=\"' + col.field + '\"] storm-checkbox') as HTMLStormCheckboxElement;\r\n\r\n    stormCheckbox.checked = checkedCount === this.table.totalRows;\r\n    stormCheckbox.indeterminate = checkedCount > 0 && checkedCount < this.table.totalRows;\r\n  }\r\n\r\n  @Method()\r\n  async updateRowCheckbox(row: object, col: TableColumnInterface) {\r\n    const cell = this.host.querySelector(\r\n      'tr[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"] storm-table-cell[data-field=\"' + col.field + '\"]',\r\n    ) as HTMLStormTableCellElement;\r\n    if (cell) {\r\n      forceUpdate(cell);\r\n    }\r\n    if (col.field === this.table.fieldSelected) {\r\n      await this.updateRowSelection(row);\r\n    }\r\n  }\r\n\r\n  @Method()\r\n  async updateRowSelection(row: object) {\r\n    const el = this.host.querySelector('tr[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"]') as HTMLInputElement;\r\n    if (el) el.classList.toggle('table-primary', getFieldValue(row, this.table.fieldSelected) as boolean);\r\n  }\r\n\r\n  private computeColumnClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\r\n    return {\r\n      'text-center': col.align === 'center',\r\n      'text-start': !col.align || col.align === 'left',\r\n      'text-end': col.align === 'right',\r\n      'align-middle': !col.valign || col.valign === 'middle',\r\n      'align-top': col.valign === 'top',\r\n      'align-bottom': col.valign === 'bottom',\r\n      'font-weight-bolder': true,\r\n      'text-truncate': true,\r\n      'table-sorter': col.sortable,\r\n      asc: this.table.sortName === col.field && this.table.sortOrder !== 'desc',\r\n      desc: this.table.sortName === col.field && this.table.sortOrder === 'desc',\r\n      ...(classes || {}),\r\n      ...(col.classes || {}),\r\n    };\r\n  }\r\n\r\n  renderThead() {\r\n    if (!this.table.columns) return;\r\n    return (\r\n      <thead>\r\n        <tr>\r\n          {this.table.columns\r\n            .filter(col => col.visible !== false)\r\n            .map(col => {\r\n              return this.renderColumn(col);\r\n            })}\r\n        </tr>\r\n      </thead>\r\n    );\r\n  }\r\n\r\n  renderColumn(col: TableColumnInterface) {\r\n    let content: any = col.title;\r\n    const classes: any = {\r\n      'thead-xxs': col.type === 'detail' || col.type === 'serialNumber' || col.type === 'radio' || col.type === 'checkbox',\r\n      'detail-toggle': col.type === 'detail',\r\n    };\r\n\r\n    if (content == null && col.type === 'checkbox') {\r\n      const checkedCount = this.getTotalChecked(col.field);\r\n      content = (\r\n        <storm-checkbox\r\n          type=\"checkbox\"\r\n          indeterminate={checkedCount > 0 && checkedCount < this.table.totalRows}\r\n          checked={checkedCount === this.table.totalRows}\r\n          onValueChanged={ev => this.handleColumnCheckChange(ev, col)}\r\n        ></storm-checkbox>\r\n      );\r\n    }\r\n\r\n    return this.renderHeaderCell(content, col, classes);\r\n  }\r\n\r\n  renderHeaderCell(content: any, col: TableColumnInterface, classes: Record<string, boolean> = {}) {\r\n    return (\r\n      <th data-field={col.field} scope=\"col\" class={this.computeColumnClasses(col, classes)} onClick={() => this.handleColumnClick(col)}>\r\n        <div class=\"cell\">{content}</div>\r\n        {col.description && <div class=\"table-description\">{col.description}</div>}\r\n      </th>\r\n    );\r\n  }\r\n\r\n  handleColumnClick(col: TableColumnInterface) {\r\n    if (!col.sortable) return;\r\n    if (col.field == this.table.sortName) {\r\n      if (this.table.sortOrder == 'desc') this.table.sortChange.emit({ sortName: undefined, sortOrder: undefined });\r\n      else this.table.sortChange.emit({ sortName: this.table.sortName, sortOrder: 'desc' });\r\n    } else this.table.sortChange.emit({ sortName: col.field, sortOrder: 'asc' });\r\n  }\r\n\r\n  async handleColumnCheckChange(ev: CustomEvent<boolean>, col: TableColumnInterface) {\r\n    const checked = ev.detail;\r\n    if (checked) await this.table.checkAll(col.field);\r\n    else await this.table.uncheckAll(col.field);\r\n  }\r\n\r\n  async initSelect() {\r\n    if (!this.dataSet || !this.table.columns) return;\r\n\r\n    for (const row of this.dataSet) {\r\n      await this.updateRowSelection(row);\r\n    }\r\n  }\r\n\r\n  getTotalChecked(field: string | number): number {\r\n    if (!this.table.totalChecked) return 0;\r\n    return this.table.totalChecked[field];\r\n  }\r\n\r\n  private computeCellClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\r\n    return {\r\n      'text-center': col.align === 'center',\r\n      'text-start': !col.align || col.align === 'left',\r\n      'text-end': col.align === 'right',\r\n      'align-middle': !col.valign || col.valign === 'middle',\r\n      'align-top': col.valign === 'top',\r\n      'align-bottom': col.valign === 'bottom',\r\n      ...(classes || {}),\r\n      ...(col.classes || {}),\r\n    };\r\n  }\r\n\r\n  renderCell(row: object, index: number, col: TableColumnInterface) {\r\n    const cellClasses = this.computeCellClasses(col, { 'text-xs': col.type === 'serialNumber', 'detail-toggle': col.type === 'detail' });\r\n    return (\r\n      <td data-field={col.field} class={cellClasses}>\r\n        {this.renderCellContent(row, index, col)}\r\n      </td>\r\n    );\r\n  }\r\n\r\n  renderCellContent(row: object, index: number, col: TableColumnInterface) {\r\n    return <storm-table-cell table={this.table} row={row} index={index} column={col} time-stamp={this.timeStamp} data-field={col.field}></storm-table-cell>;\r\n  }\r\n\r\n  private renderRow(row: object, index: number) {\r\n    const rowId = getFieldValue(row, this.table.fieldId) as string;\r\n    const isSelected = getFieldValue(row, this.table.fieldSelected) as boolean;\r\n    const visibleColumns = this.table.columns.filter(col => col.visible !== false);\r\n\r\n    const mainRow = (\r\n      <tr data-id={rowId} class={{ 'table-primary': isSelected }} onClick={() => this.clickRow.emit(rowId)}>\r\n        {visibleColumns.map(col => this.renderCell(row, index, col))}\r\n      </tr>\r\n    );\r\n\r\n    if (this.table.isColumnResponsive) {\r\n      const detailCol = this.table.columns.find(col => col.type === 'detail');\r\n      const detailClasses = detailCol?.classes ? { ...detailCol.classes, 'row-detail': true, 'd-none': true } : { 'row-detail': true, 'd-none': true };\r\n\r\n      return [\r\n        mainRow,\r\n        <tr class={detailClasses} data-index={index}>\r\n          <td class=\"full-cell\" colSpan={this.table.expand.visibleColumnCount}>\r\n            <ul class=\"list-group list-group-flush\">{this.renderDetail(row, index)}</ul>\r\n          </td>\r\n        </tr>,\r\n      ];\r\n    }\r\n\r\n    return mainRow;\r\n  }\r\n\r\n  renderDetail(row: object, index: number) {\r\n    return this.table.columns\r\n      .filter(col => col.responsive === true && col.visible !== false)\r\n      .map(col => (\r\n        <li class={{ 'list-group-item': true, ...(col.rwdClassReversal || {}) }}>\r\n          <span class=\"detail-title\">{col.title}</span>\r\n          <span>{this.renderCellContent(row, index, col)}</span>\r\n        </li>\r\n      ));\r\n  }\r\n\r\n  private renderRows() {\r\n    if (this.table.groupBy) {\r\n      let groupItem: string = '';\r\n      const result: any[] = [];\r\n\r\n      this.dataSet.forEach((row, i) => {\r\n        const groupByValue = getFieldValue(row, this.table.groupBy) as string;\r\n\r\n        if (groupByValue !== groupItem) {\r\n          groupItem = groupByValue;\r\n          result.push(\r\n            <tr class=\"group-item table-info\">\r\n              <th class=\"align-middle full-cell\" colSpan={this.table.expand.visibleColumnCount}>\r\n                {groupByValue}\r\n              </th>\r\n            </tr>,\r\n          );\r\n        }\r\n        result.push(this.renderRow(row, i));\r\n      });\r\n      return result;\r\n    }\r\n\r\n    return this.dataSet.map((row, index) => this.renderRow(row, index));\r\n  }\r\n\r\n  private renderBody() {\r\n    if (!this.dataSet?.length) {\r\n      const emptyClasses = {\r\n        'align-middle': true,\r\n        'text-center': true,\r\n        'full-cell': true,\r\n        ...(this.table.classes?.['table-sm'] ? { 'height-100': true } : { 'height-300': true }),\r\n      };\r\n\r\n      return (\r\n        <tbody>\r\n          <tr>\r\n            <td class={emptyClasses} colSpan={this.table.expand.visibleColumnCount}>\r\n              <p class=\"p-4 h6\">沒有找到符合的結果</p>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      );\r\n    }\r\n    return <tbody>{this.renderRows()}</tbody>;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <table class={{ ...{ table: true, 'mb-0': true, 'table-hover': !!this.table.clickRowTo }, ...parseClassNames(this.table.classes) }}>\r\n          {this.renderThead()}\r\n          {this.renderBody()}\r\n        </table>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  async componentDidRender() {\r\n    await this.initSelect();\r\n  }\r\n}\r\n","import type { ParsedCommand } from './interface';\r\n\r\n/**\r\n * 判斷輸入是否為有效命令格式，例如 @Invoke:DotNet('GetUser')\r\n * @param value 任意輸入\r\n * @returns 是否符合命令格式\r\n */\r\nexport function isCommandString(value: unknown): value is string {\r\n    if (typeof value !== 'string') return false;\r\n    // 檢查型別與正則，確保格式正確\r\n    // 僅允許單層括號內容，且括號內可為任意字元\r\n    return (\r\n        typeof value === 'string' &&\r\n        /^@[a-zA-Z0-9:-]+\\('.*'\\)$/.test(value.trim())\r\n    );\r\n}\r\n\r\n/**\r\n * 解析命令字串，回傳 ParsedCommand 或 null\r\n * 格式範例：@Invoke:DotNet('GetUser')\r\n * @param value 命令字串\r\n * @returns 解析後的命令物件，若格式不符則回傳 null\r\n */\r\nexport function parseCommandString(value: string): ParsedCommand | null {\r\n    const trimmed = value.trim();\r\n    // 強化正則表達式，避免括號內為空或出現多行情況\r\n    const commandRegex = /^@([a-zA-Z0-9:-]+)\\('([^']*)'\\)$/;\r\n\r\n    const match = commandRegex.exec(trimmed);\r\n    if (!match) return null;\r\n\r\n    return {\r\n        command: match[1],\r\n        value: match[2]\r\n    };\r\n}\r\n\r\n/**\r\n * 檢查解析後命令是否符合指定 path\r\n * @param parsed 解析後的命令物件\r\n * @param expectedPath 預期的 path 字串，例如 \"Invoke:DotNet\"\r\n * @returns 是否符合預期 path\r\n */\r\nexport function isPath(parsed: ParsedCommand | null, expectedPath: string): boolean {\r\n    return !!parsed && parsed.command === expectedPath;\r\n}","import type { CacheEntry, CacheProvider } from './interface';\r\n\r\nexport class MemoryCache implements CacheProvider {\r\n    private readonly store = new Map<string, CacheEntry>();\r\n    private maxEntries: number;\r\n\r\n    constructor(maxEntries = 1000) {\r\n        this.maxEntries = maxEntries;\r\n    }\r\n\r\n    async get(key: string): Promise<CacheEntry | null> {\r\n        return this.store.get(key) || null;\r\n    }\r\n\r\n    async set(key: string, entry: CacheEntry): Promise<void> {\r\n        // If updating existing key, no need to check size\r\n        if (!this.store.has(key) && this.store.size >= this.maxEntries) {\r\n            this.evictOldestEntry();\r\n        }\r\n        \r\n        this.store.set(key, entry);\r\n    }\r\n\r\n    private evictOldestEntry(): void {\r\n        const iterator = this.store.keys();\r\n        const firstKey = iterator.next().value;\r\n        if (firstKey !== undefined) {\r\n            this.store.delete(firstKey);\r\n        }\r\n    }\r\n\r\n    async delete(key: string): Promise<void> {\r\n        this.store.delete(key);\r\n    }\r\n\r\n    async clear(): Promise<void> {\r\n        this.store.clear();\r\n    }\r\n\r\n    get defaultKeyPrefix(): string {\r\n        return 'mem';\r\n    }\r\n\r\n    async size(): Promise<number> {\r\n        return this.store.size;\r\n    }\r\n\r\n    setMaxEntries(maxEntries: number): void {\r\n        this.maxEntries = maxEntries;\r\n        this.enforceMaxEntries();\r\n    }\r\n\r\n    private enforceMaxEntries(): void {\r\n        const excessCount = this.store.size - this.maxEntries;\r\n        if (excessCount <= 0) return;\r\n        \r\n        const iterator = this.store.keys();\r\n        for (let i = 0; i < excessCount; i++) {\r\n            const key = iterator.next().value;\r\n            if (key === undefined) break;\r\n            this.store.delete(key);\r\n        }\r\n    }\r\n\r\n    getMaxEntries(): number {\r\n        return this.maxEntries;\r\n    }\r\n\r\n    async destroy(): Promise<void> {\r\n        this.store.clear();\r\n    }\r\n}","import { CacheService } from '../cache/cache-service';\r\nimport { MemoryCache } from '../cache/memory-cache';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        counterInterop: {\r\n            invokeMethodAsync: (method: string, ...args: any[]) => Promise<any>;\r\n        };\r\n    }\r\n}\r\n\r\nconst cacheService = new CacheService(new MemoryCache());\r\n\r\n/**\r\n * 呼叫 .NET Interop 方法，支援快取與錯誤保護\r\n * @param value    字串，格式可為 \"Invoke:DotNet('methodName')\" 或僅 methodName\r\n * @param args     傳給 .NET 方法的參數陣列\r\n * @param settings 可選設定：\r\n *                 - cache: 是否啟用快取，預設 true\r\n *                 - regionName: 快取區域名稱，預設 'dotnetInterop'\r\n * @return Promise<any> 回傳 .NET 方法的結果\r\n */\r\nexport async function invokeDotNetMethodAsync(\r\n    methodName: string,\r\n    args: any[] = [],\r\n    settings: { cache?: boolean, regionName?: string } = {}\r\n): Promise<any> {\r\n    if (typeof methodName !== 'string') {\r\n        throw new TypeError('methodName 必須是字串');\r\n    }\r\n\r\n    settings = { cache: true, regionName: 'dotnetInterop', ...settings };\r\n\r\n    // 組成 key：methodName + args\r\n    const key = `${methodName}:${JSON.stringify(args)}`;\r\n    const useCache = settings.cache ?? true;\r\n\r\n    if (useCache) {\r\n        const cachedValue = await cacheService.get<any>(key);\r\n        if (cachedValue !== null) {\r\n            return cachedValue;\r\n        }\r\n    }\r\n\r\n    try {\r\n        const result = await window.counterInterop?.invokeMethodAsync(\r\n            methodName,\r\n            ...args\r\n        );\r\n\r\n        if (useCache) {\r\n            await cacheService.set(key, result);\r\n        }\r\n        return result;\r\n    } catch (err) {\r\n        console.error(`[Interop] 無法呼叫 '${methodName}'：`, err);\r\n        return 'unknown';\r\n    }\r\n}\r\n\r\n/**\r\n * 清除 .NET Interop 方法的快取\r\n * @param regionName (可選) 指定要清除的 region，預設為 'dotnetInterop'\r\n * @return Promise<void>\r\n */\r\nexport async function clearDotNetMethodCache(): Promise<void> {\r\n    await cacheService.clear();\r\n}",":host {\r\n  display: block;\r\n}\r\n\r\n.input-group.input-group-static .form-control {\r\n  background-color: white;\r\n  line-height: 1.25rem;\r\n  padding: .25rem;\r\n}\r\n\r\n.detail-button {\r\n  cursor: pointer;\r\n}","import { Component, Element, Event, EventEmitter, forceUpdate, h, Host, Listen, Method, Prop, State } from '@stencil/core';\r\nimport { isCommandString, parseCommandString } from '../../../utils/command-utils/command-utils';\r\nimport { invokeDotNetMethodAsync } from '../../../utils/dotnet-method-invoker/dotnet-method-invoker';\r\nimport { FnIconSwitch } from '../../../utils/functional/functional';\r\nimport {\r\n  appendHighlight,\r\n  debounce,\r\n  escapeHtml,\r\n  evaluateConditions,\r\n  getFieldValue,\r\n  isConditionGroups,\r\n  isConditions,\r\n  replacePlaceholders,\r\n  resolvePropertyValue,\r\n  setFieldValue,\r\n} from '../../../utils/utils';\r\nimport type { ICheckboxItem } from '../../storm-checkbox-group/storm-checkbox-group';\r\nimport type { CheckboxGroupInterface, TableColumnInterface } from '../interface';\r\nimport { StormTable } from '../storm-table';\r\nimport type { ClickActionDetail } from '../storm-table-toolbar/interface';\r\nimport type {\r\n  CellValue,\r\n  CheckboxGroupControlOptionInterface,\r\n  CheckControlOptionInterface,\r\n  DropdownControlOptionInterface,\r\n  DropdownTreeControlOptionInterface,\r\n  TextAreaControlOptionInterface,\r\n} from './interface';\r\n\r\n@Component({\r\n  tag: 'storm-table-cell',\r\n  styleUrl: 'storm-table-cell.css',\r\n  shadow: false,\r\n})\r\nexport class StormTableCell {\r\n  @State() private cellData: any;\r\n  @State() private cellType: string = 'text';\r\n  @State() private isDisabled: boolean = false;\r\n  @State() private prependText?: string;\r\n  @State() private appendText?: string;\r\n  private __cellValueEditingEvent?: CellValue;\r\n\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop() table: StormTable;\r\n  @Prop() row: object;\r\n  @Prop() index: number;\r\n  @Prop() column: TableColumnInterface;\r\n  @Prop({ mutable: true }) timeStamp?: number;\r\n\r\n  @Event() clickCell: EventEmitter<{ id: string; field: string | number }>;\r\n  @Event() clickAction: EventEmitter<ClickActionDetail>;\r\n  @Event() valueChanged: EventEmitter<any>;\r\n\r\n  @Event() cellWillValueChanged: EventEmitter<CellValue>;\r\n  @Event() cellValueChanged: EventEmitter<CellValue>;\r\n  @Event() cellDidValueChanged: EventEmitter<CellValue>;\r\n  @Event() cellValueChangedOnBlur: EventEmitter<CellValue>;\r\n\r\n  @Listen('valueChanged')\r\n  valueChangedHandler(ev: CustomEvent<any>) {\r\n    if (!this.column?.field) return;\r\n\r\n    const eventDetail = {\r\n      id: getFieldValue(this.row, this.table.fieldId) as string,\r\n      field: this.column.field,\r\n      value: ev.detail,\r\n    };\r\n    this.cellWillValueChanged.emit(eventDetail);\r\n  }\r\n\r\n  @Listen('cellWillValueChanged')\r\n  cellWillValueChangedHandler(ev: CustomEvent<CellValue>) {\r\n    if (this.table.sidePagination === 'stencil') {\r\n      this.cellValueChanged.emit(ev.detail);\r\n    }\r\n  }\r\n\r\n  @Listen('cellValueChanged')\r\n  cellValueChangedHandler(ev: CustomEvent<CellValue>) {\r\n    setFieldValue(this.row, this.column.field, ev.detail.value);\r\n    if (this.table.sidePagination === 'stencil') {\r\n      this.cellDidValueChanged.emit(ev.detail);\r\n    }\r\n  }\r\n\r\n  @Listen('cellDidValueChanged')\r\n  cellDidValueChangedHandler(ev: CustomEvent<CellValue>) {\r\n    this.__cellValueEditingEvent = ev.detail;\r\n    if (!this.host.querySelector(':focus')) {\r\n      this.__emitCellValueChangedOnBlur();\r\n    }\r\n    this.rerender();\r\n  }\r\n\r\n  @Listen('focusout')\r\n  focusoutHandler(_: FocusEvent) {\r\n    if (this.__cellValueEditingEvent) {\r\n      this.__emitCellValueChangedOnBlur();\r\n    }\r\n  }\r\n\r\n  private readonly rerender = debounce(() => {\r\n    forceUpdate(this);\r\n  }, 100);\r\n\r\n  @Method()\r\n  async dispatchCustomEvent(type: string, detail?: object): Promise<void> {\r\n    this[type].emit(detail);\r\n  }\r\n\r\n  renderSerialNumber() {\r\n    return (this.table.pageNumber - 1) * this.table.pageSize + this.index + 1;\r\n  }\r\n\r\n  renderDetail() {\r\n    return (\r\n      <FnIconSwitch\r\n        onToggle={on => {\r\n          const detailRow = this.table.host.shadowRoot.querySelector('.row-detail[data-index=\"' + this.index + '\"]');\r\n          if (detailRow) {\r\n            detailRow.classList.toggle('d-none', !on);\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  renderActionControl() {\r\n    return (\r\n      <storm-table-toolbar\r\n        table={this.table}\r\n        column={this.column}\r\n        row={this.row}\r\n        timeStamp={this.timeStamp}\r\n        onClickAction={ev => {\r\n          ev.stopPropagation();\r\n          this.clickAction.emit(ev.detail);\r\n        }}\r\n      ></storm-table-toolbar>\r\n    );\r\n  }\r\n\r\n  renderInputControl() {\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <input\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          aria-label={this.column.title}\r\n          disabled={this.isDisabled}\r\n          value={getFieldValue(this.row, this.column.field) as string | number | string[]}\r\n          onClick={ev => ev.stopPropagation()}\r\n          onChange={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit((ev.target as HTMLInputElement).value);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTextareaControl() {\r\n    const option = this.cellData as TextAreaControlOptionInterface;\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <textarea\r\n          class=\"form-control\"\r\n          disabled={this.isDisabled}\r\n          cols={option.cols}\r\n          rows={option.rows}\r\n          title={this.column.title}\r\n          value={getFieldValue(this.row, this.column.field) as string}\r\n          onClick={ev => ev.stopPropagation()}\r\n          onChange={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit((ev.target as HTMLInputElement).value);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDropdownControl() {\r\n    const option = this.cellData as DropdownControlOptionInterface;\r\n    const dataSet = option.dataSet;\r\n    return (\r\n      <storm-dropdown\r\n        disabled={this.isDisabled}\r\n        label={option.label}\r\n        value={getFieldValue(this.row, this.column.field) as string | string[]}\r\n        dataSet={dataSet}\r\n        nullable={option.nullable ?? false}\r\n        searchable={option.searchable ?? true}\r\n        selection={'single'}\r\n        timeStamp={this.timeStamp}\r\n        type={'select'}\r\n        onValueChanged={ev => {\r\n          ev.stopPropagation();\r\n          this.valueChanged.emit(ev.detail);\r\n        }}\r\n      ></storm-dropdown>\r\n    );\r\n  }\r\n\r\n  renderDropdownTreeControl() {\r\n    const option = this.cellData as DropdownTreeControlOptionInterface;\r\n    let dataSet = option.dataSet;\r\n\r\n    if (option.dataSets && isConditionGroups(option.dataSets)) {\r\n      const matchingConditionGroup = option.dataSets.find(conditionGroup => isConditions(conditionGroup.conditions) && evaluateConditions(conditionGroup.conditions, this.row));\r\n      if (matchingConditionGroup) {\r\n        dataSet = matchingConditionGroup.value;\r\n      }\r\n    }\r\n    return (\r\n      <storm-dropdown-tree\r\n        disabled={this.isDisabled}\r\n        loading={option.loading}\r\n        partialLoad={option.partialLoad}\r\n        label={option.label}\r\n        value={getFieldValue(this.row, this.column.field) as string | string[]}\r\n        text={option.fieldText ? (getFieldValue(this.row, option.fieldText) as string) : null}\r\n        dataSet={dataSet}\r\n        dataSource={option.dataSource}\r\n        fieldId={option.fieldId ?? 'id'}\r\n        fieldLabel={option.fieldLabel ?? 'label'}\r\n        fieldChildren={option.fieldChildren ?? 'children'}\r\n        expandLevel={option.expandLevel ?? 2}\r\n        nodeSelectableRule={option.nodeSelectableRule}\r\n        nullable={option.nullable ?? false}\r\n        searchable={option.searchable ?? true}\r\n        selection={'single'}\r\n        timeStamp={this.timeStamp}\r\n        onValueChanged={ev => {\r\n          ev.stopPropagation();\r\n          this.valueChanged.emit(ev.detail);\r\n        }}\r\n        onTextChanged={ev => {\r\n          ev.stopPropagation();\r\n          if (option.fieldText) setFieldValue(this.row, option.fieldText, ev.detail);\r\n        }}\r\n        onSearchChanged={ev => {\r\n          ev.stopPropagation();\r\n        }}\r\n      ></storm-dropdown-tree>\r\n    );\r\n  }\r\n\r\n  renderCheckControl() {\r\n    return (\r\n      <storm-checkbox\r\n        type={this.cellType === 'checkbox' ? 'checkbox' : 'radio'}\r\n        disabled={this.isDisabled}\r\n        checked={getFieldValue(this.row, this.column.field) as boolean}\r\n      ></storm-checkbox>\r\n    );\r\n  }\r\n\r\n  renderCheckboxGroupControl() {\r\n    const option = this.cellData as CheckboxGroupControlOptionInterface;\r\n    const value = getFieldValue(this.row, this.column.field) as any;\r\n    const dataSet = (option.dataSet as CheckboxGroupInterface[])\r\n      .filter(x => {\r\n        if (x.visible === undefined) return true;\r\n        return typeof x.visible === 'function' ? x.visible(this.row) : x.visible;\r\n      })\r\n      .map(\r\n        x =>\r\n          ({\r\n            id: x.id,\r\n            label: x.label,\r\n            labelClasses: x.labelClasses,\r\n            checked: x.checked,\r\n            disabled: x.disabled,\r\n          } as ICheckboxItem),\r\n      );\r\n    return (\r\n      <div class=\"input-group input-group-static\">\r\n        <storm-checkbox-group\r\n          disabled={this.isDisabled}\r\n          type={option.groupType}\r\n          value={value}\r\n          dataSet={dataSet}\r\n          isSwitch={option.isSwitch ?? false}\r\n          isInline={option.isInline ?? true}\r\n          onValueChanged={ev => {\r\n            ev.stopPropagation();\r\n            this.valueChanged.emit(ev.detail);\r\n          }}\r\n        ></storm-checkbox-group>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCellContent() {\r\n    switch (this.cellType) {\r\n      case 'action':\r\n        return this.renderActionControl();\r\n      case 'input':\r\n        return this.renderInputControl();\r\n      case 'checkbox':\r\n      case 'radio':\r\n        return this.renderCheckControl();\r\n      case 'textarea':\r\n        return this.renderTextareaControl();\r\n      case 'dropdown':\r\n        return this.renderDropdownControl();\r\n      case 'dropdownTree':\r\n        return this.renderDropdownTreeControl();\r\n      case 'checkboxGroup':\r\n        return this.renderCheckboxGroupControl();\r\n      case 'serialNumber':\r\n        return this.renderSerialNumber();\r\n      case 'detail':\r\n        return this.renderDetail();\r\n      case 'text':\r\n        return this.renderCellValue();\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  renderCell() {\r\n    if (!this.prependText && !this.appendText) {\r\n      return this.renderCellContent();\r\n    } else {\r\n      return (\r\n        <div class=\"d-flex flex-row gap-1 align-items-center\">\r\n          {this.prependText && <span>{this.prependText}</span>}\r\n          {this.renderCellContent()}\r\n          {this.appendText && <span>{this.appendText}</span>}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCellValue() {\r\n    let content = getFieldValue(this.row, this.column.field) as any;\r\n\r\n    if (typeof this.column.render === 'function') {\r\n      content = this.column.render(content, this.row, this.index);\r\n    } else {\r\n      if (Array.isArray(content)) {\r\n        content = content.filter(item => item != null && item !== '').join('、');\r\n      }\r\n\r\n      if (this.table.escape && typeof content !== 'boolean' && content != null) {\r\n        content = escapeHtml(content);\r\n      }\r\n\r\n      if (content != null && this.column.transform && this.column.transform[content.toString()]) {\r\n        content = this.column.transform[content];\r\n      } else if (content && this.table.searchable && this.table.searchText) {\r\n        content = appendHighlight(content, this.table.searchText);\r\n      }\r\n    }\r\n\r\n    const template = this.column.cellTemplate || this.table.cellTemplate;\r\n    const displayValue = content != null && content.toString().trim().length > 0 ? content : '-';\r\n    return (\r\n      <span\r\n        innerHTML={replacePlaceholders(template, {\r\n          value: displayValue,\r\n          row: this.row,\r\n          index: this.index,\r\n        })}\r\n      ></span>\r\n    );\r\n  }\r\n\r\n  async componentWillRender() {\r\n    if (!this.column) {\r\n      this.resetCellState();\r\n      return;\r\n    }\r\n\r\n    const [cellType, cellData] = await Promise.all([this.resolvePropertyValueAsync<string>(this.column, 'type'), this.resolvePropertyValueAsync(this.column, 'data')]);\r\n\r\n    this.cellType = cellType || 'text';\r\n    this.cellData = cellData;\r\n\r\n    if (cellData && typeof cellData === 'object' && !Array.isArray(cellData)) {\r\n      const [disabled, prependText, appendText] = await Promise.all([\r\n        this.resolvePropertyValueAsync<boolean>(cellData, 'disabled'),\r\n        this.resolvePropertyValueAsync<string>(cellData, 'prependText'),\r\n        this.resolvePropertyValueAsync<string>(cellData, 'appendText'),\r\n      ]);\r\n\r\n      this.isDisabled = disabled ?? false;\r\n      this.prependText = prependText;\r\n      this.appendText = appendText;\r\n\r\n      if (this.isDisabled && (cellType === 'input' || cellType === 'textarea')) {\r\n        this.cellType = 'text';\r\n      }\r\n    } else {\r\n      this.resetControlState();\r\n    }\r\n  }\r\n\r\n  private resetCellState(): void {\r\n    this.cellType = 'text';\r\n    this.cellData = undefined;\r\n    this.resetControlState();\r\n  }\r\n\r\n  private resetControlState(): void {\r\n    this.isDisabled = false;\r\n    this.prependText = undefined;\r\n    this.appendText = undefined;\r\n    this.__cellValueEditingEvent = undefined;\r\n  }\r\n\r\n  private async resolvePropertyValueAsync<T>(targetObject: any, propertyName: string): Promise<T> {\r\n    const result = resolvePropertyValue(targetObject, propertyName, [this.row, this.index, this.column]);\r\n    if (isCommandString(result)) {\r\n      const parsed = parseCommandString(result);\r\n      if (parsed.command === 'Invoke:DotNet') {\r\n        const rowId = getFieldValue(this.row, this.table?.fieldId) as string;\r\n        try {\r\n          return await invokeDotNetMethodAsync(parsed.value, [rowId, this.index, this.column.field], { cache: true });\r\n        } catch (error) {\r\n          console.error('InvokeDotNetMethod 執行失敗', error);\r\n          throw error;\r\n        }\r\n      }\r\n      if (parsed.command === 'Get:Field') {\r\n        return getFieldValue(this.row, parsed.value) as T;\r\n      }\r\n    }\r\n\r\n    if (isConditions(result)) {\r\n      return evaluateConditions(result, this.row) as T;\r\n    }\r\n\r\n    if (isConditionGroups(result)) {\r\n      for (const conditionGroup of result) {\r\n        if (isConditions(conditionGroup.conditions) && evaluateConditions(conditionGroup.conditions, this.row)) {\r\n          return conditionGroup.value as T;\r\n        }\r\n      }\r\n      return undefined;\r\n    }\r\n\r\n    if (result instanceof Promise) {\r\n      try {\r\n        const resolved = await result;\r\n        return resolved;\r\n      } catch (error) {\r\n        console.error('屬性 Promise 解析失敗', error);\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private readonly __emitCellValueChangedOnBlur = debounce(() => {\r\n    if (this.__cellValueEditingEvent !== undefined) {\r\n      this.cellValueChangedOnBlur.emit(this.__cellValueEditingEvent);\r\n      this.__cellValueEditingEvent = undefined;\r\n    }\r\n  }, 250);\r\n\r\n  render() {\r\n    return (\r\n      <Host\r\n        onClick={ev => {\r\n          if (this.cellType === 'checkbox' || this.cellType === 'radio') {\r\n            const option = this.cellData as CheckControlOptionInterface;\r\n            if (option && option.disabled) {\r\n              ev.stopPropagation();\r\n              ev.preventDefault();\r\n              return;\r\n            }\r\n          }\r\n          this.clickCell.emit({ id: getFieldValue(this.row, this.table.fieldId) as string, field: this.column.field });\r\n        }}\r\n      >\r\n        {this.renderCell()}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}