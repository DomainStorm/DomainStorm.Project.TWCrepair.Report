import{r as t,c as e,a as s,h as l,H as a,f as o}from"./p-CSg1USUf.js";import{F as i,b as n}from"./p-DpqGDzhD.js";import{S as r}from"./p-CZZ7aWyk.js";import{b as h,m as d,p as b,s as c,h as m,j as x,k as u,l as p,f,n as g,r as y}from"./p-C51KEHDy.js";import{C as k}from"./p-D3y8oYAV.js";const C=":host{display:block}:host dl,:host ol,:host ul{margin-bottom:0}";const w=class{constructor(s){t(this,s);this.pageChange=e(this,"pageChange")}get host(){return s(this)}pageNumber=1;totalPages;paginationSuccessivelySize=5;paginationPagesBySide=1;pageChange;pageFrom=-1;pageTo=-1;setPage(t){this.pageNumber=t;this.pageChange.emit(this.pageNumber)}componentWillLoad(){r.applyShadowRootStyles(this.host)}componentWillRender(){if(this.pageNumber>this.totalPages){this.setPage(this.totalPages)}if(this.pageNumber<1){this.setPage(1)}if(this.totalPages<this.paginationSuccessivelySize){this.pageFrom=1;this.pageTo=this.totalPages}else{this.pageFrom=this.pageNumber-this.paginationPagesBySide;this.pageTo=this.pageFrom+this.paginationPagesBySide*2}if(this.pageNumber<this.paginationSuccessivelySize-1){this.pageTo=this.paginationSuccessivelySize}if(this.paginationSuccessivelySize>this.totalPages-this.pageFrom){this.pageFrom=this.pageFrom-(this.paginationSuccessivelySize-(this.totalPages-this.pageFrom))+1}if(this.pageFrom<1){this.pageFrom=1}if(this.pageTo>this.totalPages){this.pageTo=this.totalPages}}render(){let t=new Array;if(this.pageFrom>1){let e=this.paginationPagesBySide;if(e>=this.pageFrom)e=this.pageFrom-1;for(let s=1;s<=e;s++){t.push({page:s})}if(this.pageFrom-1===e+1){t.push({page:this.pageFrom-1})}else{if(this.pageFrom-1>e){t.push({title:"..."})}}}for(let e=this.pageFrom;e<=this.pageTo;e++){t.push({page:e})}if(this.totalPages>this.pageTo){let e=this.totalPages-(this.paginationPagesBySide-1);if(this.pageTo>=e)e=this.pageTo+1;if(this.pageTo+1===e-1){t.push({page:this.pageTo+1})}else{t.push({title:"..."})}for(let s=e;s<=this.totalPages;s++){t.push({page:s})}}return l(a,{key:"a133ee720bcc13f1f2c01e79890cc041493cf9ec"},l("ul",{key:"5d1b04267933cddb5d7021f42a57dac56258831e",class:"pagination pagination-primary"},l("li",{key:"5de5198d530cbd5355286635438d88a6f46ebdaf",class:"page-item"},l("a",{key:"ec7151b0274b2f666ad572755a84c2c52fb76bdd",class:"page-link",href:"javascript:;","aria-label":"Previous",onClick:()=>this.setPage(this.pageNumber==1?this.pageNumber=this.totalPages:this.pageNumber=this.pageNumber-1)},l("span",{key:"b00da02b4827572874946d3e567e4d655426cfee","aria-hidden":"true"},l(i,{key:"5ca9bcecd46c442052c3baf8df099c4a12163a18"},"keyboard_arrow_left")))),t.map((t=>l("li",{class:{"page-item":true,active:t.page===this.pageNumber,disabled:t.page==null},onClick:()=>{if(t.page)this.setPage(this.pageNumber=t.page)}},l("a",{class:"page-link",href:"javascript:;"},t.title?t.title:t.page.toString())))),l("li",{key:"d38e6394a2d3695694ac15d9ba2ab7877b4d2f5c",class:"page-item"},l("a",{key:"cb6ae7e20cee80f0937155fe35b98a4f1bc29e04",class:"page-link",href:"javascript:;","aria-label":"Next",onClick:()=>this.setPage(this.pageNumber==this.totalPages?this.pageNumber=1:this.pageNumber=this.pageNumber+1)},l("span",{key:"c08152c8052942e76aba282b41488c0501ea8c25","aria-hidden":"true"},l(i,{key:"355499d33f79c9121df9a7491b418e228cfdec0f"},"keyboard_arrow_right"))))))}};w.style=C;const v=":host{display:block}:host .group-item>th{cursor:auto}:host .group-item>th>div{line-height:1;margin:0.25rem}:host span.detail-title{display:inline-block;min-width:75px;font-weight:bold}:host .d-table-none{display:none !important}:host .d-table-cell{display:table-cell !important}:host .storm-table-4xs .d-table-4xs-none,:host .storm-table-3xs .d-table-4xs-none,:host .storm-table-xxs .d-table-4xs-none,:host .storm-table-xs .d-table-4xs-none,:host .storm-table-sm .d-table-4xs-none,:host .storm-table-md .d-table-4xs-none,:host .storm-table-lg .d-table-4xs-none,:host .storm-table-xl .d-table-4xs-none,:host .storm-table-xxl .d-table-4xs-none,:host .storm-table-3xl .d-table-4xs-none,:host .storm-table-4xl .d-table-4xs-none{display:none !important}:host .storm-table-4xs .d-table-4xs-cell,:host .storm-table-3xs .d-table-4xs-cell,:host .storm-table-xxs .d-table-4xs-cell,:host .storm-table-xs .d-table-4xs-cell,:host .storm-table-sm .d-table-4xs-cell,:host .storm-table-md .d-table-4xs-cell,:host .storm-table-lg .d-table-4xs-cell,:host .storm-table-xl .d-table-4xs-cell,:host .storm-table-xxl .d-table-4xs-cell,:host .storm-table-3xl .d-table-4xs-cell,:host .storm-table-4xl .d-table-4xs-cell{display:table-cell !important}:host .storm-table-3xs .d-table-3xs-none,:host .storm-table-xxs .d-table-3xs-none,:host .storm-table-xs .d-table-3xs-none,:host .storm-table-sm .d-table-3xs-none,:host .storm-table-md .d-table-3xs-none,:host .storm-table-lg .d-table-3xs-none,:host .storm-table-xl .d-table-3xs-none,:host .storm-table-xxl .d-table-3xs-none,:host .storm-table-3xl .d-table-3xs-none,:host .storm-table-4xl .d-table-3xs-none{display:none !important}:host .storm-table-3xs .d-table-3xs-cell,:host .storm-table-xxs .d-table-3xs-cell,:host .storm-table-xs .d-table-3xs-cell,:host .storm-table-sm .d-table-3xs-cell,:host .storm-table-md .d-table-3xs-cell,:host .storm-table-lg .d-table-3xs-cell,:host .storm-table-xl .d-table-3xs-cell,:host .storm-table-xxl .d-table-3xs-cell,:host .storm-table-3xl .d-table-3xs-cell,:host .storm-table-4xl .d-table-3xs-cell{display:table-cell !important}:host .storm-table-xxs .d-table-xxs-none,:host .storm-table-xs .d-table-xxs-none,:host .storm-table-sm .d-table-xxs-none,:host .storm-table-md .d-table-xxs-none,:host .storm-table-lg .d-table-xxs-none,:host .storm-table-xl .d-table-xxs-none,:host .storm-table-xxl .d-table-xxs-none,:host .storm-table-3xl .d-table-xxs-none,:host .storm-table-4xl .d-table-xxs-none{display:none !important}:host .storm-table-xxs .d-table-xxs-cell,:host .storm-table-xs .d-table-xxs-cell,:host .storm-table-sm .d-table-xxs-cell,:host .storm-table-md .d-table-xxs-cell,:host .storm-table-lg .d-table-xxs-cell,:host .storm-table-xl .d-table-xxs-cell,:host .storm-table-xxl .d-table-xxs-cell,:host .storm-table-3xl .d-table-xxs-cell,:host .storm-table-4xl .d-table-xxs-cell{display:table-cell !important}:host .storm-table-xs .d-table-xs-none,:host .storm-table-sm .d-table-xs-none,:host .storm-table-md .d-table-xs-none,:host .storm-table-lg .d-table-xs-none,:host .storm-table-xl .d-table-xs-none,:host .storm-table-xxl .d-table-xs-none,:host .storm-table-3xl .d-table-xs-none,:host .storm-table-4xl .d-table-xs-none{display:none !important}:host .storm-table-xs .d-table-xs-cell,:host .storm-table-sm .d-table-xs-cell,:host .storm-table-md .d-table-xs-cell,:host .storm-table-lg .d-table-xs-cell,:host .storm-table-xl .d-table-xs-cell,:host .storm-table-xxl .d-table-xs-cell,:host .storm-table-3xl .d-table-xs-cell,:host .storm-table-4xl .d-table-xs-cell{display:table-cell !important}:host .storm-table-sm .d-table-sm-none,:host .storm-table-md .d-table-sm-none,:host .storm-table-lg .d-table-sm-none,:host .storm-table-xl .d-table-sm-none,:host .storm-table-xxl .d-table-sm-none,:host .storm-table-3xl .d-table-sm-none,:host .storm-table-4xl .d-table-sm-none{display:none !important}:host .storm-table-sm .d-table-sm-cell,:host .storm-table-md .d-table-sm-cell,:host .storm-table-lg .d-table-sm-cell,:host .storm-table-xl .d-table-sm-cell,:host .storm-table-xxl .d-table-sm-cell,:host .storm-table-3xl .d-table-sm-cell,:host .storm-table-4xl .d-table-sm-cell{display:table-cell !important}:host .storm-table-md .d-table-md-none,:host .storm-table-lg .d-table-md-none,:host .storm-table-xl .d-table-md-none,:host .storm-table-xxl .d-table-md-none,:host .storm-table-3xl .d-table-md-none,:host .storm-table-4xl .d-table-md-none{display:none !important}:host .storm-table-md .d-table-md-cell,:host .storm-table-lg .d-table-md-cell,:host .storm-table-xl .d-table-md-cell,:host .storm-table-xxl .d-table-md-cell,:host .storm-table-3xl .d-table-md-cell,:host .storm-table-4xl .d-table-md-cell{display:table-cell !important}:host .storm-table-lg .d-table-lg-none,:host .storm-table-xl .d-table-lg-none,:host .storm-table-xxl .d-table-lg-none,:host .storm-table-3xl .d-table-lg-none,:host .storm-table-4xl .d-table-lg-none{display:none !important}:host .storm-table-lg .d-table-lg-cell,:host .storm-table-xl .d-table-lg-cell,:host .storm-table-xxl .d-table-lg-cell,:host .storm-table-3xl .d-table-lg-cell,:host .storm-table-4xl .d-table-lg-cell{display:table-cell !important}:host .storm-table-xl .d-table-xl-none,:host .storm-table-xxl .d-table-xl-none,:host .storm-table-3xl .d-table-xl-none,:host .storm-table-4xl .d-table-xl-none{display:none !important}:host .storm-table-xl .d-table-xl-cell,:host .storm-table-xxl .d-table-xl-cell,:host .storm-table-3xl .d-table-xl-cell,:host .storm-table-4xl .d-table-xl-cell{display:table-cell !important}:host .storm-table-xxl .d-table-xxl-none,:host .storm-table-3xl .d-table-xxl-none,:host .storm-table-4xl .d-table-xxl-none{display:none !important}:host .storm-table-xxl .d-table-xxl-cell,:host .storm-table-3xl .d-table-xxl-cell,:host .storm-table-4xl .d-table-xxl-cell{display:table-cell !important}:host .storm-table-3xl .d-table-3xl-none,:host .storm-table-4xl .d-table-3xl-none{display:none !important}:host .storm-table-3xl .d-table-3xl-cell,:host .storm-table-4xl .d-table-3xl-cell{display:table-cell !important}:host .storm-table-4xl .d-table-4xl-none{display:none !important}:host .storm-table-4xl .d-table-4xl-cell{display:table-cell !important}";const S=class{constructor(s){t(this,s);this.clickRow=e(this,"clickRow")}get host(){return s(this)}table;dataSet;timeStamp;clickRow;async updateColumnCheckbox(t){if(!this.dataSet||t.type!=="checkbox")return;const e=this.getTotalChecked(t.field);const s=this.host.querySelector('th[data-field="'+t.field+'"] storm-checkbox');s.checked=e===this.table.totalRows;s.indeterminate=e>0&&e<this.table.totalRows}async updateRowCheckbox(t,e){const s=this.host.querySelector('tr[data-id="'+h(t,this.table.fieldId)+'"] storm-table-cell[data-field="'+e.field+'"]');if(s){o(s)}if(e.field===this.table.fieldSelected){await this.updateRowSelection(t)}}async updateRowSelection(t){const e=this.host.querySelector('tr[data-id="'+h(t,this.table.fieldId)+'"]');if(e)e.classList.toggle("table-primary",h(t,this.table.fieldSelected))}computeColumnClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom","font-weight-bolder":true,"text-truncate":true,"table-sorter":t.sortable,asc:this.table.sortName===t.field&&this.table.sortOrder!=="desc",desc:this.table.sortName===t.field&&this.table.sortOrder==="desc",...e||{},...t.classes||{}}}renderThead(){if(!this.table.columns)return;return l("thead",null,l("tr",null,this.table.columns.filter((t=>t.visible!==false)).map((t=>this.renderColumn(t)))))}renderColumn(t){let e=t.title;const s={"thead-xxs":t.type==="detail"||t.type==="serialNumber"||t.type==="radio"||t.type==="checkbox","detail-toggle":t.type==="detail"};if(e==null&&t.type==="checkbox"){const s=this.getTotalChecked(t.field);e=l("storm-checkbox",{type:"checkbox",indeterminate:s>0&&s<this.table.totalRows,checked:s===this.table.totalRows,onValueChanged:e=>this.handleColumnCheckChange(e,t)})}return this.renderHeaderCell(e,t,s)}renderHeaderCell(t,e,s={}){return l("th",{"data-field":e.field,scope:"col",class:this.computeColumnClasses(e,s),onClick:()=>this.handleColumnClick(e)},l("div",{class:"cell"},t),e.description&&l("div",{class:"table-description"},e.description))}handleColumnClick(t){if(!t.sortable)return;if(t.field==this.table.sortName){if(this.table.sortOrder=="desc")this.table.sortChange.emit({sortName:undefined,sortOrder:undefined});else this.table.sortChange.emit({sortName:this.table.sortName,sortOrder:"desc"})}else this.table.sortChange.emit({sortName:t.field,sortOrder:"asc"})}async handleColumnCheckChange(t,e){const s=t.detail;if(s)await this.table.checkAll(e.field);else await this.table.uncheckAll(e.field)}initSelect(){if(!this.dataSet||!this.table.columns)return;this.dataSet.forEach((async t=>{await this.updateRowSelection(t)}))}getTotalChecked(t){if(!this.table.totalChecked)return 0;return this.table.totalChecked[t]}computeCellClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom",...e||{},...t.classes||{}}}renderCell(t,e,s){const a=this.computeCellClasses(s,{"text-truncate":true,"text-xs":s.type==="serialNumber","detail-toggle":s.type==="detail"});return l("td",{"data-field":s.field,class:a},this.renderCellContent(t,e,s))}renderCellContent(t,e,s){return l("storm-table-cell",{table:this.table,row:t,index:e,column:s,"time-stamp":this.timeStamp,"data-field":s.field})}renderRow(t,e){const s=h(t,this.table.fieldId);const a=h(t,this.table.fieldSelected);const o=this.table.columns.filter((t=>t.visible!==false));const i=l("tr",{"data-id":s,class:{"table-primary":a},onClick:()=>this.clickRow.emit(s)},o.map((s=>this.renderCell(t,e,s))));if(this.table.isColumnResponsive){const s=this.table.columns.find((t=>t.type==="detail"));return[i,l("tr",{class:{...s.classes,...{"row-detail":true,"d-none":true}},"data-index":e},l("td",{class:"full-cell",colSpan:this.table.expand.visibleColumnCount},l("ul",{class:{"list-group":true,"list-group-flush":true}},this.renderDetail(t,e))))]}return i}renderDetail(t,e){return this.table.columns.filter((t=>t.responsive===true&&t.visible!==false)).map((s=>l("li",{class:d({"list-group-item":true},s.rwdClassReversal)},l("span",{class:"detail-title"},s.title),l("span",null,this.renderCellContent(t,e,s)))))}renderRows(){if(this.table.groupBy){let t="";return this.dataSet.map(((e,s)=>{const a=h(e,this.table.groupBy);if(a!==t){t=a;return[l("tr",{class:"group-item table-info"},l("th",{class:{"align-middle":true,"full-cell":true},colSpan:this.table.expand.visibleColumnCount},a)),this.renderRow(e,s)]}return this.renderRow(e,s)}))}return this.dataSet.map(((t,e)=>this.renderRow(t,e)))}renderBody(){if(!this.dataSet||this.dataSet.length===0){return l("tbody",null,l("tr",null,l("td",{class:{"align-middle":true,"height-300":!this.table.classes["table-sm"],"height-100":this.table.classes["table-sm"],"text-center":true,"full-cell":true},colSpan:this.table.expand.visibleColumnCount},l("p",{class:"p-4 h6"},"沒有找到符合的結果"))))}return l("tbody",null,this.renderRows())}render(){return l(a,{key:"c002585bcdd4ed73cc90817598d0406c12d4a8d2"},l("table",{key:"3092bc11c2199ba89c0a4399992886e5a664a290",class:{...{table:true,"mb-0":true,"table-hover":!!this.table.clickRowTo},...b(this.table.classes)}},this.renderThead(),this.renderBody()))}componentDidRender(){this.initSelect()}};S.style=v;function D(t){if(typeof t!=="string")return false;return typeof t==="string"&&/^@[a-zA-Z0-9:-]+\('.*'\)$/.test(t.trim())}function N(t){const e=t.trim();const s=/^@([a-zA-Z0-9:-]+)\('([^']*)'\)$/;const l=s.exec(e);if(!l)return null;return{command:l[1],value:l[2]}}class T{store=new Map;async get(t){const e=this.store.get(t)??null;if(!e)return null;const s=Date.now();if(s-e.timestamp>=e.expiredMillis){this.store.delete(t);return null}return e}async set(t,e){this.store.set(t,e)}async delete(t){this.store.delete(t)}async clear(){this.store.clear()}async deleteByPrefix(t){for(const e of this.store.keys()){if(e.startsWith(t)){this.store.delete(e)}}}}const A=new k(new T);async function j(t,e=[],s={}){if(typeof t!=="string"){throw new TypeError("methodName 必須是字串")}s={cache:true,regionName:"dotnetInterop",...s};const l=`${t}:${JSON.stringify(e)}`;const a=s.cache??true;if(a){const t=await A.get(l,s.regionName);if(t!==null){return t}}try{const o=await(window.counterInterop?.invokeMethodAsync(t,...e));if(a){await A.set(l,o,s.regionName)}return o}catch(e){console.error(`[Interop] 無法呼叫 '${t}'：`,e);return"unknown"}}const R=":host{display:block}.input-group.input-group-static .form-control{background-color:white;line-height:1.25rem;padding:.25rem}.detail-button{cursor:pointer}";const P=class{constructor(s){t(this,s);this.clickCell=e(this,"clickCell");this.clickAction=e(this,"clickAction");this.valueChanged=e(this,"valueChanged");this.cellValueChanged=e(this,"cellValueChanged")}cellData;cellType="text";isDisabled=false;prependText;appendText;get host(){return s(this)}table;row;index;column;timeStamp;clickCell;clickAction;valueChanged;cellValueChanged;valueChangedHandler(t){if(this.column.field){c(this.row,this.column.field,t.detail);this.cellValueChanged.emit({id:h(this.row,this.table.fieldId),field:this.column.field,value:t.detail})}}renderSerialNumber(){return(this.table.pageNumber-1)*this.table.pageSize+this.index+1}renderDetail(){return l(n,{onToggle:t=>{const e=this.table.host.shadowRoot.querySelector('.row-detail[data-index="'+this.index+'"]');if(e){e.classList.toggle("d-none",!t)}}})}renderActionControl(){return l("storm-table-toolbar",{table:this.table,column:this.column,row:this.row,timeStamp:this.timeStamp,onClickAction:t=>{t.stopPropagation();this.clickAction.emit(t.detail)}})}renderInputControl(){return l("div",{class:"input-group input-group-static"},l("input",{class:"form-control",type:"text","aria-label":this.column.title,disabled:this.isDisabled,value:h(this.row,this.column.field),onClick:t=>t.stopPropagation(),onChange:t=>{t.stopPropagation();this.valueChanged.emit(t.target.value)}}))}renderTextareaControl(){const t=this.cellData;return l("div",{class:"input-group input-group-static"},l("textarea",{class:"form-control",disabled:this.isDisabled,cols:t.cols,rows:t.rows,title:this.column.title,value:h(this.row,this.column.field),onClick:t=>t.stopPropagation(),onChange:t=>{t.stopPropagation();this.valueChanged.emit(t.target.value)}}))}renderDropdownControl(){const t=this.cellData;const e=t.dataSet.map((t=>({...t})));return l("storm-dropdown",{disabled:this.isDisabled,label:t.label,value:h(this.row,this.column.field),dataSet:e,nullable:t.nullable??false,searchable:t.searchable??true,selection:"single",timeStamp:this.timeStamp,type:"select",onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)}})}renderDropdownTreeControl(){const t=this.cellData;let e=t.dataSet;if(t.dataSets!=null&&m(t.dataSets)){for(const s of t.dataSets){if(x(s.conditions)&&u(s.conditions,this.row)){e=s.value;break}}}return l("storm-dropdown-tree",{disabled:this.isDisabled,loading:t.loading,partialLoad:t.partialLoad,label:t.label,value:h(this.row,this.column.field),text:t.fieldText?h(this.row,t.fieldText):null,dataSet:e,dataSource:t.dataSource,fieldId:t.fieldId??"id",fieldLabel:t.fieldLabel??"label",fieldChildren:t.fieldChildren??"children",expandLevel:t.expandLevel??2,nodeSelectableRule:t.nodeSelectableRule,nullable:t.nullable??false,searchable:t.searchable??true,selection:"single",timeStamp:this.timeStamp,onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)},onTextChanged:e=>{e.stopPropagation();if(t.fieldText)c(this.row,t.fieldText,e.detail)},onSearchChanged:t=>{t.stopPropagation()}})}renderCheckControl(){return l("storm-checkbox",{type:this.cellType==="checkbox"?"checkbox":"radio",disabled:this.isDisabled,checked:h(this.row,this.column.field)})}renderCheckboxGroupControl(){const t=this.cellData;const e=h(this.row,this.column.field);const s=t.dataSet.filter((t=>t.visible===undefined||typeof t.visible==="function"&&t.visible(this.row)||typeof t.visible==="boolean"&&t.visible)).map((t=>({id:t.id,label:t.label,labelClasses:t.labelClasses,checked:t.checked,disabled:t.disabled})));return l("div",{class:"input-group input-group-static"},l("storm-checkbox-group",{disabled:this.isDisabled,type:t.groupType,value:e,dataSet:s,isSwitch:t.isSwitch??false,isInline:t.isInline??true,onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)}}))}renderCellContent(){switch(this.cellType){case"action":return this.renderActionControl();case"input":return this.renderInputControl();case"checkbox":case"radio":return this.renderCheckControl();case"textarea":return this.renderTextareaControl();case"dropdown":return this.renderDropdownControl();case"dropdownTree":return this.renderDropdownTreeControl();case"checkboxGroup":return this.renderCheckboxGroupControl();case"serialNumber":return this.renderSerialNumber();case"detail":return this.renderDetail();case"text":return this.renderCellValue();default:return null}}renderCell(){if(!this.prependText&&!this.appendText){return this.renderCellContent()}else{return l("div",{class:"d-flex flex-row gap-1 align-items-center"},this.prependText&&l("span",null,this.prependText),this.renderCellContent(),this.appendText&&l("span",null,this.appendText))}}renderCellValue(){let t=h(this.row,this.column.field);if(typeof this.column.render==="function"){t=this.column.render(t,this.row,this.index)}else{if(Array.isArray(t)){t=t.filter((t=>t!=null&&t!=="")).join("、")}if(this.table.escape&&typeof t!=="boolean"&&t!=null){t=p(t)}if(t!=null&&this.column.transform&&this.column.transform[t.toString()]){t=this.column.transform[t]}else if(t&&this.table.searchable&&this.table.searchText){t=f(t,this.table.searchText)}}const e=this.column.cellTemplate||this.table.cellTemplate;const s=t!=null&&t.toString().trim().length>0?t:"-";return l("span",{innerHTML:g(e,{value:s,row:this.row,index:this.index})})}async componentWillRender(){if(!this.column){this.cellType="text";this.cellData=undefined;this.isDisabled=false;return}const[t,e]=await Promise.all([this.resolvePropertyValueAsync(this.column,"type"),this.resolvePropertyValueAsync(this.column,"data")]);this.cellType=t;this.cellData=e;if(e&&typeof e==="object"&&!Array.isArray(e)){this.isDisabled=await this.resolvePropertyValueAsync(e,"disabled")??false;this.prependText=await this.resolvePropertyValueAsync(e,"prependText");this.appendText=await this.resolvePropertyValueAsync(e,"appendText");if(this.isDisabled&&(t==="input"||t==="textarea")){this.cellType="text"}}else{this.isDisabled=false}}async resolvePropertyValueAsync(t,e){const s=y(t,e,[this.row,this.index,this.column]);if(D(s)){const t=N(s);if(t.command==="Invoke:DotNet"){const e=h(this.row,this.table?.fieldId);try{return await j(t.value,[e,this.index,this.column.field],{cache:true,regionName:this.table.uid})}catch(t){console.error("InvokeDotNetMethod 執行失敗",t);throw t}}if(t.command==="Get:Field"){return h(this.row,t.value)}}if(x(s)){return u(s,this.row)}if(m(s)){for(const t of s){if(x(t.conditions)&&u(t.conditions,this.row)){return t.value}}return undefined}if(s instanceof Promise){try{const t=await s;return t}catch(t){console.error("屬性 Promise 解析失敗",t);throw t}}return s}render(){return l(a,{key:"db0eb30b3c0b9825861b4b6a3ee1a4f1abe7509f",onClick:t=>{if(this.cellType==="checkbox"||this.cellType==="radio"){const e=this.cellData;if(e&&e.disabled){t.stopPropagation();t.preventDefault();return}}this.clickCell.emit({id:h(this.row,this.table.fieldId),field:this.column.field})}},this.renderCell())}};P.style=R;export{w as storm_pagination,S as storm_table_body,P as storm_table_cell};
//# sourceMappingURL=p-77567167.entry.js.map