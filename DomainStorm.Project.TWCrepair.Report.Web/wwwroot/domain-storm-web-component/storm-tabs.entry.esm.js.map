{"version":3,"file":"storm-tabs.entry.esm.js","sources":["src/components/storm-tabs/storm-tabs.css?tag=storm-tabs","src/components/storm-tabs/storm-tabs.tsx"],"sourcesContent":[":host {\r\n    display: block;\r\n}\r\n\r\n.tab-content {\r\n    padding: .25rem .5rem .5rem .5rem;\r\n}","import { Component, Element, Event, EventEmitter, h, Host, Method, Prop, Watch } from '@stencil/core';\r\nimport { generateUid } from '@utils/utils';\r\nimport type { StormNavInterface } from '../storm-navs/interface';\r\n\r\n@Component({\r\n  tag: 'storm-tabs',\r\n  styleUrl: 'storm-tabs.css',\r\n})\r\nexport class StormTabs {\r\n  private _tabRefs: Record<string, Element> = {};\r\n\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop({ mutable: true }) value?: string;\r\n  @Prop() dataSet: StormNavInterface[];\r\n\r\n  @Event({ bubbles: true }) activeChanged: EventEmitter<string>;\r\n\r\n  @Watch('dataSet')\r\n  async watchDataSetHandler() {\r\n    this.initDataSet();\r\n  }\r\n\r\n  @Watch('value')\r\n  async valueHandler() {\r\n    this.updateActiveTab();\r\n  }\r\n\r\n  @Method()\r\n  async getTabPane(id: string) {\r\n    return this._tabRefs[id];\r\n  }\r\n\r\n  initDataSet() {\r\n    if (!this.dataSet || this.dataSet.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.dataSet.forEach(x => {\r\n      if (!x.id) {\r\n        x.id = generateUid('storm-nav');\r\n      }\r\n    });\r\n\r\n    if (this.value) {\r\n      this.dataSet.forEach(x => {\r\n        x.active = x.id === this.value;\r\n      });\r\n    } else if (!this.dataSet.some(x => x.active)) {\r\n      this.dataSet[0].active = true;\r\n      this.value = this.dataSet[0].id;\r\n    }\r\n  }\r\n\r\n  renderTabPane(item: StormNavInterface) {\r\n    if (this.host.querySelector(`:scope>[slot=\"${item.id}\"]`)) {\r\n      const tabPane = this.host.querySelector(`:scope>[slot=\"${item.id}\"]`);\r\n      this._tabRefs[item.id] = tabPane;\r\n      tabPane.classList.add('tab-pane', 'fade');\r\n      if (item.active) {\r\n        tabPane.classList.add('show', 'active');\r\n      } else {\r\n        tabPane.classList.remove('show', 'active');\r\n      }\r\n      return <slot name={item.id} />;\r\n    }\r\n    return <div ref={elm => (this._tabRefs[item.id] = elm)} class={{ 'tab-pane': true, fade: true, show: item.active, active: item.active }}></div>;\r\n  }\r\n\r\n  updateActiveTab() {\r\n    if (!this.value) return;\r\n    this.dataSet.forEach(x => {\r\n      x.active = x.id === this.value;\r\n      const tabPane = this._tabRefs[x.id];\r\n      if (tabPane) {\r\n        tabPane.classList.toggle('show', x.active);\r\n        tabPane.classList.toggle('active', x.active);\r\n      }\r\n    });\r\n\r\n    this.activeChanged.emit(this.value);\r\n  }\r\n\r\n  componentWillRender() {\r\n    this._tabRefs = {};\r\n    this.initDataSet();\r\n  }\r\n\r\n  render() {\r\n    if (!this.dataSet) return;\r\n    return (\r\n      <Host>\r\n        <storm-navs\r\n          value={this.value}\r\n          dataSet={this.dataSet}\r\n          onActiveChanged={async ev => {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            this.value = ev.detail;\r\n          }}\r\n        ></storm-navs>\r\n        <div class=\"tab-content\">\r\n          {this.dataSet.map(item => {\r\n            return this.renderTabPane(item);\r\n          })}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.updateActiveTab();\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}