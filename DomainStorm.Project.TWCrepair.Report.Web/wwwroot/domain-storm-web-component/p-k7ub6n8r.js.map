{"version":3,"file":"p-k7ub6n8r.js","sources":["src/utils/utils.ts"],"sourcesContent":["import 'ses';\r\nimport type { ConditionGroupInterface, ConditionInterface, ListItemInterface } from './interface';\r\n\r\n/**\r\n * 格式化名稱，將名稱的不同部分組合成一個完整名稱字串。\r\n * 自動過濾空值，並以空格分隔各部分。\r\n *\r\n * @param first 名稱的第一部分（如果為空值，將會回傳空字串）\r\n * @param middle 名稱的中間部分（可選）\r\n * @param last 名稱的最後部分（可選）\r\n * @returns 組合後的名稱字串\r\n * @example\r\n * // 回傳 'John Doe'\r\n * formatName('John', undefined, 'Doe');\r\n *\r\n * // 回傳 'John Smith Doe'\r\n * formatName('John', 'Smith', 'Doe');\r\n */\r\nexport function format(first: string | null | undefined, middle?: string | null, last?: string | null): string {\r\n  const safeFirst = first || '';\r\n\r\n  if (!middle && !last) return safeFirst;\r\n\r\n  return [safeFirst, middle, last]\r\n    .filter(Boolean)\r\n    .join(' ');\r\n}\r\n\r\n/**\r\n * 產生唯一標識符（UID）\r\n *\r\n * 使用 crypto.randomUUID() 生成 UUID，並可選擇添加前綴和/或後綴。\r\n * 若前綴或後綴非空，則使用底線「_」連接。\r\n *\r\n * @param prefix 產生的 UID 前綴字串，預設為空字串\r\n * @param suffix 產生的 UID 後綴字串，預設為空字串\r\n * @returns 組合後的唯一標識符\r\n * @throws 若環境不支援 crypto.randomUUID() 時拋出錯誤\r\n *\r\n * @example\r\n * // 回傳: 'user_550e8400-e29b-41d4-a716-446655440000'\r\n * generateUid('user');\r\n *\r\n * @example\r\n * // 回傳: '550e8400-e29b-41d4-a716-446655440000_temp'\r\n * generateUid('', 'temp');\r\n */\r\nexport function generateUid(prefix = '', suffix = ''): string {\r\n  const uuid = crypto.randomUUID();\r\n\r\n  const parts: string[] = [];\r\n  if (prefix) parts.push(prefix);\r\n  parts.push(uuid);\r\n  if (suffix) parts.push(suffix);\r\n\r\n  return parts.join('_');\r\n}\r\n\r\n/**\r\n * HTML 特殊字符轉義映射表\r\n * 包含常見需要轉義的 HTML 特殊字符及其對應的 HTML 實體\r\n */\r\nconst HTML_ESCAPE_MAP: Readonly<Record<string, string>> = {\r\n  '&': '&amp;',\r\n  '<': '&lt;',\r\n  '>': '&gt;',\r\n  '\"': '&quot;',\r\n  \"'\": '&#39;',\r\n  '/': '&#x2F;',\r\n  '`': '&#x60;',\r\n  '=': '&#x3D;'\r\n};\r\n\r\nconst HTML_ESCAPE_REGEX = /[&<>\"'`=/]/g;\r\n\r\n/**\r\n * 轉義 HTML 字串以防止 XSS 攻擊\r\n *\r\n * 將特殊字元（&, <, >, \", '）轉換為對應的 HTML 實體，\r\n * 以避免在 HTML 內容中可能的 XSS 攻擊。\r\n *\r\n * @param unsafe 要轉義的字串，可以是字串、null 或 undefined\r\n * @returns 轉義後的字串，若輸入為空值則回傳空字串\r\n *\r\n * @example\r\n * // 回傳: '&lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;'\r\n * escapeHtml('<script>alert(\"XSS\");</script>');\r\n *\r\n * @example\r\n * // 回傳: \"\"\r\n * escapeHtml(null);\r\n */\r\nexport function escapeHtml(unsafe: string | null | undefined): string {\r\n  if (!unsafe) return '';\r\n\r\n  return String(unsafe).replace(HTML_ESCAPE_REGEX, match => HTML_ESCAPE_MAP[match]);\r\n}\r\n\r\n/**\r\n * 移動陣列中的元素從一個索引位置到另一個索引位置。\r\n *\r\n * @param array 要操作的陣列。\r\n * @param fromIndex 起始索引位置。\r\n * @param toIndex 目標索引位置。\r\n */\r\nexport function arrayMove<T>(array: T[], fromIndex: number, toIndex: number): void {\r\n  if (!Array.isArray(array) || array.length === 0) return;\r\n  if (fromIndex === toIndex) return;\r\n\r\n  const length = array.length;\r\n  const startIndex = ((fromIndex % length) + length) % length;\r\n  const endIndex = ((toIndex % length) + length) % length;\r\n\r\n  const [item] = array.splice(startIndex, 1);\r\n  array.splice(endIndex, 0, item);\r\n}\r\n\r\n/**\r\n * 比較兩個陣列是否相等。\r\n *\r\n * @param arr1 第一個陣列。\r\n * @param arr2 第二個陣列。\r\n * @returns 如果兩個陣列相等，則回傳 true；否則回傳 false。\r\n */\r\nexport function arrayEqual(arr1: unknown, arr2: unknown): boolean {\r\n  if (arr1 === arr2) return true;\r\n\r\n  if ((arr1 === null && arr2 === undefined) || (arr1 === undefined && arr2 === null)) {\r\n    return true;\r\n  }\r\n\r\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\r\n    return false;\r\n  }\r\n\r\n  if (arr1.length !== arr2.length) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < arr1.length; i++) {\r\n    if (arr1[i] !== arr2[i]) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n// 優化的欄位解析快取，限制大小以防止記憶體洩漏\r\nconst fieldParseCache = new Map<string, {\r\n  type: 'pipe' | 'ampersand' | 'dot' | 'simple';\r\n  parts?: string[];\r\n  firstField?: string;\r\n  subField?: string;\r\n}>();\r\n\r\nconst MAX_CACHE_SIZE = 500;\r\n\r\n/**\r\n * 從物件中取得指定欄位的值。\r\n *\r\n * @param obj 目標物件\r\n * @param field 欄位名稱或索引\r\n * @returns 欄位的值\r\n */\r\nexport function getFieldValue(obj: unknown, field: string | number): unknown {\r\n  if (obj == null) return obj;\r\n\r\n  if (typeof field === 'number') {\r\n    return Array.isArray(obj) ? obj[field] : undefined;\r\n  }\r\n\r\n  if (typeof field !== 'string') {\r\n    throw new Error('Field must be a string or a number');\r\n  }\r\n\r\n  const trimmedField = field.trim();\r\n  if (trimmedField === '') return undefined;\r\n\r\n  // 檢查快取\r\n  let parseInfo = fieldParseCache.get(trimmedField);\r\n  if (!parseInfo) {\r\n    parseInfo = parseFieldPath(trimmedField);\r\n\r\n    // 限制快取大小\r\n    if (fieldParseCache.size >= MAX_CACHE_SIZE) {\r\n      const firstKey = fieldParseCache.keys().next().value;\r\n      fieldParseCache.delete(firstKey);\r\n    }\r\n\r\n    fieldParseCache.set(trimmedField, parseInfo);\r\n  }\r\n\r\n  switch (parseInfo.type) {\r\n    case 'pipe':\r\n      return findFieldValue(obj, parseInfo.parts!);\r\n    case 'ampersand':\r\n      return mergeFieldValue(obj, parseInfo.parts!);\r\n    case 'dot':\r\n      const firstValue = getFieldValue(obj, parseInfo.firstField!);\r\n      return getFieldValue(firstValue, parseInfo.subField!);\r\n    case 'simple':\r\n      if (Array.isArray(obj) && obj.length > 0 && typeof obj[0] === 'object') {\r\n        return obj.map(item => getFieldValue(item, trimmedField));\r\n      }\r\n      if (typeof obj === 'object' && obj !== null) {\r\n        return (obj as Record<string, unknown>)[trimmedField];\r\n      }\r\n      return undefined;\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * 解析欄位路徑，返回解析信息\r\n */\r\nfunction parseFieldPath(field: string): {\r\n  type: 'pipe' | 'ampersand' | 'dot' | 'simple';\r\n  parts?: string[];\r\n  firstField?: string;\r\n  subField?: string;\r\n} {\r\n  const pipeIndex = field.indexOf('|');\r\n  const ampersandIndex = field.indexOf('&');\r\n  const dotIndex = field.indexOf('.');\r\n\r\n  if (pipeIndex !== -1) {\r\n    return { type: 'pipe', parts: field.split('|') };\r\n  }\r\n\r\n  if (ampersandIndex !== -1) {\r\n    return { type: 'ampersand', parts: field.split('&') };\r\n  }\r\n\r\n  if (dotIndex !== -1) {\r\n    return {\r\n      type: 'dot',\r\n      firstField: field.substring(0, dotIndex),\r\n      subField: field.substring(dotIndex + 1)\r\n    };\r\n  }\r\n\r\n  return { type: 'simple' };\r\n}\r\n\r\n/**\r\n * 設定物件中指定欄位的值。\r\n *\r\n * @param obj 要設定值的物件\r\n * @param field 欄位名稱或索引\r\n * @param value 要設定的值\r\n */\r\nexport function setFieldValue(obj: unknown, field: string | number, value: unknown): void {\r\n  if (obj == null) {\r\n    return;\r\n  }\r\n\r\n  if (typeof field === 'number') {\r\n    if (Array.isArray(obj)) {\r\n      obj[field] = value;\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (typeof field !== 'string') {\r\n    throw new Error('Field must be a string or a number');\r\n  }\r\n\r\n  const trimmedField = field.trim();\r\n  if (trimmedField === '') return;\r\n\r\n  let parseInfo = fieldParseCache.get(trimmedField);\r\n  if (!parseInfo) {\r\n    parseInfo = parseFieldPath(trimmedField);\r\n\r\n    if (fieldParseCache.size >= MAX_CACHE_SIZE) {\r\n      const firstKey = fieldParseCache.keys().next().value;\r\n      fieldParseCache.delete(firstKey);\r\n    }\r\n\r\n    fieldParseCache.set(trimmedField, parseInfo);\r\n  }\r\n\r\n  if (parseInfo.type === 'pipe' || parseInfo.type === 'ampersand') {\r\n    const parts = parseInfo.parts!;\r\n    for (let i = 0; i < parts.length; i++) {\r\n      const trimmedPart = parts[i].trim();\r\n      if (trimmedPart && getFieldValue(obj, trimmedPart) !== undefined) {\r\n        setFieldValue(obj, trimmedPart, value);\r\n        return;\r\n      }\r\n    }\r\n    const firstPart = parts[0]?.trim();\r\n    if (firstPart) {\r\n      setFieldValue(obj, firstPart, value);\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (parseInfo.type === 'dot') {\r\n    if (typeof obj === 'object') {\r\n      const subObj = (obj as Record<string, unknown>)[parseInfo.firstField!];\r\n      if (subObj !== undefined) {\r\n        setFieldValue(subObj, parseInfo.subField!, value);\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (Array.isArray(obj) && obj.length > 0 && typeof obj[0] === 'object') {\r\n    for (let i = 0; i < obj.length; i++) {\r\n      const subObj = obj[i];\r\n      if (subObj && typeof subObj === 'object') {\r\n        (subObj as Record<string, unknown>)[trimmedField] = value;\r\n      }\r\n    }\r\n  } else if (typeof obj === 'object') {\r\n    (obj as Record<string, unknown>)[trimmedField] = value;\r\n  }\r\n}\r\n\r\n/**\r\n * 從給定的物件中尋找特定欄位的值。\r\n * 遍歷所有欄位路徑，回傳第一個非空值。\r\n *\r\n * @param obj 要搜尋的物件\r\n * @param parts 欄位的路徑，以字串陣列表示\r\n * @returns 找到的欄位值，如果找不到則回傳 null\r\n */\r\nfunction findFieldValue(obj: unknown, parts: readonly string[]): unknown {\r\n  for (const part of parts) {\r\n    const trimmedPart = part.trim();\r\n    if (trimmedPart) {\r\n      const value = getFieldValue(obj, trimmedPart);\r\n      if (value != null) return value;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * 合併物件中多個欄位的值。\r\n * 將所有欄位的值合併成一個陣列，支援巢狀陣列展開。\r\n *\r\n * @param obj 要合併值的物件\r\n * @param parts 欄位名稱的陣列\r\n * @returns 合併後的值的陣列\r\n */\r\nfunction mergeFieldValue(obj: unknown, parts: readonly string[]): unknown[] {\r\n  const result: unknown[] = [];\r\n\r\n  for (const part of parts) {\r\n    const trimmedPart = part.trim();\r\n    if (trimmedPart) {\r\n      const value = getFieldValue(obj, trimmedPart);\r\n      if (value != null) {\r\n        if (Array.isArray(value)) {\r\n          result.push(...value);\r\n        } else {\r\n          result.push(value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * 從物件中計算值，支援字串路徑、函式呼叫，以及提供預設值。\r\n *\r\n * @param obj 要查找的物件\r\n * @param value 要計算的值，可以是字串路徑、函式或直接的值\r\n * @param args 傳遞給函式的參數陣列\r\n * @returns 計算後的值\r\n */\r\nexport function calculateObjectValue(obj: unknown, value: unknown, ...args: unknown[]): unknown {\r\n  if (value == null) return value;\r\n\r\n  if (typeof value === 'string') {\r\n    if (isModuleFunctionString(value)) {\r\n      value = createFunctionFromString(value);\r\n    }\r\n    else {\r\n      const names = value.split('.');\r\n      let func: any = obj || (typeof window !== 'undefined' ? window : globalThis);\r\n\r\n      for (const name of names) {\r\n        func = func?.[name];\r\n        if (func === undefined) break;\r\n      }\r\n\r\n      if (typeof func === 'function') {\r\n        value = func;\r\n      }\r\n    }\r\n  }\r\n  if (typeof value === 'function') {\r\n    return executeFunction(obj, value, ...args);\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * 從字串中解析並取得預設導出的函數。\r\n *\r\n * @param code 包含函數定義的字串，格式必須為 `export default function([params]) { [body] }`\r\n * @returns 解析後的函數\r\n * @throws {Error} 當函數字串格式不正確或解析失敗時拋出錯誤\r\n *\r\n * // 解析簡單函數\r\n * const add = createFunctionFromString('export default function(a, b) { return a + b; }');\r\n * console.log(add(1, 2)); // 輸出 3\r\n */\r\nexport function createFunctionFromString(code: string): (...args: any[]) => any {\r\n  if (typeof code !== 'string' || code.trim() === '') {\r\n    throw new Error('Function string cannot be empty');\r\n  }\r\n\r\n  const regex = /^export default\\s+(async\\s+)?function\\s*\\(([^)]*)\\)\\s*{([\\s\\S]*)}$/;\r\n  const matches = regex.exec(code);\r\n\r\n  if (!matches) {\r\n    throw new Error('Invalid function string');\r\n  }\r\n\r\n  const isAsync = !!matches[1];\r\n  const parameters = matches[2].split(',').map(param => param.trim()).filter(Boolean);\r\n  const functionBody = matches[3].trim();\r\n\r\n  const compartment = new Compartment();\r\n\r\n  const FuncConstructor = isAsync\r\n    ? Object.getPrototypeOf(async function () { }).constructor\r\n    : Function;\r\n\r\n  const func = new compartment.globalThis[FuncConstructor.name](...parameters, functionBody);\r\n\r\n  return func as (...args: any[]) => any;\r\n}\r\n\r\n/**\r\n * 檢查字串是否符合預期的模組函式格式\r\n *\r\n * 有效的模組函式字串格式為：\r\n * `export default function [name]([params]) { [body] }`\r\n *\r\n * @param code 要檢查的程式碼字串\r\n * @returns {boolean} 是否符合模組函式格式\r\n *\r\n * @example\r\n * // 回傳 true\r\n * isModuleFunctionString('export default function() { return 42; }');\r\n *\r\n * @example\r\n * // 回傳 true\r\n * isModuleFunctionString('export default function getData(id, type) { return fetch(`/api/${id}`); }');\r\n *\r\n * @example\r\n * // 回傳 false\r\n * isModuleFunctionString('function test() {}');\r\n */\r\nexport function isModuleFunctionString(code: string): boolean {\r\n  if (typeof code !== 'string') {\r\n    return false;\r\n  }\r\n  const trimmedCode = code.trim();\r\n  const regex = /^export\\s+default\\s+function\\s*[a-zA-Z0-9_$]*\\s*\\([^)]*\\)\\s*{[\\s\\S]*}$/;\r\n  return regex.test(trimmedCode);\r\n}\r\n\r\n/**\r\n * 依據提供的條件計算其真假值。\r\n *\r\n * @param value 要計算的條件，可以是一個 bool 值、一個函式、或者一個條件陣列\r\n * @param data 提供的數據對象\r\n * @returns 如果條件成立則回傳 true，否則回傳 false\r\n */\r\nexport function evaluateConditions(value: ConditionInterface[], data: Record<string, any>): boolean {\r\n  const andConditions = value.filter(condition => condition.conjunction !== 'or');\r\n  const orConditions = value.filter(condition => condition.conjunction === 'or');\r\n\r\n  if (andConditions.some(condition => !checkCondition(condition, data))) {\r\n    return false;\r\n  }\r\n\r\n  if (orConditions.length > 0 && !orConditions.some(condition => checkCondition(condition, data))) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * 定義支援的條件比較運算符\r\n */\r\ntype ConditionOperator =\r\n  // 數值比較運算符\r\n  | '>' | '<' | '>=' | '<='\r\n  // 相等比較運算符\r\n  | '=' | '!='\r\n  // 字串操作運算符\r\n  | 'like'\r\n  // 陣列內容運算符\r\n  | 'include' | 'notinclude'\r\n  // 集合成員檢查運算符\r\n  | 'in' | 'notin'\r\n  // 型別檢查運算符\r\n  | 'typeof' | 'instanceof'\r\n  // 空值檢查運算符\r\n  | 'empty' | 'notempty'\r\n  | 'match';\r\n\r\n/**\r\n * 檢查條件是否符合資料物件\r\n *\r\n * 支援多種運算符比較資料屬性值與條件值:\r\n * - 數值比較: >, <, >=, <= (將兩側值轉換為數值進行比較)\r\n * - 相等比較: =, != (支援跨型別比較)\r\n * - 字串操作: like (不區分大小寫的子字串搜尋)\r\n * - 陣列操作: include, notinclude (檢查陣列中是否包含/不包含值)\r\n * - 集合檢查: in, notin (檢查值是否在/不在集合中)\r\n * - 型別檢查: typeof, instanceof (檢查值的型別或類別)\r\n * - 空值檢查: empty, notempty (檢查值是否為空/非空)\r\n * - 正則表達式: match (使用正則表達式匹配字串)\r\n *\r\n * @param condition 欲檢查的條件，包含欄位、運算符與要比較的值\r\n * @param data 要檢查的資料物件\r\n * @returns 若條件符合則回傳 true，否則回傳 false\r\n * @throws {Error} 當使用不支援的運算符時拋出錯誤\r\n */\r\nfunction checkCondition(condition: ConditionInterface, data: Record<string, any>): boolean {\r\n  try {\r\n    const field = calculateObjectValue(null, condition.field, data) as string;\r\n    const operator = calculateObjectValue(null, condition.operator, data) as ConditionOperator;\r\n    const value = calculateObjectValue(null, condition.value, data);\r\n    const fieldValue = resolvePropertyValue(data, field);\r\n\r\n    if (fieldValue === null || fieldValue === undefined) {\r\n      if (operator === '=') return value === null || value === undefined;\r\n      if (operator === '!=') return value !== null && value !== undefined;\r\n      if (operator === 'empty') return true;\r\n      if (operator === 'notempty') return false;\r\n      return false;\r\n    }\r\n\r\n    switch (operator) {\r\n      case '>': {\r\n        const numField = +fieldValue;\r\n        const numValue = +value;\r\n        return !isNaN(numField) && !isNaN(numValue) && numField > numValue;\r\n      }\r\n      case '<': {\r\n        const numField = +fieldValue;\r\n        const numValue = +value;\r\n        return !isNaN(numField) && !isNaN(numValue) && numField < numValue;\r\n      }\r\n      case '>=': {\r\n        const numField = +fieldValue;\r\n        const numValue = +value;\r\n        return !isNaN(numField) && !isNaN(numValue) && numField >= numValue;\r\n      }\r\n      case '<=': {\r\n        const numField = +fieldValue;\r\n        const numValue = +value;\r\n        return !isNaN(numField) && !isNaN(numValue) && numField <= numValue;\r\n      }\r\n      case '=':\r\n        return fieldValue === value ||\r\n          (typeof fieldValue === 'number' && typeof value === 'string' && fieldValue === +value && !isNaN(+value)) ||\r\n          (typeof fieldValue === 'string' && typeof value === 'number' && +fieldValue === value && !isNaN(+fieldValue));\r\n      case '!=':\r\n        return fieldValue !== value &&\r\n          !(typeof fieldValue === 'number' && typeof value === 'string' && fieldValue === +value && !isNaN(+value)) &&\r\n          !(typeof fieldValue === 'string' && typeof value === 'number' && +fieldValue === value && !isNaN(+fieldValue));\r\n      case 'like': {\r\n        const strField = String(fieldValue).toLowerCase();\r\n        const strValue = String(value).toLowerCase();\r\n        return strField.includes(strValue);\r\n      }\r\n      case 'include':\r\n        return Array.isArray(fieldValue) && fieldValue.includes(value);\r\n      case 'notinclude':\r\n        return Array.isArray(fieldValue) && !fieldValue.includes(value);\r\n      case 'in':\r\n        return Array.isArray(value) && value.includes(fieldValue);\r\n      case 'notin':\r\n        return Array.isArray(value) && !value.includes(fieldValue);\r\n      case 'typeof':\r\n        if (typeof value !== 'string') {\r\n          console.warn('typeof 運算符需要字串型別的比較值');\r\n          return false;\r\n        }\r\n        return typeof fieldValue === value;\r\n      case 'instanceof':\r\n        if (typeof value !== 'function') {\r\n          console.warn('instanceof 運算符需要函數型別的比較值');\r\n          return false;\r\n        }\r\n        return fieldValue instanceof value;\r\n      case 'empty':\r\n        return fieldValue === '' ||\r\n          (Array.isArray(fieldValue) && fieldValue.length === 0) ||\r\n          (typeof fieldValue === 'object' && fieldValue !== null &&\r\n            Object.keys(fieldValue).length === 0);\r\n      case 'notempty':\r\n        return fieldValue !== '' &&\r\n          !(Array.isArray(fieldValue) && fieldValue.length === 0) &&\r\n          !(typeof fieldValue === 'object' && fieldValue !== null &&\r\n            Object.keys(fieldValue).length === 0);\r\n      case 'match':\r\n        try {\r\n          const pattern = String(value);\r\n          return new RegExp(pattern).test(String(fieldValue));\r\n        } catch (error) {\r\n          console.error('無效的正則表達式:', value);\r\n          return false;\r\n        }\r\n      default:\r\n        throw new Error(`不支援的運算符: ${operator}`);\r\n    }\r\n  } catch (error) {\r\n    console.error('條件檢查失敗:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 替換字串中的佔位符為對應的值。\r\n *\r\n * @param str 要處理的字串\r\n * @param data 提供的資料\r\n * @returns 替換後的字串\r\n */\r\nexport function replacePlaceholders(str: string, data: Record<string, any>): string {\r\n  const placeholderRegex = /\\{([^}]+)\\}/g;\r\n\r\n  return str.replace(placeholderRegex, (_, field) => {\r\n    const value = getFieldValue(data, field);\r\n    return value !== undefined ? String(value) : '';\r\n  });\r\n}\r\n\r\n/**\r\n * 依據輸入值取得對應的類別物件。\r\n *\r\n * @param value 輸入值，可以是包含類別名稱的物件或者空格分隔的類別字串\r\n * @returns 對應的類別物件\r\n */\r\nexport function parseClassNames(value: string | Record<string, boolean> | null | undefined): Record<string, boolean> {\r\n  if (!value) return {};\r\n\r\n  if (typeof value === 'object') return value;\r\n\r\n  const trimmed = value.trim();\r\n  if (!trimmed) return {};\r\n\r\n  return trimmed.split(/\\s+/).reduce((result, className) => {\r\n    if (className) result[className] = true;\r\n    return result;\r\n  }, {} as Record<string, boolean>);\r\n}\r\n\r\n/**\r\n * 合併兩個類別物件或類別字串\r\n *\r\n * @param value1 第一個類別物件或類別字串\r\n * @param value2 第二個類別物件或類別字串\r\n * @returns 合併後的類別物件\r\n */\r\nexport function mergeClasses(\r\n  value1: Record<string, boolean> | string | null | undefined,\r\n  value2: Record<string, boolean> | string | null | undefined\r\n): Record<string, boolean> {\r\n  return { ...parseClassNames(value1), ...parseClassNames(value2) };\r\n}\r\n\r\n/**\r\n * 從物件中取得指定屬性的值，並依據屬性類型進行處理\r\n *\r\n * 此函式支援以下功能:\r\n * 1. 如果屬性不存在，回傳 null\r\n * 2. 如果屬性值是符合模組函式格式的字串，會將其轉換為函式並快取\r\n * 3. 如果屬性值是函式，會以指定物件為上下文執行並回傳結果\r\n *\r\n * @template T - 回傳值的預期型別\r\n * @param targetObject - 要取得屬性的目標物件\r\n * @param propertyName - 要取得的屬性名稱\r\n * @param functionArgs - 如果屬性是函式，傳遞給該函式的參數\r\n * @returns 處理後的屬性值，如果無法取得則回傳 null\r\n *\r\n * @example\r\n * // 取得簡單屬性\r\n * const name = resolvePropertyValue(user, 'name');\r\n *\r\n * @example\r\n * // 取得並執行函式屬性\r\n * const fullName = resolvePropertyValue(user, 'getFullName', ['withTitle']);\r\n */\r\nexport function resolvePropertyValue(\r\n  targetObject: Record<string, any> | null | undefined,\r\n  propertyName: string,\r\n  functionArgs?: any[]\r\n): any {\r\n  if (!targetObject || typeof targetObject !== 'object') {\r\n    return null;\r\n  }\r\n\r\n  if (!Object.hasOwn(targetObject, propertyName)) {\r\n    if (propertyName.includes('.')) {\r\n      const parts = propertyName.split('.');\r\n      const firstProp = parts.shift()!;\r\n\r\n      if (Object.hasOwn(targetObject, firstProp)) {\r\n        const nestedObj = targetObject[firstProp];\r\n        return resolvePropertyValue(nestedObj, parts.join('.'), functionArgs);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  let propertyValue = targetObject[propertyName];\r\n  if (typeof propertyValue === 'string' && isModuleFunctionString(propertyValue)) {\r\n    try {\r\n      propertyValue = targetObject[propertyName] = createFunctionFromString(propertyValue);\r\n    } catch (error) {\r\n      console.error(`無法解析函式字串 '${propertyName}':`, error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  try {\r\n    return executeFunction(targetObject, propertyValue, ...(functionArgs || []));\r\n  } catch (error) {\r\n    console.error(`執行屬性 '${propertyName}' 時發生錯誤:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * 在文字中標記搜尋關鍵字，使其以指定樣式高亮顯示\r\n *\r\n * 此函式將搜尋文字中符合關鍵字的部分，並用 HTML 標記包裹以實現視覺高亮效果。\r\n * 搜尋過程不區分大小寫（case-insensitive）。\r\n *\r\n * @param text 要處理的原始文字\r\n * @param searchTerm 要高亮顯示的搜尋關鍵字\r\n * @param highlightTemplate 用於高亮顯示的 HTML 模板，使用 $1 作為關鍵字位置的佔位符\r\n * @returns 處理後的文字，包含高亮標記；若輸入或搜尋詞為空則回傳原文\r\n *\r\n * @example\r\n * // 回傳: \"找到了重要<span class=\"bg-warning text-dark\">關鍵字</span>！\"\r\n * highlightSearchTerms(\"找到了重要關鍵字！\", \"關鍵字\");\r\n *\r\n * @example\r\n * // 使用自訂樣式\r\n * highlightSearchTerms(\"Hello World\", \"world\", '<mark>$1</mark>');\r\n * // 回傳: \"Hello <mark>World</mark>\"\r\n */\r\nexport function appendHighlight(\r\n  text: string,\r\n  searchTerm: string,\r\n  highlightTemplate = '<span class=\"bg-warning text-dark\">$1</span>'\r\n): string {\r\n  if (!searchTerm || !text) {\r\n    return text;\r\n  }\r\n\r\n  try {\r\n    const escapedSearchTerm = escapeHtml(searchTerm);\r\n    const searchRegex = new RegExp(`(${escapedSearchTerm})`, 'gi');\r\n    const processedTemplate = highlightTemplate.replace('$1', '$&');\r\n    return text.replace(searchRegex, processedTemplate);\r\n  } catch (error) {\r\n    console.error('搜尋高亮處理錯誤:', error);\r\n    return text;\r\n  }\r\n}\r\n\r\n/**\r\n * 安全地執行函數\r\n *\r\n * 此函式會嘗試以指定的上下文執行目標函數，並處理可能的錯誤。\r\n * 如果輸入不是函數，則直接回傳原始值，且不會執行任何操作。\r\n *\r\n * @template TFunc 函數類型\r\n * @template TResult 回傳值類型\r\n * @param context 函數執行的上下文對象（this 指向）\r\n * @param fn 要執行的函數（若不是函數則原樣回傳）\r\n * @param args 傳遞給函數的參數列表\r\n * @returns 函數執行結果、Promise<結果>（如果是非同步函數）或原始值\r\n *\r\n * @example\r\n * // 回傳函數執行結果\r\n * const result = executeFunction(user, user.getName, 'full');\r\n *\r\n * @example\r\n * // 若 fn 不是函數，直接回傳原始值\r\n * const result = executeFunction(user, 'notAFunction');\r\n */\r\nexport function executeFunction<T = any>(\r\n  context: any,\r\n  fn: ((...args: any[]) => T) | any,\r\n  ...args: any[]\r\n): T | Promise<T> {\r\n  if (typeof fn !== 'function') {\r\n    return fn;\r\n  }\r\n\r\n  return fn.apply(context, args);\r\n}\r\n\r\n/**\r\n * 檢查是否為有效的條件陣列\r\n *\r\n * 有效的條件陣列必須滿足以下條件：\r\n * 1. 不為 null 或 undefined\r\n * 2. 為陣列型別\r\n * 3. 陣列中的每個元素都必須包含 field、operator、value 屬性\r\n *\r\n * @param conditions 要檢查的潛在條件陣列\r\n * @returns 如果是有效的條件陣列則回傳 true，否則回傳 false\r\n *\r\n * @example\r\n * // 回傳 true\r\n * isConditions([\r\n *   { field: 'age', operator: '>', value: 18 },\r\n *   { field: 'status', operator: '=', value: 'active', conjunction: 'and' }\r\n * ]);\r\n *\r\n * @example\r\n * // 回傳 false - 缺少必要屬性\r\n * isConditions([{ field: 'name', operator: '=' }]);\r\n */\r\nexport function isConditions(value: unknown): value is ConditionInterface[] {\r\n  if (value == null || !Array.isArray(value)) {\r\n    return false;\r\n  }\r\n\r\n  return value.every(\r\n    (item): item is ConditionInterface =>\r\n      typeof item === 'object' &&\r\n      item !== null &&\r\n      'field' in item &&\r\n      'operator' in item &&\r\n      'value' in item\r\n  );\r\n}\r\n\r\n/**\r\n * 檢查是否為有效的條件群組陣列\r\n *\r\n * 有效的條件群組陣列必須滿足以下條件：\r\n * 1. 不為 null 或 undefined\r\n * 2. 為陣列型別\r\n * 3. 陣列中的每個元素都必須包含 conditions 屬性（陣列型別）和 value 屬性\r\n * 4. conditions 屬性必須是有效的條件陣列\r\n *\r\n * @param value 要檢查的潛在條件群組陣列\r\n * @returns 如果是有效的條件群組陣列則回傳 true，否則回傳 false\r\n *\r\n * @example\r\n * // 回傳 true\r\n * isConditionGroups([\r\n *  { conditions: [{ field: 'age', operator: '>', value: 18 }], value: 'adult' },\r\n * { conditions: [{ field: 'status', operator: '=', value: 'active' }], value: 'active' }\r\n * ]);\r\n * * @example\r\n * // 回傳 false - 缺少必要屬性\r\n * isConditionGroups([{ conditions: [{ field: 'name', operator: '=' }], value\r\n * : 'John' }]);\r\n */\r\nexport function isConditionGroups(value: unknown): value is ConditionGroupInterface[] {\r\n  if (value == null || !Array.isArray(value)) {\r\n    return false;\r\n  }\r\n\r\n  return value.every(\r\n    (item): item is ConditionGroupInterface =>\r\n      typeof item === 'object' &&\r\n      item !== null &&\r\n      'conditions' in item &&\r\n      isConditions(item.conditions) &&\r\n      'value' in item\r\n  );\r\n}\r\n\r\n/**\r\n * 取得選中的項目 ID 清單\r\n *\r\n * 依據選擇模式回傳不同格式的選中項目 ID：\r\n * - 'single': 回傳單一選中項目 ID (字串)\r\n * - 'multiple': 回傳所有選中項目 ID 陣列\r\n * - 'none': 不允許選擇，回傳 null\r\n *\r\n * 若無選中項目：\r\n * - 若 nullable 為 true，則回傳 null\r\n * - 若 nullable 為 false，則選擇第一個項目作為預設值\r\n *\r\n * @param items 項目清單，包含所有可選擇的項目\r\n * @param nullable 是否允許空值。true 表示允許回傳 null；false 表示至少選中一個項目\r\n * @param selection 選擇模式，預設為 'single'（單選）\r\n * @returns 選中的項目 ID 或 ID 列表，或 null（當無選中項目且 nullable 為 true 時）\r\n *\r\n * @example\r\n * // 回傳單一選中 ID\r\n * getSelectedItemIds(items, false, 'single');\r\n *\r\n * @example\r\n * // 回傳選中 ID 的陣列\r\n * getSelectedItemIds(items, true, 'multiple');\r\n */\r\nexport function getSelectedItemIds(\r\n  items: ListItemInterface[],\r\n  nullable: boolean,\r\n  selection: 'single' | 'multiple' | 'none' = 'single'\r\n): string | string[] | null {\r\n  if (!Array.isArray(items) || items.length === 0) return null;\r\n\r\n  const selectedIds = items\r\n    .filter(item => item.selected === true && item.id)\r\n    .map(item => String(item.id));\r\n\r\n  if (selectedIds.length === 0) {\r\n    if (nullable || selection === 'none') {\r\n      return null;\r\n    }\r\n\r\n    const firstItem = items.find(item => item.id);\r\n    if (firstItem) {\r\n      selectedIds.push(String(firstItem.id));\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return selection === 'single'\r\n    ? selectedIds[0]\r\n    : selectedIds;\r\n}\r\n\r\n/**\r\n * 建立一個防抖動 (debounce) 函數，用於限制函數的執行頻率。\r\n *\r\n * 防抖動機制確保在一段時間內多次呼叫時，只執行最後一次呼叫，\r\n * 並提供取消和立即執行機制。\r\n *\r\n * @template T - 原始函數的型別\r\n * @param fn -  要進行防抖動處理的原始函數\r\n * @param delay - 延遲執行的毫秒數（必須 >= 0，當作 0 時為同步執行）\r\n * 若延遲時間為負數，將自動設為預設值 300 毫秒。\r\n * @returns 包裝後的防抖動函數，包含取消和立即執行方法\r\n *\r\n * @example\r\n * // 基本使用\r\n * const debouncedSearch = debounce((query) => {\r\n *   searchAPI(query);\r\n * }, 300);\r\n *\r\n * // 在輸入事件中使用\r\n * inputElement.addEventListener('input', (e) => {\r\n *   debouncedSearch(e.target.value);\r\n * });\r\n *\r\n * // 取消排定的執行\r\n * cancelButton.addEventListener('click', () => {\r\n *   debouncedSearch.cancel();\r\n * });\r\n *\r\n * // 立即執行\r\n * urgentButton.addEventListener('click', () => {\r\n *   debouncedSearch.flush();\r\n * });\r\n */\r\nexport function debounce<T extends (...args: Parameters<T>) => ReturnType<T>>(\r\n  fn: T,\r\n  delay: number\r\n): {\r\n  (...args: Parameters<T>): void;\r\n  cancel: () => void;\r\n  flush: () => void;\r\n  pending: () => boolean;\r\n} {\r\n  if (delay < 0) {\r\n    console.warn('Delay time must be greater than or equal to 0. Using default value of 300ms.');\r\n    delay = 300;\r\n  }\r\n\r\n  let timeoutId: ReturnType<typeof setTimeout> | undefined;\r\n  let lastArgs: Parameters<T> | undefined;\r\n  let lastThis: ThisParameterType<T>;\r\n\r\n  const debouncedFunction = function (this: ThisParameterType<T>, ...args: Parameters<T>): void {\r\n    lastArgs = args;\r\n    lastThis = this;\r\n\r\n    if (timeoutId !== undefined) {\r\n      clearTimeout(timeoutId);\r\n    }\r\n\r\n    // 優化：delay 為 0 時直接執行\r\n    if (delay === 0) {\r\n      try {\r\n        fn.apply(this, args);\r\n      } catch (error) {\r\n        console.error('Error executing debounced function:', error);\r\n      }\r\n      return;\r\n    }\r\n\r\n    timeoutId = setTimeout(() => {\r\n      try {\r\n        if (lastArgs !== undefined) {\r\n          fn.apply(lastThis, lastArgs);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error executing debounced function:', error);\r\n      } finally {\r\n        timeoutId = undefined;\r\n        lastArgs = undefined;\r\n      }\r\n    }, delay);\r\n  };\r\n\r\n  debouncedFunction.cancel = function (): void {\r\n    if (timeoutId !== undefined) {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = undefined;\r\n      lastArgs = undefined;\r\n    }\r\n  };\r\n\r\n  debouncedFunction.flush = function (): void {\r\n    if (timeoutId !== undefined && lastArgs !== undefined) {\r\n      clearTimeout(timeoutId);\r\n      try {\r\n        fn.apply(lastThis, lastArgs);\r\n      } catch (error) {\r\n        console.error('Error executing debounced function:', error);\r\n      } finally {\r\n        timeoutId = undefined;\r\n        lastArgs = undefined;\r\n      }\r\n    }\r\n  };\r\n\r\n  debouncedFunction.pending = function (): boolean {\r\n    return timeoutId !== undefined;\r\n  };\r\n\r\n  return debouncedFunction;\r\n}\r\n\r\n/**\r\n * 檢查一個字串或字串陣列是否包含任何非空值\r\n *\r\n * 對於單個字串，會檢查去除空格後是否有內容\r\n * 對於字串陣列，會檢查是否至少有一個字串去除空格後有內容\r\n *\r\n * @param value 要檢查的字串或字串陣列\r\n * @returns 如果至少有一個非空值，則返回 true，否則返回 false\r\n */\r\nexport function isNonEmptyValue(value: string | string[]): boolean {\r\n  if (Array.isArray(value)) {\r\n    if (value.length === 0) {\r\n      return false;\r\n    }\r\n\r\n    return value.some(str => isNonEmptyValue(str));\r\n  }\r\n\r\n  return typeof value === 'string' && value.trim() !== '';\r\n}\r\n\r\nconst FNV64_OFFSET = 0xcbf29ce484222325n;\r\nconst FNV64_PRIME = 0x100000001b3n;\r\nconst MASK64 = 0xFFFFFFFFFFFFFFFFn;\r\n\r\nfunction fnv1a64_mixString(h: bigint, s: string): bigint {\r\n  for (let i = 0; i < s.length; i++) {\r\n    h ^= BigInt(s.charCodeAt(i) & 0x7F); // 如需完整 UTF-8 可改為實際 UTF-8 編碼\r\n    h = (h * FNV64_PRIME) & MASK64;\r\n  }\r\n  return h;\r\n}\r\nfunction toHex64(h: bigint): string {\r\n  return h.toString(16).padStart(16, '0');\r\n}\r\n\r\nexport function computeDataHashBrowserSync(\r\n  data: object[],\r\n  getId: (row: any) => string | number,\r\n  getIndex: (row: any) => number,\r\n  ordered: boolean = true\r\n): string {\r\n  if (!data || data.length === 0) return '';\r\n\r\n  if (ordered) {\r\n    let H = FNV64_OFFSET;\r\n    for (let i = 0; i < data.length; i++) {\r\n      const r = data[i] as any;\r\n      H = fnv1a64_mixString(H, 'i:');\r\n      H = fnv1a64_mixString(H, String(getId(r)));\r\n      H = fnv1a64_mixString(H, '|x:');\r\n      H = fnv1a64_mixString(H, String(getIndex(r)));\r\n      H = fnv1a64_mixString(H, '#');\r\n    }\r\n    H = fnv1a64_mixString(H, `len:${data.length}`);\r\n    return toHex64(H);\r\n  } else {\r\n    let H = 0n;\r\n    for (let i = 0; i < data.length; i++) {\r\n      const r = data[i] as any;\r\n      let h = FNV64_OFFSET;\r\n      h = fnv1a64_mixString(h, `i:${getId(r)}|x:${getIndex(r)}`);\r\n      H ^= h;\r\n    }\r\n    let lenHash = FNV64_OFFSET;\r\n    lenHash = fnv1a64_mixString(lenHash, `len:${data.length}`);\r\n    H ^= lenHash;\r\n    return toHex64(H & MASK64);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;AA4BA;;;;;;;;;;;;;;;;;;AAkBG;AACG,SAAU,WAAW,CAAC,MAAM,GAAG,EAAE,EAAE,MAAM,GAAG,EAAE,EAAA;AAClD,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,UAAU,EAAE;IAEhC,MAAM,KAAK,GAAa,EAAE;AAC1B,IAAA,IAAI,MAAM;AAAE,QAAA,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAC9B,IAAA,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;AAChB,IAAA,IAAI,MAAM;AAAE,QAAA,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;AAE9B,IAAA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC;AACxB;AAEA;;;AAGG;AACH,MAAM,eAAe,GAAqC;AACxD,IAAA,GAAG,EAAE,OAAO;AACZ,IAAA,GAAG,EAAE,MAAM;AACX,IAAA,GAAG,EAAE,MAAM;AACX,IAAA,GAAG,EAAE,QAAQ;AACb,IAAA,GAAG,EAAE,OAAO;AACZ,IAAA,GAAG,EAAE,QAAQ;AACb,IAAA,GAAG,EAAE,QAAQ;AACb,IAAA,GAAG,EAAE;CACN;AAED,MAAM,iBAAiB,GAAG,aAAa;AAEvC;;;;;;;;;;;;;;;;AAgBG;AACG,SAAU,UAAU,CAAC,MAAiC,EAAA;AAC1D,IAAA,IAAI,CAAC,MAAM;AAAE,QAAA,OAAO,EAAE;AAEtB,IAAA,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,iBAAiB,EAAE,KAAK,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC;AACnF;AAEA;;;;;;AAMG;SACa,SAAS,CAAI,KAAU,EAAE,SAAiB,EAAE,OAAe,EAAA;AACzE,IAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;QAAE;IACjD,IAAI,SAAS,KAAK,OAAO;QAAE;AAE3B,IAAA,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM;AAC3B,IAAA,MAAM,UAAU,GAAG,CAAC,CAAC,SAAS,GAAG,MAAM,IAAI,MAAM,IAAI,MAAM;AAC3D,IAAA,MAAM,QAAQ,GAAG,CAAC,CAAC,OAAO,GAAG,MAAM,IAAI,MAAM,IAAI,MAAM;AAEvD,IAAA,MAAM,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC;IAC1C,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC;AACjC;AAEA;;;;;;AAMG;AACa,SAAA,UAAU,CAAC,IAAa,EAAE,IAAa,EAAA;IACrD,IAAI,IAAI,KAAK,IAAI;AAAE,QAAA,OAAO,IAAI;IAE9B,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,MAAM,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI,CAAC,EAAE;AAClF,QAAA,OAAO,IAAI;;AAGb,IAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;AAChD,QAAA,OAAO,KAAK;;IAGd,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE;AAC/B,QAAA,OAAO,KAAK;;AAGd,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACpC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE;AACvB,YAAA,OAAO,KAAK;;;AAIhB,IAAA,OAAO,IAAI;AACb;AAEA;AACA,MAAM,eAAe,GAAG,IAAI,GAAG,EAK3B;AAEJ,MAAM,cAAc,GAAG,GAAG;AAE1B;;;;;;AAMG;AACa,SAAA,aAAa,CAAC,GAAY,EAAE,KAAsB,EAAA;IAChE,IAAI,GAAG,IAAI,IAAI;AAAE,QAAA,OAAO,GAAG;AAE3B,IAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,QAAA,OAAO,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,SAAS;;AAGpD,IAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,QAAA,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC;;AAGvD,IAAA,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,EAAE;IACjC,IAAI,YAAY,KAAK,EAAE;AAAE,QAAA,OAAO,SAAS;;IAGzC,IAAI,SAAS,GAAG,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC;IACjD,IAAI,CAAC,SAAS,EAAE;AACd,QAAA,SAAS,GAAG,cAAc,CAAC,YAAY,CAAC;;AAGxC,QAAA,IAAI,eAAe,CAAC,IAAI,IAAI,cAAc,EAAE;YAC1C,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK;AACpD,YAAA,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC;;AAGlC,QAAA,eAAe,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC;;AAG9C,IAAA,QAAQ,SAAS,CAAC,IAAI;AACpB,QAAA,KAAK,MAAM;YACT,OAAO,cAAc,CAAC,GAAG,EAAE,SAAS,CAAC,KAAM,CAAC;AAC9C,QAAA,KAAK,WAAW;YACd,OAAO,eAAe,CAAC,GAAG,EAAE,SAAS,CAAC,KAAM,CAAC;AAC/C,QAAA,KAAK,KAAK;YACR,MAAM,UAAU,GAAG,aAAa,CAAC,GAAG,EAAE,SAAS,CAAC,UAAW,CAAC;YAC5D,OAAO,aAAa,CAAC,UAAU,EAAE,SAAS,CAAC,QAAS,CAAC;AACvD,QAAA,KAAK,QAAQ;YACX,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;AACtE,gBAAA,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,aAAa,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;;YAE3D,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,IAAI,EAAE;AAC3C,gBAAA,OAAQ,GAA+B,CAAC,YAAY,CAAC;;AAEvD,YAAA,OAAO,SAAS;AAClB,QAAA;AACE,YAAA,OAAO,SAAS;;AAEtB;AAEA;;AAEG;AACH,SAAS,cAAc,CAAC,KAAa,EAAA;IAMnC,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;IACpC,MAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;IACzC,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;AAEnC,IAAA,IAAI,SAAS,KAAK,EAAE,EAAE;AACpB,QAAA,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;;AAGlD,IAAA,IAAI,cAAc,KAAK,EAAE,EAAE;AACzB,QAAA,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;;AAGvD,IAAA,IAAI,QAAQ,KAAK,EAAE,EAAE;QACnB,OAAO;AACL,YAAA,IAAI,EAAE,KAAK;YACX,UAAU,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC;YACxC,QAAQ,EAAE,KAAK,CAAC,SAAS,CAAC,QAAQ,GAAG,CAAC;SACvC;;AAGH,IAAA,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE;AAC3B;AAEA;;;;;;AAMG;SACa,aAAa,CAAC,GAAY,EAAE,KAAsB,EAAE,KAAc,EAAA;AAChF,IAAA,IAAI,GAAG,IAAI,IAAI,EAAE;QACf;;AAGF,IAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACtB,YAAA,GAAG,CAAC,KAAK,CAAC,GAAG,KAAK;;QAEpB;;AAGF,IAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,QAAA,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC;;AAGvD,IAAA,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,EAAE;IACjC,IAAI,YAAY,KAAK,EAAE;QAAE;IAEzB,IAAI,SAAS,GAAG,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC;IACjD,IAAI,CAAC,SAAS,EAAE;AACd,QAAA,SAAS,GAAG,cAAc,CAAC,YAAY,CAAC;AAExC,QAAA,IAAI,eAAe,CAAC,IAAI,IAAI,cAAc,EAAE;YAC1C,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK;AACpD,YAAA,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC;;AAGlC,QAAA,eAAe,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC;;AAG9C,IAAA,IAAI,SAAS,CAAC,IAAI,KAAK,MAAM,IAAI,SAAS,CAAC,IAAI,KAAK,WAAW,EAAE;AAC/D,QAAA,MAAM,KAAK,GAAG,SAAS,CAAC,KAAM;AAC9B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;YACnC,IAAI,WAAW,IAAI,aAAa,CAAC,GAAG,EAAE,WAAW,CAAC,KAAK,SAAS,EAAE;AAChE,gBAAA,aAAa,CAAC,GAAG,EAAE,WAAW,EAAE,KAAK,CAAC;gBACtC;;;QAGJ,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE;QAClC,IAAI,SAAS,EAAE;AACb,YAAA,aAAa,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,CAAC;;QAEtC;;AAGF,IAAA,IAAI,SAAS,CAAC,IAAI,KAAK,KAAK,EAAE;AAC5B,QAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAC3B,MAAM,MAAM,GAAI,GAA+B,CAAC,SAAS,CAAC,UAAW,CAAC;AACtE,YAAA,IAAI,MAAM,KAAK,SAAS,EAAE;gBACxB,aAAa,CAAC,MAAM,EAAE,SAAS,CAAC,QAAS,EAAE,KAAK,CAAC;;;QAGrD;;IAGF,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;AACtE,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,YAAA,MAAM,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;AACrB,YAAA,IAAI,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;AACvC,gBAAA,MAAkC,CAAC,YAAY,CAAC,GAAG,KAAK;;;;AAGxD,SAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACjC,QAAA,GAA+B,CAAC,YAAY,CAAC,GAAG,KAAK;;AAE1D;AAEA;;;;;;;AAOG;AACH,SAAS,cAAc,CAAC,GAAY,EAAE,KAAwB,EAAA;AAC5D,IAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACxB,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,EAAE;QAC/B,IAAI,WAAW,EAAE;YACf,MAAM,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,WAAW,CAAC;YAC7C,IAAI,KAAK,IAAI,IAAI;AAAE,gBAAA,OAAO,KAAK;;;AAGnC,IAAA,OAAO,IAAI;AACb;AAEA;;;;;;;AAOG;AACH,SAAS,eAAe,CAAC,GAAY,EAAE,KAAwB,EAAA;IAC7D,MAAM,MAAM,GAAc,EAAE;AAE5B,IAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACxB,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,EAAE;QAC/B,IAAI,WAAW,EAAE;YACf,MAAM,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,WAAW,CAAC;AAC7C,YAAA,IAAI,KAAK,IAAI,IAAI,EAAE;AACjB,gBAAA,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACxB,oBAAA,MAAM,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;;qBAChB;AACL,oBAAA,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;;;;;AAM1B,IAAA,OAAO,MAAM;AACf;AAEA;;;;;;;AAOG;AACG,SAAU,oBAAoB,CAAC,GAAY,EAAE,KAAc,EAAE,GAAG,IAAe,EAAA;IACnF,IAAI,KAAK,IAAI,IAAI;AAAE,QAAA,OAAO,KAAK;AAE/B,IAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,QAAA,IAAI,sBAAsB,CAAC,KAAK,CAAC,EAAE;AACjC,YAAA,KAAK,GAAG,wBAAwB,CAAC,KAAK,CAAC;;aAEpC;YACH,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;AAC9B,YAAA,IAAI,IAAI,GAAQ,GAAG,KAAK,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,GAAG,UAAU,CAAC;AAE5E,YAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACxB,gBAAA,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;gBACnB,IAAI,IAAI,KAAK,SAAS;oBAAE;;AAG1B,YAAA,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC9B,KAAK,GAAG,IAAI;;;;AAIlB,IAAA,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;QAC/B,OAAO,eAAe,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;;AAE7C,IAAA,OAAO,KAAK;AACd;AAEA;;;;;;;;;;AAUG;AACG,SAAU,wBAAwB,CAAC,IAAY,EAAA;AACnD,IAAA,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;AAClD,QAAA,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC;;IAGpD,MAAM,KAAK,GAAG,oEAAoE;IAClF,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;IAEhC,IAAI,CAAC,OAAO,EAAE;AACZ,QAAA,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC;;IAG5C,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;AAC5B,IAAA,MAAM,UAAU,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;IACnF,MAAM,YAAY,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;AAEtC,IAAA,MAAM,WAAW,GAAG,IAAI,WAAW,EAAE;IAErC,MAAM,eAAe,GAAG;UACpB,MAAM,CAAC,cAAc,CAAC,kBAAoB,GAAC,CAAC,CAAC;UAC7C,QAAQ;AAEZ,IAAA,MAAM,IAAI,GAAG,IAAI,WAAW,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,GAAG,UAAU,EAAE,YAAY,CAAC;AAE1F,IAAA,OAAO,IAA+B;AACxC;AAEA;;;;;;;;;;;;;;;;;;;;AAoBG;AACG,SAAU,sBAAsB,CAAC,IAAY,EAAA;AACjD,IAAA,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AAC5B,QAAA,OAAO,KAAK;;AAEd,IAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,EAAE;IAC/B,MAAM,KAAK,GAAG,wEAAwE;AACtF,IAAA,OAAO,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;AAChC;AAEA;;;;;;AAMG;AACa,SAAA,kBAAkB,CAAC,KAA2B,EAAE,IAAyB,EAAA;AACvF,IAAA,MAAM,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,SAAS,IAAI,SAAS,CAAC,WAAW,KAAK,IAAI,CAAC;AAC/E,IAAA,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,SAAS,IAAI,SAAS,CAAC,WAAW,KAAK,IAAI,CAAC;AAE9E,IAAA,IAAI,aAAa,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,EAAE;AACrE,QAAA,OAAO,KAAK;;IAGd,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,IAAI,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,EAAE;AAC/F,QAAA,OAAO,KAAK;;AAGd,IAAA,OAAO,IAAI;AACb;AAsBA;;;;;;;;;;;;;;;;;AAiBG;AACH,SAAS,cAAc,CAAC,SAA6B,EAAE,IAAyB,EAAA;AAC9E,IAAA,IAAI;AACF,QAAA,MAAM,KAAK,GAAG,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,EAAE,IAAI,CAAW;AACzE,QAAA,MAAM,QAAQ,GAAG,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAsB;AAC1F,QAAA,MAAM,KAAK,GAAG,oBAAoB,CAAC,IAAI,EAAE,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC;QAC/D,MAAM,UAAU,GAAG,oBAAoB,CAAC,IAAI,EAAE,KAAK,CAAC;QAEpD,IAAI,UAAU,KAAK,IAAI,IAAI,UAAU,KAAK,SAAS,EAAE;YACnD,IAAI,QAAQ,KAAK,GAAG;AAAE,gBAAA,OAAO,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS;YAClE,IAAI,QAAQ,KAAK,IAAI;AAAE,gBAAA,OAAO,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS;YACnE,IAAI,QAAQ,KAAK,OAAO;AAAE,gBAAA,OAAO,IAAI;YACrC,IAAI,QAAQ,KAAK,UAAU;AAAE,gBAAA,OAAO,KAAK;AACzC,YAAA,OAAO,KAAK;;QAGd,QAAQ,QAAQ;YACd,KAAK,GAAG,EAAE;AACR,gBAAA,MAAM,QAAQ,GAAG,CAAC,UAAU;AAC5B,gBAAA,MAAM,QAAQ,GAAG,CAAC,KAAK;AACvB,gBAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,GAAG,QAAQ;;YAEpE,KAAK,GAAG,EAAE;AACR,gBAAA,MAAM,QAAQ,GAAG,CAAC,UAAU;AAC5B,gBAAA,MAAM,QAAQ,GAAG,CAAC,KAAK;AACvB,gBAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,GAAG,QAAQ;;YAEpE,KAAK,IAAI,EAAE;AACT,gBAAA,MAAM,QAAQ,GAAG,CAAC,UAAU;AAC5B,gBAAA,MAAM,QAAQ,GAAG,CAAC,KAAK;AACvB,gBAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,IAAI,QAAQ;;YAErE,KAAK,IAAI,EAAE;AACT,gBAAA,MAAM,QAAQ,GAAG,CAAC,UAAU;AAC5B,gBAAA,MAAM,QAAQ,GAAG,CAAC,KAAK;AACvB,gBAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,IAAI,QAAQ;;AAErE,YAAA,KAAK,GAAG;gBACN,OAAO,UAAU,KAAK,KAAK;qBACxB,OAAO,UAAU,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,UAAU,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;qBACvG,OAAO,UAAU,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,CAAC,UAAU,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,CAAC;AACjH,YAAA,KAAK,IAAI;gBACP,OAAO,UAAU,KAAK,KAAK;oBACzB,EAAE,OAAO,UAAU,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,UAAU,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;oBACzG,EAAE,OAAO,UAAU,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,CAAC,UAAU,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,CAAC;YAClH,KAAK,MAAM,EAAE;gBACX,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE;gBACjD,MAAM,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE;AAC5C,gBAAA,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC;;AAEpC,YAAA,KAAK,SAAS;AACZ,gBAAA,OAAO,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;AAChE,YAAA,KAAK,YAAY;AACf,gBAAA,OAAO,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;AACjE,YAAA,KAAK,IAAI;AACP,gBAAA,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;AAC3D,YAAA,KAAK,OAAO;AACV,gBAAA,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;AAC5D,YAAA,KAAK,QAAQ;AACX,gBAAA,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC7B,oBAAA,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC;AACpC,oBAAA,OAAO,KAAK;;AAEd,gBAAA,OAAO,OAAO,UAAU,KAAK,KAAK;AACpC,YAAA,KAAK,YAAY;AACf,gBAAA,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;AAC/B,oBAAA,OAAO,CAAC,IAAI,CAAC,0BAA0B,CAAC;AACxC,oBAAA,OAAO,KAAK;;gBAEd,OAAO,UAAU,YAAY,KAAK;AACpC,YAAA,KAAK,OAAO;gBACV,OAAO,UAAU,KAAK,EAAE;AACtB,qBAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC;AACtD,qBAAC,OAAO,UAAU,KAAK,QAAQ,IAAI,UAAU,KAAK,IAAI;wBACpD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;AAC3C,YAAA,KAAK,UAAU;gBACb,OAAO,UAAU,KAAK,EAAE;AACtB,oBAAA,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,CAAC;oBACvD,EAAE,OAAO,UAAU,KAAK,QAAQ,IAAI,UAAU,KAAK,IAAI;wBACrD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;AAC3C,YAAA,KAAK,OAAO;AACV,gBAAA,IAAI;AACF,oBAAA,MAAM,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC;AAC7B,oBAAA,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;;gBACnD,OAAO,KAAK,EAAE;AACd,oBAAA,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC;AACjC,oBAAA,OAAO,KAAK;;AAEhB,YAAA;AACE,gBAAA,MAAM,IAAI,KAAK,CAAC,YAAY,QAAQ,CAAA,CAAE,CAAC;;;IAE3C,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC;AAC/B,QAAA,OAAO,KAAK;;AAEhB;AAEA;;;;;;AAMG;AACa,SAAA,mBAAmB,CAAC,GAAW,EAAE,IAAyB,EAAA;IACxE,MAAM,gBAAgB,GAAG,cAAc;IAEvC,OAAO,GAAG,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAE,KAAK,KAAI;QAChD,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC;AACxC,QAAA,OAAO,KAAK,KAAK,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;AACjD,KAAC,CAAC;AACJ;AAEA;;;;;AAKG;AACG,SAAU,eAAe,CAAC,KAA0D,EAAA;AACxF,IAAA,IAAI,CAAC,KAAK;AAAE,QAAA,OAAO,EAAE;IAErB,IAAI,OAAO,KAAK,KAAK,QAAQ;AAAE,QAAA,OAAO,KAAK;AAE3C,IAAA,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,EAAE;AAC5B,IAAA,IAAI,CAAC,OAAO;AAAE,QAAA,OAAO,EAAE;AAEvB,IAAA,OAAO,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,SAAS,KAAI;AACvD,QAAA,IAAI,SAAS;AAAE,YAAA,MAAM,CAAC,SAAS,CAAC,GAAG,IAAI;AACvC,QAAA,OAAO,MAAM;KACd,EAAE,EAA6B,CAAC;AACnC;AAEA;;;;;;AAMG;AACa,SAAA,YAAY,CAC1B,MAA2D,EAC3D,MAA2D,EAAA;AAE3D,IAAA,OAAO,EAAE,GAAG,eAAe,CAAC,MAAM,CAAC,EAAE,GAAG,eAAe,CAAC,MAAM,CAAC,EAAE;AACnE;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBG;SACa,oBAAoB,CAClC,YAAoD,EACpD,YAAoB,EACpB,YAAoB,EAAA;IAEpB,IAAI,CAAC,YAAY,IAAI,OAAO,YAAY,KAAK,QAAQ,EAAE;AACrD,QAAA,OAAO,IAAI;;IAGb,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,YAAY,CAAC,EAAE;AAC9C,QAAA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YAC9B,MAAM,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC;AACrC,YAAA,MAAM,SAAS,GAAG,KAAK,CAAC,KAAK,EAAG;YAEhC,IAAI,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,EAAE;AAC1C,gBAAA,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,CAAC;AACzC,gBAAA,OAAO,oBAAoB,CAAC,SAAS,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,YAAY,CAAC;;;AAGzE,QAAA,OAAO,IAAI;;AAGb,IAAA,IAAI,aAAa,GAAG,YAAY,CAAC,YAAY,CAAC;IAC9C,IAAI,OAAO,aAAa,KAAK,QAAQ,IAAI,sBAAsB,CAAC,aAAa,CAAC,EAAE;AAC9E,QAAA,IAAI;YACF,aAAa,GAAG,YAAY,CAAC,YAAY,CAAC,GAAG,wBAAwB,CAAC,aAAa,CAAC;;QACpF,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,CAAA,UAAA,EAAa,YAAY,CAAI,EAAA,CAAA,EAAE,KAAK,CAAC;AACnD,YAAA,OAAO,IAAI;;;AAIf,IAAA,IAAI;AACF,QAAA,OAAO,eAAe,CAAC,YAAY,EAAE,aAAa,EAAE,IAAI,YAAY,IAAI,EAAE,CAAC,CAAC;;IAC5E,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,CAAA,MAAA,EAAS,YAAY,CAAU,QAAA,CAAA,EAAE,KAAK,CAAC;AACrD,QAAA,OAAO,IAAI;;AAEf;AAEA;;;;;;;;;;;;;;;;;;;AAmBG;AACG,SAAU,eAAe,CAC7B,IAAY,EACZ,UAAkB,EAClB,iBAAiB,GAAG,8CAA8C,EAAA;AAElE,IAAA,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,EAAE;AACxB,QAAA,OAAO,IAAI;;AAGb,IAAA,IAAI;AACF,QAAA,MAAM,iBAAiB,GAAG,UAAU,CAAC,UAAU,CAAC;QAChD,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC,CAAI,CAAA,EAAA,iBAAiB,CAAG,CAAA,CAAA,EAAE,IAAI,CAAC;QAC9D,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC;QAC/D,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,iBAAiB,CAAC;;IACnD,OAAO,KAAK,EAAE;AACd,QAAA,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC;AACjC,QAAA,OAAO,IAAI;;AAEf;AAEA;;;;;;;;;;;;;;;;;;;;AAoBG;AACG,SAAU,eAAe,CAC7B,OAAY,EACZ,EAAiC,EACjC,GAAG,IAAW,EAAA;AAEd,IAAA,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;AAC5B,QAAA,OAAO,EAAE;;IAGX,OAAO,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC;AAChC;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBG;AACG,SAAU,YAAY,CAAC,KAAc,EAAA;AACzC,IAAA,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AAC1C,QAAA,OAAO,KAAK;;AAGd,IAAA,OAAO,KAAK,CAAC,KAAK,CAChB,CAAC,IAAI,KACH,OAAO,IAAI,KAAK,QAAQ;AACxB,QAAA,IAAI,KAAK,IAAI;AACb,QAAA,OAAO,IAAI,IAAI;AACf,QAAA,UAAU,IAAI,IAAI;QAClB,OAAO,IAAI,IAAI,CAClB;AACH;AAEA;;;;;;;;;;;;;;;;;;;;;;AAsBG;AACG,SAAU,iBAAiB,CAAC,KAAc,EAAA;AAC9C,IAAA,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AAC1C,QAAA,OAAO,KAAK;;AAGd,IAAA,OAAO,KAAK,CAAC,KAAK,CAChB,CAAC,IAAI,KACH,OAAO,IAAI,KAAK,QAAQ;AACxB,QAAA,IAAI,KAAK,IAAI;AACb,QAAA,YAAY,IAAI,IAAI;AACpB,QAAA,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC;QAC7B,OAAO,IAAI,IAAI,CAClB;AACH;AAEA;;;;;;;;;;;;;;;;;;;;;;;;AAwBG;AACG,SAAU,kBAAkB,CAChC,KAA0B,EAC1B,QAAiB,EACjB,YAA4C,QAAQ,EAAA;AAEpD,IAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;AAAE,QAAA,OAAO,IAAI;IAE5D,MAAM,WAAW,GAAG;AACjB,SAAA,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,IAAI,IAAI,CAAC,EAAE;AAChD,SAAA,GAAG,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAE/B,IAAA,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;AAC5B,QAAA,IAAI,QAAQ,IAAI,SAAS,KAAK,MAAM,EAAE;AACpC,YAAA,OAAO,IAAI;;AAGb,QAAA,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;QAC7C,IAAI,SAAS,EAAE;YACb,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;;aACjC;AACL,YAAA,OAAO,IAAI;;;IAIf,OAAO,SAAS,KAAK;AACnB,UAAE,WAAW,CAAC,CAAC;UACb,WAAW;AACjB;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCG;AACa,SAAA,QAAQ,CACtB,EAAK,EACL,KAAa,EAAA;AAOb,IAAA,IAAI,KAAK,GAAG,CAAC,EAAE;AACb,QAAA,OAAO,CAAC,IAAI,CAAC,8EAA8E,CAAC;QAC5F,KAAK,GAAG,GAAG;;AAGb,IAAA,IAAI,SAAoD;AACxD,IAAA,IAAI,QAAmC;AACvC,IAAA,IAAI,QAA8B;AAElC,IAAA,MAAM,iBAAiB,GAAG,UAAsC,GAAG,IAAmB,EAAA;QACpF,QAAQ,GAAG,IAAI;QACf,QAAQ,GAAG,IAAI;AAEf,QAAA,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,YAAY,CAAC,SAAS,CAAC;;;AAIzB,QAAA,IAAI,KAAK,KAAK,CAAC,EAAE;AACf,YAAA,IAAI;AACF,gBAAA,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;;YACpB,OAAO,KAAK,EAAE;AACd,gBAAA,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC;;YAE7D;;AAGF,QAAA,SAAS,GAAG,UAAU,CAAC,MAAK;AAC1B,YAAA,IAAI;AACF,gBAAA,IAAI,QAAQ,KAAK,SAAS,EAAE;AAC1B,oBAAA,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;;;YAE9B,OAAO,KAAK,EAAE;AACd,gBAAA,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC;;oBACnD;gBACR,SAAS,GAAG,SAAS;gBACrB,QAAQ,GAAG,SAAS;;SAEvB,EAAE,KAAK,CAAC;AACX,KAAC;IAED,iBAAiB,CAAC,MAAM,GAAG,YAAA;AACzB,QAAA,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,YAAY,CAAC,SAAS,CAAC;YACvB,SAAS,GAAG,SAAS;YACrB,QAAQ,GAAG,SAAS;;AAExB,KAAC;IAED,iBAAiB,CAAC,KAAK,GAAG,YAAA;QACxB,IAAI,SAAS,KAAK,SAAS,IAAI,QAAQ,KAAK,SAAS,EAAE;YACrD,YAAY,CAAC,SAAS,CAAC;AACvB,YAAA,IAAI;AACF,gBAAA,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC;;YAC5B,OAAO,KAAK,EAAE;AACd,gBAAA,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC;;oBACnD;gBACR,SAAS,GAAG,SAAS;gBACrB,QAAQ,GAAG,SAAS;;;AAG1B,KAAC;IAED,iBAAiB,CAAC,OAAO,GAAG,YAAA;QAC1B,OAAO,SAAS,KAAK,SAAS;AAChC,KAAC;AAED,IAAA,OAAO,iBAAiB;AAC1B;AAEA;;;;;;;;AAQG;AACG,SAAU,eAAe,CAAC,KAAwB,EAAA;AACtD,IAAA,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACxB,QAAA,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AACtB,YAAA,OAAO,KAAK;;AAGd,QAAA,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,CAAC;;IAGhD,OAAO,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE;AACzD;AAEA,MAAM,YAAY,GAAG,mBAAmB;AACxC,MAAM,WAAW,GAAG,cAAc;AAClC,MAAM,MAAM,GAAG,mBAAmB;AAElC,SAAS,iBAAiB,CAAC,CAAS,EAAE,CAAS,EAAA;AAC7C,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjC,QAAA,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;QACpC,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW,IAAI,MAAM;;AAEhC,IAAA,OAAO,CAAC;AACV;AACA,SAAS,OAAO,CAAC,CAAS,EAAA;AACxB,IAAA,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC;AACzC;AAEM,SAAU,0BAA0B,CACxC,IAAc,EACd,KAAoC,EACpC,QAA8B,EAC9B,OAAA,GAAmB,IAAI,EAAA;AAEvB,IAAA,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC;AAAE,QAAA,OAAO,EAAE;IAEzC,IAAI,OAAO,EAAE;QACX,IAAI,CAAC,GAAG,YAAY;AACpB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAQ;AACxB,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC;AAC9B,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,KAAK,CAAC;AAC/B,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,GAAG,CAAC;;QAE/B,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,CAAO,IAAA,EAAA,IAAI,CAAC,MAAM,CAAE,CAAA,CAAC;AAC9C,QAAA,OAAO,OAAO,CAAC,CAAC,CAAC;;SACZ;QACL,IAAI,CAAC,GAAG,EAAE;AACV,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAQ;YACxB,IAAI,CAAC,GAAG,YAAY;AACpB,YAAA,CAAC,GAAG,iBAAiB,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,MAAM,QAAQ,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC;YAC1D,CAAC,IAAI,CAAC;;QAER,IAAI,OAAO,GAAG,YAAY;QAC1B,OAAO,GAAG,iBAAiB,CAAC,OAAO,EAAE,CAAO,IAAA,EAAA,IAAI,CAAC,MAAM,CAAE,CAAA,CAAC;QAC1D,CAAC,IAAI,OAAO;AACZ,QAAA,OAAO,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC;;AAE9B;;;;"}