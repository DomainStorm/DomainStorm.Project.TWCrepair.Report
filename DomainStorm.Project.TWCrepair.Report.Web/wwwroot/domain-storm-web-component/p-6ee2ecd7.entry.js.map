{"version":3,"names":["BrowserEnv","_isModernBrowser","_isSafariIOSDesktopMode","_isMobileDevice","_isSafariDesktop","static","constructor","this","initializeStaticData","_isInitialized","window","_userAgent","navigator","userAgent","_navigator","isModernBrowser","undefined","Promise","isSafariIOSDesktopMode","nav","platform","maxTouchPoints","isMobileDevice","MOBILE_REGEX","test","isSafariDesktop","vendor","APPLE_VENDOR_REGEX","SAFARI_REGEX","getCurrent","_instance","reset","getSummary","stormPdfViewCss","StormPdfView","assumptionMode","supportRedirect","forceIframe","url","width","height","viewTitle","omitInlineStyles","componentWillLoad","SharedStyles","applyShadowRootStylesAsync","host","render","console","log","h","style","title","src","type","Error"],"sources":["src/utils/browser-env.ts","src/components/storm-pdf-view/storm-pdf-view.css?tag=storm-pdf-view&encapsulation=shadow","src/components/storm-pdf-view/storm-pdf-view.tsx"],"sourcesContent":["import type { BrowserEnvironment } from './interface';\r\n\r\n/**\r\n * High-performance singleton class for browser environment detection with lazy evaluation\r\n */\r\nexport class BrowserEnv implements BrowserEnvironment {\r\n  // Cached detection results\r\n  private _isModernBrowser?: boolean;\r\n  private _isSafariIOSDesktopMode?: boolean;\r\n  private _isMobileDevice?: boolean;\r\n  private _isSafariDesktop?: boolean;\r\n\r\n  // Static singleton and cached browser data\r\n  private static _instance: BrowserEnv | null = null;\r\n  private static _userAgent: string;\r\n  private static _navigator: Navigator;\r\n  private static _isInitialized = false;\r\n\r\n  // Compiled regex patterns for better performance\r\n  private static readonly MOBILE_REGEX = /Mobi|Tablet|Android|iPad|iPhone/;\r\n  private static readonly APPLE_VENDOR_REGEX = /Apple/;\r\n  private static readonly SAFARI_REGEX = /Safari/;\r\n\r\n  /**\r\n   * Private constructor - use getCurrent() to get instance\r\n   */\r\n  private constructor() {\r\n    this.initializeStaticData();\r\n  }\r\n\r\n  /**\r\n   * Initialize static browser data once\r\n   */\r\n  private static initializeStaticData(): void {\r\n    if (!this._isInitialized && typeof window !== 'undefined') {\r\n      this._userAgent = window.navigator.userAgent;\r\n      this._navigator = window.navigator;\r\n      this._isInitialized = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize static data for instance\r\n   */\r\n  private initializeStaticData(): void {\r\n    BrowserEnv.initializeStaticData();\r\n  }\r\n\r\n  /**\r\n   * Detects if browser supports modern JavaScript features\r\n   */\r\n  get isModernBrowser(): boolean {\r\n    if (this._isModernBrowser === undefined) {\r\n      this._isModernBrowser = typeof window?.Promise === 'function';\r\n    }\r\n    return this._isModernBrowser;\r\n  }\r\n\r\n  /**\r\n   * Detects Safari iOS in desktop mode (iPad requesting desktop site)\r\n   */\r\n  get isSafariIOSDesktopMode(): boolean {\r\n    if (this._isSafariIOSDesktopMode === undefined) {\r\n      const nav = BrowserEnv._navigator;\r\n      this._isSafariIOSDesktopMode =\r\n        nav.platform === 'MacIntel' &&\r\n        typeof nav.maxTouchPoints === 'number' &&\r\n        nav.maxTouchPoints > 1;\r\n    }\r\n    return this._isSafariIOSDesktopMode;\r\n  }\r\n\r\n  /**\r\n   * Detects if device is mobile (includes tablets and iOS desktop mode)\r\n   */\r\n  get isMobileDevice(): boolean {\r\n    if (this._isMobileDevice === undefined) {\r\n      this._isMobileDevice =\r\n        this.isSafariIOSDesktopMode ||\r\n        BrowserEnv.MOBILE_REGEX.test(BrowserEnv._userAgent);\r\n    }\r\n    return this._isMobileDevice;\r\n  }\r\n\r\n  /**\r\n   * Detects desktop Safari browser (excludes mobile devices)\r\n   */\r\n  get isSafariDesktop(): boolean {\r\n    if (this._isSafariDesktop === undefined) {\r\n      const nav = BrowserEnv._navigator;\r\n      this._isSafariDesktop =\r\n        !this.isMobileDevice &&\r\n        typeof nav.vendor === 'string' &&\r\n        BrowserEnv.APPLE_VENDOR_REGEX.test(nav.vendor) &&\r\n        BrowserEnv.SAFARI_REGEX.test(BrowserEnv._userAgent);\r\n    }\r\n    return this._isSafariDesktop;\r\n  }\r\n\r\n  /**\r\n   * Gets the current browser environment singleton instance\r\n   * @returns {BrowserEnv} The browser environment singleton instance\r\n   */\r\n  static getCurrent(): BrowserEnv {\r\n    if (!BrowserEnv._instance) {\r\n      BrowserEnv._instance = new BrowserEnv();\r\n    }\r\n    return BrowserEnv._instance;\r\n  }\r\n\r\n  /**\r\n   * Reset singleton instance (mainly for testing)\r\n   */\r\n  static reset(): void {\r\n    BrowserEnv._instance = null;\r\n    BrowserEnv._isInitialized = false;\r\n  }\r\n\r\n  /**\r\n   * Get a summary of browser environment\r\n   */\r\n  getSummary(): BrowserEnvironment {\r\n    return {\r\n      isModernBrowser: this.isModernBrowser,\r\n      isSafariIOSDesktopMode: this.isSafariIOSDesktopMode,\r\n      isMobileDevice: this.isMobileDevice,\r\n      isSafariDesktop: this.isSafariDesktop\r\n    };\r\n  }\r\n}\r\n",":host {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}","import { Component, Element, Prop, h } from '@stencil/core';\r\nimport { BrowserEnv } from '@utils/browser-env';\r\nimport { SharedStyles } from '@utils/shared-styles';\r\n\r\n@Component({\r\n  tag: 'storm-pdf-view',\r\n  styleUrl: 'storm-pdf-view.css',\r\n  shadow: true,\r\n})\r\nexport class StormPdfView {\r\n  @Element() host: HTMLElement;\r\n  @Prop() assumptionMode: boolean = true;\r\n  @Prop() supportRedirect: boolean = false;\r\n  @Prop() forceIframe: boolean = false;\r\n  @Prop() url: string;\r\n  @Prop() width: string = '100%';\r\n  @Prop() height: string = '100%';\r\n  @Prop() viewTitle: string = '';\r\n  @Prop() omitInlineStyles: boolean = false;\r\n\r\n  async componentWillLoad() {\r\n    await SharedStyles.applyShadowRootStylesAsync(this.host, 'material');\r\n  }\r\n\r\n  render() {\r\n    if (!this.url) {\r\n      console.log('URL is not valid');\r\n      return;\r\n    }\r\n\r\n    if ((!BrowserEnv.getCurrent().isMobileDevice && BrowserEnv.getCurrent().isModernBrowser) || (this.assumptionMode && !BrowserEnv.getCurrent().isMobileDevice)) {\r\n      if (this.forceIframe || this.supportRedirect || BrowserEnv.getCurrent().isSafariDesktop) {\r\n        return <storm-html-view url={this.url} width={this.width} height={this.height} viewTitle={this.viewTitle} omitInlineStyles={this.omitInlineStyles} />;\r\n      } else {\r\n        let style: any = {};\r\n        if (!this.omitInlineStyles) {\r\n          style.width = this.width;\r\n          style.height = this.height;\r\n        }\r\n        return <embed title={this.viewTitle} src={this.url} type=\"application/pdf\" style={style} />;\r\n      }\r\n    }\r\n    throw new Error('This browser does not support embedded PDFs');\r\n  }\r\n}\r\n"],"mappings":"4FAKaA,EAEHC,iBACAC,wBACAC,gBACAC,iBAGAC,iBAAsC,KACtCA,kBACAA,kBACAA,sBAAwB,MAGxBA,oBAA+B,kCAC/BA,0BAAqC,QACrCA,oBAA+B,SAKvC,WAAAC,GACEC,KAAKC,sB,CAMC,2BAAOA,GACb,IAAKD,KAAKE,uBAAyBC,SAAW,YAAa,CACzDH,KAAKI,WAAaD,OAAOE,UAAUC,UACnCN,KAAKO,WAAaJ,OAAOE,UACzBL,KAAKE,eAAiB,I,EAOlB,oBAAAD,GACNR,EAAWQ,sB,CAMb,mBAAIO,GACF,GAAIR,KAAKN,mBAAqBe,UAAW,CACvCT,KAAKN,wBAA0BS,QAAQO,UAAY,U,CAErD,OAAOV,KAAKN,gB,CAMd,0BAAIiB,GACF,GAAIX,KAAKL,0BAA4Bc,UAAW,CAC9C,MAAMG,EAAMnB,EAAWc,WACvBP,KAAKL,wBACHiB,EAAIC,WAAa,mBACVD,EAAIE,iBAAmB,UAC9BF,EAAIE,eAAiB,C,CAEzB,OAAOd,KAAKL,uB,CAMd,kBAAIoB,GACF,GAAIf,KAAKJ,kBAAoBa,UAAW,CACtCT,KAAKJ,gBACHI,KAAKW,wBACLlB,EAAWuB,aAAaC,KAAKxB,EAAWW,W,CAE5C,OAAOJ,KAAKJ,e,CAMd,mBAAIsB,GACF,GAAIlB,KAAKH,mBAAqBY,UAAW,CACvC,MAAMG,EAAMnB,EAAWc,WACvBP,KAAKH,kBACFG,KAAKe,uBACCH,EAAIO,SAAW,UACtB1B,EAAW2B,mBAAmBH,KAAKL,EAAIO,SACvC1B,EAAW4B,aAAaJ,KAAKxB,EAAWW,W,CAE5C,OAAOJ,KAAKH,gB,CAOd,iBAAOyB,GACL,IAAK7B,EAAW8B,UAAW,CACzB9B,EAAW8B,UAAY,IAAI9B,C,CAE7B,OAAOA,EAAW8B,S,CAMpB,YAAOC,GACL/B,EAAW8B,UAAY,KACvB9B,EAAWS,eAAiB,K,CAM9B,UAAAuB,GACE,MAAO,CACLjB,gBAAiBR,KAAKQ,gBACtBG,uBAAwBX,KAAKW,uBAC7BI,eAAgBf,KAAKe,eACrBG,gBAAiBlB,KAAKkB,gB,EC9H5B,MAAMQ,EAAkB,IAAM,uE,MCSjBC,EAAY,M,mDAEfC,eAA0B,KAC1BC,gBAA2B,MAC3BC,YAAuB,MACvBC,IACAC,MAAgB,OAChBC,OAAiB,OACjBC,UAAoB,GACpBC,iBAA4B,MAEpC,uBAAMC,SACEC,EAAaC,2BAA2BtC,KAAKuC,KAAM,W,CAG3D,MAAAC,GACE,IAAKxC,KAAK+B,IAAK,CACbU,QAAQC,IAAI,oBACZ,M,CAGF,IAAMjD,EAAW6B,aAAaP,gBAAkBtB,EAAW6B,aAAad,iBAAqBR,KAAK4B,iBAAmBnC,EAAW6B,aAAaP,eAAiB,CAC5J,GAAIf,KAAK8B,aAAe9B,KAAK6B,iBAAmBpC,EAAW6B,aAAaJ,gBAAiB,CACvF,OAAOyB,EAAiB,mBAAAZ,IAAK/B,KAAK+B,IAAKC,MAAOhC,KAAKgC,MAAOC,OAAQjC,KAAKiC,OAAQC,UAAWlC,KAAKkC,UAAWC,iBAAkBnC,KAAKmC,kB,KAC5H,CACL,IAAIS,EAAa,GACjB,IAAK5C,KAAKmC,iBAAkB,CAC1BS,EAAMZ,MAAQhC,KAAKgC,MACnBY,EAAMX,OAASjC,KAAKiC,M,CAEtB,OAAOU,EAAA,SAAOE,MAAO7C,KAAKkC,UAAWY,IAAK9C,KAAK+B,IAAKgB,KAAK,kBAAkBH,MAAOA,G,EAGtF,MAAM,IAAII,MAAM,8C","ignoreList":[]}