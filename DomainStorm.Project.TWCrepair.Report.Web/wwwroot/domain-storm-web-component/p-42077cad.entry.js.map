{"version":3,"names":["stormTabsCss","StormTabs","_tabRefs","value","dataSet","activeChanged","watchDataSetHandler","this","initDataSet","valueHandler","updateActiveTab","getTabPane","id","length","forEach","x","generateUid","active","some","renderTabPane","item","host","querySelector","tabPane","classList","add","remove","h","name","ref","elm","class","fade","show","toggle","emit","componentWillRender","render","Host","onActiveChanged","async","ev","preventDefault","stopPropagation","detail","map","componentDidLoad"],"sources":["src/components/storm-tabs/storm-tabs.css?tag=storm-tabs","src/components/storm-tabs/storm-tabs.tsx"],"sourcesContent":[":host {\r\n    display: block;\r\n}\r\n\r\n.tab-content {\r\n    padding: .25rem .5rem .5rem .5rem;\r\n}","import { Component, Element, Event, EventEmitter, h, Host, Method, Prop, Watch } from '@stencil/core';\r\nimport { generateUid } from '@utils/utils';\r\nimport type { StormNavInterface } from '../storm-navs/interface';\r\n\r\n@Component({\r\n  tag: 'storm-tabs',\r\n  styleUrl: 'storm-tabs.css',\r\n})\r\nexport class StormTabs {\r\n  private _tabRefs: Record<string, Element> = {};\r\n\r\n  @Element() host: HTMLElement;\r\n\r\n  @Prop({ mutable: true }) value?: string;\r\n  @Prop() dataSet: StormNavInterface[];\r\n\r\n  @Event({ bubbles: true }) activeChanged: EventEmitter<string>;\r\n\r\n  @Watch('dataSet')\r\n  async watchDataSetHandler() {\r\n    this.initDataSet();\r\n  }\r\n\r\n  @Watch('value')\r\n  async valueHandler() {\r\n    this.updateActiveTab();\r\n  }\r\n\r\n  @Method()\r\n  async getTabPane(id: string) {\r\n    return this._tabRefs[id];\r\n  }\r\n\r\n  initDataSet() {\r\n    if (!this.dataSet || this.dataSet.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.dataSet.forEach(x => {\r\n      if (!x.id) {\r\n        x.id = generateUid('storm-nav');\r\n      }\r\n    });\r\n\r\n    if (this.value) {\r\n      this.dataSet.forEach(x => {\r\n        x.active = x.id === this.value;\r\n      });\r\n    } else if (!this.dataSet.some(x => x.active)) {\r\n      this.dataSet[0].active = true;\r\n      this.value = this.dataSet[0].id;\r\n    }\r\n  }\r\n\r\n  renderTabPane(item: StormNavInterface) {\r\n    if (this.host.querySelector(`:scope>[slot=\"${item.id}\"]`)) {\r\n      const tabPane = this.host.querySelector(`:scope>[slot=\"${item.id}\"]`);\r\n      this._tabRefs[item.id] = tabPane;\r\n      tabPane.classList.add('tab-pane', 'fade');\r\n      if (item.active) {\r\n        tabPane.classList.add('show', 'active');\r\n      } else {\r\n        tabPane.classList.remove('show', 'active');\r\n      }\r\n      return <slot name={item.id} />;\r\n    }\r\n    return <div ref={elm => (this._tabRefs[item.id] = elm)} class={{ 'tab-pane': true, fade: true, show: item.active, active: item.active }}></div>;\r\n  }\r\n\r\n  updateActiveTab() {\r\n    if (!this.value) return;\r\n    this.dataSet.forEach(x => {\r\n      x.active = x.id === this.value;\r\n      const tabPane = this._tabRefs[x.id];\r\n      if (tabPane) {\r\n        tabPane.classList.toggle('show', x.active);\r\n        tabPane.classList.toggle('active', x.active);\r\n      }\r\n    });\r\n\r\n    this.activeChanged.emit(this.value);\r\n  }\r\n\r\n  componentWillRender() {\r\n    this._tabRefs = {};\r\n    this.initDataSet();\r\n  }\r\n\r\n  render() {\r\n    if (!this.dataSet) return;\r\n    return (\r\n      <Host>\r\n        <storm-navs\r\n          value={this.value}\r\n          dataSet={this.dataSet}\r\n          onActiveChanged={async ev => {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            this.value = ev.detail;\r\n          }}\r\n        ></storm-navs>\r\n        <div class=\"tab-content\">\r\n          {this.dataSet.map(item => {\r\n            return this.renderTabPane(item);\r\n          })}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.updateActiveTab();\r\n  }\r\n}\r\n"],"mappings":"oJAAA,MAAMA,EAAe,IAAM,qE,MCQdC,EAAS,M,oEACZC,SAAoC,G,0BAInBC,MACjBC,QAEkBC,cAG1B,yBAAMC,GACJC,KAAKC,a,CAIP,kBAAMC,GACJF,KAAKG,iB,CAIP,gBAAMC,CAAWC,GACf,OAAOL,KAAKL,SAASU,E,CAGvB,WAAAJ,GACE,IAAKD,KAAKH,SAAWG,KAAKH,QAAQS,SAAW,EAAG,CAC9C,M,CAGFN,KAAKH,QAAQU,SAAQC,IACnB,IAAKA,EAAEH,GAAI,CACTG,EAAEH,GAAKI,EAAY,Y,KAIvB,GAAIT,KAAKJ,MAAO,CACdI,KAAKH,QAAQU,SAAQC,IACnBA,EAAEE,OAASF,EAAEH,KAAOL,KAAKJ,KAAK,G,MAE3B,IAAKI,KAAKH,QAAQc,MAAKH,GAAKA,EAAEE,SAAS,CAC5CV,KAAKH,QAAQ,GAAGa,OAAS,KACzBV,KAAKJ,MAAQI,KAAKH,QAAQ,GAAGQ,E,EAIjC,aAAAO,CAAcC,GACZ,GAAIb,KAAKc,KAAKC,cAAc,iBAAiBF,EAAKR,QAAS,CACzD,MAAMW,EAAUhB,KAAKc,KAAKC,cAAc,iBAAiBF,EAAKR,QAC9DL,KAAKL,SAASkB,EAAKR,IAAMW,EACzBA,EAAQC,UAAUC,IAAI,WAAY,QAClC,GAAIL,EAAKH,OAAQ,CACfM,EAAQC,UAAUC,IAAI,OAAQ,S,KACzB,CACLF,EAAQC,UAAUE,OAAO,OAAQ,S,CAEnC,OAAOC,EAAA,QAAMC,KAAMR,EAAKR,I,CAE1B,OAAOe,EAAA,OAAKE,IAAKC,GAAQvB,KAAKL,SAASkB,EAAKR,IAAMkB,EAAMC,MAAO,CAAE,WAAY,KAAMC,KAAM,KAAMC,KAAMb,EAAKH,OAAQA,OAAQG,EAAKH,S,CAGjI,eAAAP,GACE,IAAKH,KAAKJ,MAAO,OACjBI,KAAKH,QAAQU,SAAQC,IACnBA,EAAEE,OAASF,EAAEH,KAAOL,KAAKJ,MACzB,MAAMoB,EAAUhB,KAAKL,SAASa,EAAEH,IAChC,GAAIW,EAAS,CACXA,EAAQC,UAAUU,OAAO,OAAQnB,EAAEE,QACnCM,EAAQC,UAAUU,OAAO,SAAUnB,EAAEE,O,KAIzCV,KAAKF,cAAc8B,KAAK5B,KAAKJ,M,CAG/B,mBAAAiC,GACE7B,KAAKL,SAAW,GAChBK,KAAKC,a,CAGP,MAAA6B,GACE,IAAK9B,KAAKH,QAAS,OACnB,OACEuB,EAACW,EAAI,KACHX,EAAA,cACExB,MAAOI,KAAKJ,MACZC,QAASG,KAAKH,QACdmC,gBAAiBC,MAAMC,IACrBA,EAAGC,iBACHD,EAAGE,kBACHpC,KAAKJ,MAAQsC,EAAGG,MAAM,IAG1BjB,EAAA,OAAKI,MAAM,eACRxB,KAAKH,QAAQyC,KAAIzB,GACTb,KAAKY,cAAcC,M,CAOpC,gBAAA0B,GACEvC,KAAKG,iB","ignoreList":[]}