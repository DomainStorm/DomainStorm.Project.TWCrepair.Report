{"version":3,"file":"storm-toolbar.entry.esm.js","sources":["src/components/storm-toolbar/storm-toolbar.css?tag=storm-toolbar","src/components/storm-toolbar/storm-toolbar.tsx"],"sourcesContent":[":host {\n    display: block;\n}","import { Component, Event, EventEmitter, h, Prop } from '@stencil/core';\r\nimport type { ListItemInterface } from '../../utils/interface';\r\nimport { createFunctionFromString, isModuleFunctionString, parseClassNames } from '../../utils/utils';\r\nimport type { ToolbarItemInterface } from './interface';\r\n\r\n@Component({\r\n  tag: 'storm-toolbar',\r\n  styleUrl: 'storm-toolbar.css',\r\n  shadow: false,\r\n})\r\nexport class StormToolbar {\r\n  @Prop() dataSet: ToolbarItemInterface[];\r\n  @Prop({ mutable: true }) timeStamp?: number;\r\n  @Prop({ mutable: true }) class: Record<string, boolean> | string;\r\n\r\n  @Event() toolbarAction: EventEmitter<string>;\r\n\r\n  renderToolbarItem(item: ToolbarItemInterface) {\r\n    if (typeof item.visible === 'function' && !item.visible()) return;\r\n    if (typeof item.visible === 'boolean' && !item.visible) return;\r\n    if (item.type === 'group') {\r\n      return this.renderDropdown(item);\r\n    } else if (item.type === 'divider') {\r\n      return (\r\n        <div class=\"d-inline-flex align-middle mx-2\">\r\n          <div class=\"vr\"></div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <storm-toolbar-item\r\n          dataSet={item}\r\n          onToolbarAction={e => {\r\n            this.handleAction(e, item);\r\n          }}\r\n        ></storm-toolbar-item>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleAction(_: Event, item: ToolbarItemInterface, dropdownItem: ListItemInterface = null) {\r\n    if (!item.click) return;\r\n    if (typeof item.click === 'string') {\r\n      if (!isModuleFunctionString(item.click)) {\r\n        throw new Error('Invalid function string');\r\n      }\r\n      item.click = createFunctionFromString(item.click);\r\n    }\r\n    item.click(item, dropdownItem);\r\n    this.toolbarAction.emit(dropdownItem ? dropdownItem.id : item.id);\r\n  }\r\n\r\n  renderDropdown(item: ToolbarItemInterface) {\r\n    if (!item || !item.items || item.items.length === 0) return;\r\n    return (\r\n      <div class=\"d-inline-flex align-middle\">\r\n        <storm-dropdown\r\n          dataSet={item.items}\r\n          trigger=\"click\"\r\n          toggleIcon=\"more_vert\"\r\n          type=\"none\"\r\n          selection=\"none\"\r\n          nullable={true}\r\n          showSelected={false}\r\n          onItemClick={e => {\r\n            this.handleAction(e, item, e.detail);\r\n          }}\r\n        ></storm-dropdown>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.dataSet) return;\r\n    return (\r\n      <div class=\"w-100\">\r\n        <div class={{ 'd-flex': true, ...parseClassNames(this.class) }}>\r\n          {this.dataSet.map(x => {\r\n            return this.renderToolbarItem(x);\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA,MAAM,eAAe,GAAG,sBAAsB;;MCUjC,YAAY,GAAA,MAAA;;;;;AACf,IAAA,OAAO;AACU,IAAA,SAAS;AACT,IAAA,KAAK;AAErB,IAAA,aAAa;AAEtB,IAAA,iBAAiB,CAAC,IAA0B,EAAA;QAC1C,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAAE;QAC3D,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE;AACxD,QAAA,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;AACzB,YAAA,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;;AAC3B,aAAA,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YAClC,QACE,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,iCAAiC,EAAA,EAC1C,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,IAAI,EAAO,CAAA,CAClB;;aAEH;AACL,YAAA,QACE,CACE,CAAA,oBAAA,EAAA,EAAA,OAAO,EAAE,IAAI,EACb,eAAe,EAAE,CAAC,IAAG;AACnB,oBAAA,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC;iBAC3B,EAAA,CACmB;;;AAK5B,IAAA,YAAY,CAAC,CAAQ,EAAE,IAA0B,EAAE,eAAkC,IAAI,EAAA;QACvF,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE;AACjB,QAAA,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;YAClC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACvC,gBAAA,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC;;YAE5C,IAAI,CAAC,KAAK,GAAG,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC;;AAEnD,QAAA,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,YAAY,CAAC;AAC9B,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;;AAGnE,IAAA,cAAc,CAAC,IAA0B,EAAA;AACvC,QAAA,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;YAAE;QACrD,QACE,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,4BAA4B,EAAA,EACrC,CAAA,CAAA,gBAAA,EAAA,EACE,OAAO,EAAE,IAAI,CAAC,KAAK,EACnB,OAAO,EAAC,OAAO,EACf,UAAU,EAAC,WAAW,EACtB,IAAI,EAAC,MAAM,EACX,SAAS,EAAC,MAAM,EAChB,QAAQ,EAAE,IAAI,EACd,YAAY,EAAE,KAAK,EACnB,WAAW,EAAE,CAAC,IAAG;gBACf,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC;AACtC,aAAC,EAAA,CACe,CACd;;IAIV,MAAM,GAAA;QACJ,IAAI,CAAC,IAAI,CAAC,OAAO;YAAE;AACnB,QAAA,QACE,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,OAAO,EAAA,EAChB,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAC3D,EAAA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAG;AACpB,YAAA,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAClC,SAAC,CAAC,CACE,CACF;;;;;;;"}