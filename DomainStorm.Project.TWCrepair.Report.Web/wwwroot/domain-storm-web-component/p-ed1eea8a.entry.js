import{r as t,c as e,a as s,h as l,H as a,f as o}from"./p-CSg1USUf.js";import{F as i,b as n}from"./p-B6gbR0LJ.js";import{S as r}from"./p-B0cWbvbo.js";import{b as h,p as d,s as c,h as b,j as m,k as x,l as u,f as p,m as f,r as g}from"./p-BArszdml.js";import{C as y}from"./p-Dk4EqV8F.js";const k=":host{display:block}:host dl,:host ol,:host ul{margin-bottom:0}";const C=class{constructor(s){t(this,s);this.pageChange=e(this,"pageChange")}get host(){return s(this)}pageNumber=1;totalPages;paginationSuccessivelySize=5;paginationPagesBySide=1;pageChange;pageFrom=-1;pageTo=-1;cachedPaginationItems=null;lastCalculationKey="";setPage(t){if(t<1||t>this.totalPages||t===this.pageNumber){return}this.pageNumber=t;this.cachedPaginationItems=null;this.lastCalculationKey="";this.pageChange.emit(this.pageNumber)}async componentWillLoad(){await r.applyShadowRootStylesAsync(this.host,"material")}disconnectedCallback(){this.cachedPaginationItems=null;this.lastCalculationKey=""}calculatePageRange(){if(this.totalPages<=0){this.pageFrom=1;this.pageTo=0;return}if(this.pageNumber>this.totalPages){this.pageNumber=this.totalPages}if(this.pageNumber<1){this.pageNumber=1}if(this.totalPages<=this.paginationSuccessivelySize){this.pageFrom=1;this.pageTo=this.totalPages;return}const t=Math.floor(this.paginationSuccessivelySize/2);this.pageFrom=Math.max(1,this.pageNumber-t);this.pageTo=Math.min(this.totalPages,this.pageFrom+this.paginationSuccessivelySize-1);if(this.pageTo-this.pageFrom+1<this.paginationSuccessivelySize){this.pageFrom=Math.max(1,this.pageTo-this.paginationSuccessivelySize+1)}}componentWillRender(){this.calculatePageRange()}getPaginationItems(){const t=`${this.pageNumber}-${this.totalPages}-${this.paginationSuccessivelySize}-${this.paginationPagesBySide}`;if(this.lastCalculationKey===t&&this.cachedPaginationItems){return this.cachedPaginationItems}const e=[];if(this.pageFrom>1){let t=this.paginationPagesBySide;if(t>=this.pageFrom)t=this.pageFrom-1;for(let s=1;s<=t;s++){e.push({page:s})}if(this.pageFrom-1===t+1){e.push({page:this.pageFrom-1})}else if(this.pageFrom-1>t){e.push({title:"..."})}}for(let t=this.pageFrom;t<=this.pageTo;t++){e.push({page:t})}if(this.totalPages>this.pageTo){let t=this.totalPages-(this.paginationPagesBySide-1);if(this.pageTo>=t)t=this.pageTo+1;if(this.pageTo+1===t-1){e.push({page:this.pageTo+1})}else{e.push({title:"..."})}for(let s=t;s<=this.totalPages;s++){e.push({page:s})}}this.cachedPaginationItems=e;this.lastCalculationKey=t;return e}render(){const t=this.getPaginationItems();return l(a,{key:"1767d9d311f5e8a9a5538ec69a83df2984b73879"},l("ul",{key:"5319b6cdcee8dfed9b6995f2d9e7742b4d6d6329",class:"pagination pagination-primary"},l("li",{key:"461cfb1f2094e1a4f08a2e02bc1af732362b559f",class:"page-item"},l("a",{key:"8f3bf2fca354507915ca577163dd0169230d296b",class:"page-link",href:"javascript:;","aria-label":"上一頁",onClick:()=>{const t=this.pageNumber===1?this.totalPages:this.pageNumber-1;this.setPage(t)}},l("span",{key:"c80196d0b3fcfcdd4c60856dd15ec45ee32fa466","aria-hidden":"true"},l(i,{key:"751e0b0729e2ac84b4a0c4760abdecbc49dc8a84"},"keyboard_arrow_left")))),t.map(((t,e)=>{const s=t.page===this.pageNumber;const a=t.page==null;return l("li",{key:t.page?`page-${t.page}`:`ellipsis-${e}`,class:{"page-item":true,active:s,disabled:a},onClick:()=>{if(t.page&&!s)this.setPage(t.page)}},l("a",{class:"page-link",href:"javascript:;","aria-current":s?"page":undefined,"aria-label":t.page?`第 ${t.page} 頁`:undefined},t.title||t.page?.toString()))})),l("li",{key:"35091e7b363a0614ed9a0340a7a6f5895853a04d",class:"page-item"},l("a",{key:"0df275a6139edb7bda86a7a6fe8df8bc955f6a70",class:"page-link",href:"javascript:;","aria-label":"下一頁",onClick:()=>{const t=this.pageNumber===this.totalPages?1:this.pageNumber+1;this.setPage(t)}},l("span",{key:"f9dd58d057ca72ba9086fcf25810108bee938e7e","aria-hidden":"true"},l(i,{key:"6a4d5ecbfbc043912a94f05ba2d53cbe65d85b9a"},"keyboard_arrow_right"))))))}};C.style=k;const w=":host{display:block}:host .group-item>th{cursor:auto}:host .group-item>th>div{line-height:1;margin:0.25rem}:host span.detail-title{display:inline-block;min-width:75px;font-weight:bold}:host .d-table-none{display:none !important}:host .d-table-cell{display:table-cell !important}:host .storm-table-4xs .d-table-4xs-none,:host .storm-table-3xs .d-table-4xs-none,:host .storm-table-xxs .d-table-4xs-none,:host .storm-table-xs .d-table-4xs-none,:host .storm-table-sm .d-table-4xs-none,:host .storm-table-md .d-table-4xs-none,:host .storm-table-lg .d-table-4xs-none,:host .storm-table-xl .d-table-4xs-none,:host .storm-table-xxl .d-table-4xs-none,:host .storm-table-3xl .d-table-4xs-none,:host .storm-table-4xl .d-table-4xs-none{display:none !important}:host .storm-table-4xs .d-table-4xs-cell,:host .storm-table-3xs .d-table-4xs-cell,:host .storm-table-xxs .d-table-4xs-cell,:host .storm-table-xs .d-table-4xs-cell,:host .storm-table-sm .d-table-4xs-cell,:host .storm-table-md .d-table-4xs-cell,:host .storm-table-lg .d-table-4xs-cell,:host .storm-table-xl .d-table-4xs-cell,:host .storm-table-xxl .d-table-4xs-cell,:host .storm-table-3xl .d-table-4xs-cell,:host .storm-table-4xl .d-table-4xs-cell{display:table-cell !important}:host .storm-table-3xs .d-table-3xs-none,:host .storm-table-xxs .d-table-3xs-none,:host .storm-table-xs .d-table-3xs-none,:host .storm-table-sm .d-table-3xs-none,:host .storm-table-md .d-table-3xs-none,:host .storm-table-lg .d-table-3xs-none,:host .storm-table-xl .d-table-3xs-none,:host .storm-table-xxl .d-table-3xs-none,:host .storm-table-3xl .d-table-3xs-none,:host .storm-table-4xl .d-table-3xs-none{display:none !important}:host .storm-table-3xs .d-table-3xs-cell,:host .storm-table-xxs .d-table-3xs-cell,:host .storm-table-xs .d-table-3xs-cell,:host .storm-table-sm .d-table-3xs-cell,:host .storm-table-md .d-table-3xs-cell,:host .storm-table-lg .d-table-3xs-cell,:host .storm-table-xl .d-table-3xs-cell,:host .storm-table-xxl .d-table-3xs-cell,:host .storm-table-3xl .d-table-3xs-cell,:host .storm-table-4xl .d-table-3xs-cell{display:table-cell !important}:host .storm-table-xxs .d-table-xxs-none,:host .storm-table-xs .d-table-xxs-none,:host .storm-table-sm .d-table-xxs-none,:host .storm-table-md .d-table-xxs-none,:host .storm-table-lg .d-table-xxs-none,:host .storm-table-xl .d-table-xxs-none,:host .storm-table-xxl .d-table-xxs-none,:host .storm-table-3xl .d-table-xxs-none,:host .storm-table-4xl .d-table-xxs-none{display:none !important}:host .storm-table-xxs .d-table-xxs-cell,:host .storm-table-xs .d-table-xxs-cell,:host .storm-table-sm .d-table-xxs-cell,:host .storm-table-md .d-table-xxs-cell,:host .storm-table-lg .d-table-xxs-cell,:host .storm-table-xl .d-table-xxs-cell,:host .storm-table-xxl .d-table-xxs-cell,:host .storm-table-3xl .d-table-xxs-cell,:host .storm-table-4xl .d-table-xxs-cell{display:table-cell !important}:host .storm-table-xs .d-table-xs-none,:host .storm-table-sm .d-table-xs-none,:host .storm-table-md .d-table-xs-none,:host .storm-table-lg .d-table-xs-none,:host .storm-table-xl .d-table-xs-none,:host .storm-table-xxl .d-table-xs-none,:host .storm-table-3xl .d-table-xs-none,:host .storm-table-4xl .d-table-xs-none{display:none !important}:host .storm-table-xs .d-table-xs-cell,:host .storm-table-sm .d-table-xs-cell,:host .storm-table-md .d-table-xs-cell,:host .storm-table-lg .d-table-xs-cell,:host .storm-table-xl .d-table-xs-cell,:host .storm-table-xxl .d-table-xs-cell,:host .storm-table-3xl .d-table-xs-cell,:host .storm-table-4xl .d-table-xs-cell{display:table-cell !important}:host .storm-table-sm .d-table-sm-none,:host .storm-table-md .d-table-sm-none,:host .storm-table-lg .d-table-sm-none,:host .storm-table-xl .d-table-sm-none,:host .storm-table-xxl .d-table-sm-none,:host .storm-table-3xl .d-table-sm-none,:host .storm-table-4xl .d-table-sm-none{display:none !important}:host .storm-table-sm .d-table-sm-cell,:host .storm-table-md .d-table-sm-cell,:host .storm-table-lg .d-table-sm-cell,:host .storm-table-xl .d-table-sm-cell,:host .storm-table-xxl .d-table-sm-cell,:host .storm-table-3xl .d-table-sm-cell,:host .storm-table-4xl .d-table-sm-cell{display:table-cell !important}:host .storm-table-md .d-table-md-none,:host .storm-table-lg .d-table-md-none,:host .storm-table-xl .d-table-md-none,:host .storm-table-xxl .d-table-md-none,:host .storm-table-3xl .d-table-md-none,:host .storm-table-4xl .d-table-md-none{display:none !important}:host .storm-table-md .d-table-md-cell,:host .storm-table-lg .d-table-md-cell,:host .storm-table-xl .d-table-md-cell,:host .storm-table-xxl .d-table-md-cell,:host .storm-table-3xl .d-table-md-cell,:host .storm-table-4xl .d-table-md-cell{display:table-cell !important}:host .storm-table-lg .d-table-lg-none,:host .storm-table-xl .d-table-lg-none,:host .storm-table-xxl .d-table-lg-none,:host .storm-table-3xl .d-table-lg-none,:host .storm-table-4xl .d-table-lg-none{display:none !important}:host .storm-table-lg .d-table-lg-cell,:host .storm-table-xl .d-table-lg-cell,:host .storm-table-xxl .d-table-lg-cell,:host .storm-table-3xl .d-table-lg-cell,:host .storm-table-4xl .d-table-lg-cell{display:table-cell !important}:host .storm-table-xl .d-table-xl-none,:host .storm-table-xxl .d-table-xl-none,:host .storm-table-3xl .d-table-xl-none,:host .storm-table-4xl .d-table-xl-none{display:none !important}:host .storm-table-xl .d-table-xl-cell,:host .storm-table-xxl .d-table-xl-cell,:host .storm-table-3xl .d-table-xl-cell,:host .storm-table-4xl .d-table-xl-cell{display:table-cell !important}:host .storm-table-xxl .d-table-xxl-none,:host .storm-table-3xl .d-table-xxl-none,:host .storm-table-4xl .d-table-xxl-none{display:none !important}:host .storm-table-xxl .d-table-xxl-cell,:host .storm-table-3xl .d-table-xxl-cell,:host .storm-table-4xl .d-table-xxl-cell{display:table-cell !important}:host .storm-table-3xl .d-table-3xl-none,:host .storm-table-4xl .d-table-3xl-none{display:none !important}:host .storm-table-3xl .d-table-3xl-cell,:host .storm-table-4xl .d-table-3xl-cell{display:table-cell !important}:host .storm-table-4xl .d-table-4xl-none{display:none !important}:host .storm-table-4xl .d-table-4xl-cell{display:table-cell !important}";const v=class{constructor(s){t(this,s);this.clickRow=e(this,"clickRow")}get host(){return s(this)}table;dataSet;timeStamp;clickRow;async updateColumnCheckbox(t){if(!this.dataSet||t.type!=="checkbox")return;const e=this.getTotalChecked(t.field);const s=this.host.querySelector('th[data-field="'+t.field+'"] storm-checkbox');s.checked=e===this.table.totalRows;s.indeterminate=e>0&&e<this.table.totalRows}async updateRowCheckbox(t,e){const s=this.host.querySelector('tr[data-id="'+h(t,this.table.fieldId)+'"] storm-table-cell[data-field="'+e.field+'"]');if(s){o(s)}if(e.field===this.table.fieldSelected){await this.updateRowSelection(t)}}async updateRowSelection(t){const e=this.host.querySelector('tr[data-id="'+h(t,this.table.fieldId)+'"]');if(e)e.classList.toggle("table-primary",h(t,this.table.fieldSelected))}computeColumnClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom","font-weight-bolder":true,"text-truncate":true,"table-sorter":t.sortable,asc:this.table.sortName===t.field&&this.table.sortOrder!=="desc",desc:this.table.sortName===t.field&&this.table.sortOrder==="desc",...e||{},...t.classes||{}}}renderThead(){if(!this.table.columns)return;return l("thead",null,l("tr",null,this.table.columns.filter((t=>t.visible!==false)).map((t=>this.renderColumn(t)))))}renderColumn(t){let e=t.title;const s={"thead-xxs":t.type==="detail"||t.type==="serialNumber"||t.type==="radio"||t.type==="checkbox","detail-toggle":t.type==="detail"};if(e==null&&t.type==="checkbox"){const s=this.getTotalChecked(t.field);e=l("storm-checkbox",{type:"checkbox",indeterminate:s>0&&s<this.table.totalRows,checked:s===this.table.totalRows,onValueChanged:e=>this.handleColumnCheckChange(e,t)})}return this.renderHeaderCell(e,t,s)}renderHeaderCell(t,e,s={}){return l("th",{"data-field":e.field,scope:"col",class:this.computeColumnClasses(e,s),onClick:()=>this.handleColumnClick(e)},l("div",{class:"cell"},t),e.description&&l("div",{class:"table-description"},e.description))}handleColumnClick(t){if(!t.sortable)return;if(t.field==this.table.sortName){if(this.table.sortOrder=="desc")this.table.sortChange.emit({sortName:undefined,sortOrder:undefined});else this.table.sortChange.emit({sortName:this.table.sortName,sortOrder:"desc"})}else this.table.sortChange.emit({sortName:t.field,sortOrder:"asc"})}async handleColumnCheckChange(t,e){const s=t.detail;if(s)await this.table.checkAll(e.field);else await this.table.uncheckAll(e.field)}async initSelect(){if(!this.dataSet||!this.table.columns)return;for(const t of this.dataSet){await this.updateRowSelection(t)}}getTotalChecked(t){if(!this.table.totalChecked)return 0;return this.table.totalChecked[t]}computeCellClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom",...e||{},...t.classes||{}}}renderCell(t,e,s){const a=this.computeCellClasses(s,{"text-xs":s.type==="serialNumber","detail-toggle":s.type==="detail"});return l("td",{"data-field":s.field,class:a},this.renderCellContent(t,e,s))}renderCellContent(t,e,s){return l("storm-table-cell",{table:this.table,row:t,index:e,column:s,"time-stamp":this.timeStamp,"data-field":s.field})}renderRow(t,e){const s=h(t,this.table.fieldId);const a=h(t,this.table.fieldSelected);const o=this.table.columns.filter((t=>t.visible!==false));const i=l("tr",{"data-id":s,class:{"table-primary":a},onClick:()=>this.clickRow.emit(s)},o.map((s=>this.renderCell(t,e,s))));if(this.table.isColumnResponsive){const s=this.table.columns.find((t=>t.type==="detail"));const a=s?.classes?{...s.classes,"row-detail":true,"d-none":true}:{"row-detail":true,"d-none":true};return[i,l("tr",{class:a,"data-index":e},l("td",{class:"full-cell",colSpan:this.table.expand.visibleColumnCount},l("ul",{class:"list-group list-group-flush"},this.renderDetail(t,e))))]}return i}renderDetail(t,e){return this.table.columns.filter((t=>t.responsive===true&&t.visible!==false)).map((s=>l("li",{class:{"list-group-item":true,...s.rwdClassReversal||{}}},l("span",{class:"detail-title"},s.title),l("span",null,this.renderCellContent(t,e,s)))))}renderRows(){if(this.table.groupBy){let t="";const e=[];this.dataSet.forEach(((s,a)=>{const o=h(s,this.table.groupBy);if(o!==t){t=o;e.push(l("tr",{class:"group-item table-info"},l("th",{class:"align-middle full-cell",colSpan:this.table.expand.visibleColumnCount},o)))}e.push(this.renderRow(s,a))}));return e}return this.dataSet.map(((t,e)=>this.renderRow(t,e)))}renderBody(){if(!this.dataSet?.length){const t={"align-middle":true,"text-center":true,"full-cell":true,...this.table.classes?.["table-sm"]?{"height-100":true}:{"height-300":true}};return l("tbody",null,l("tr",null,l("td",{class:t,colSpan:this.table.expand.visibleColumnCount},l("p",{class:"p-4 h6"},"沒有找到符合的結果"))))}return l("tbody",null,this.renderRows())}render(){return l(a,{key:"2e99ed6ae3c0749917fa721462b20a4b04e69a90"},l("table",{key:"a555ef275610956179ebfea834568fc877ebb6f9",class:{...{table:true,"mb-0":true,"table-hover":!!this.table.clickRowTo},...d(this.table.classes)}},this.renderThead(),this.renderBody()))}async componentDidRender(){await this.initSelect()}};v.style=w;function S(t){if(typeof t!=="string")return false;return typeof t==="string"&&/^@[a-zA-Z0-9:-]+\('.*'\)$/.test(t.trim())}function T(t){const e=t.trim();const s=/^@([a-zA-Z0-9:-]+)\('([^']*)'\)$/;const l=s.exec(e);if(!l)return null;return{command:l[1],value:l[2]}}class N{store=new Map;maxEntries;constructor(t=1e3){this.maxEntries=t}async get(t){return this.store.get(t)||null}async set(t,e){if(this.store.size>=this.maxEntries&&!this.store.has(t)){const t=this.store.keys().next().value;if(t!==undefined){this.store.delete(t)}}this.store.set(t,e)}async delete(t){this.store.delete(t)}async clear(){this.store.clear()}get defaultKeyPrefix(){return"mem"}async size(){return this.store.size}setMaxEntries(t){this.maxEntries=t;const e=this.store.size-this.maxEntries;if(e>0){const t=[];const s=this.store.keys();for(let l=0;l<e;l++){const e=s.next().value;if(e!==undefined){t.push(e)}else{break}}t.forEach((t=>this.store.delete(t)))}}getMaxEntries(){return this.maxEntries}}const P=new y(new N);async function R(t,e=[],s={}){if(typeof t!=="string"){throw new TypeError("methodName 必須是字串")}s={cache:true,regionName:"dotnetInterop",...s};const l=`${t}:${JSON.stringify(e)}`;const a=s.cache??true;if(a){const t=await P.get(l);if(t!==null){return t}}try{const s=await(window.counterInterop?.invokeMethodAsync(t,...e));if(a){await P.set(l,s)}return s}catch(e){console.error(`[Interop] 無法呼叫 '${t}'：`,e);return"unknown"}}const $=":host{display:block}.input-group.input-group-static .form-control{background-color:white;line-height:1.25rem;padding:.25rem}.detail-button{cursor:pointer}";const j=class{constructor(s){t(this,s);this.clickCell=e(this,"clickCell");this.clickAction=e(this,"clickAction");this.valueChanged=e(this,"valueChanged");this.cellValueChanged=e(this,"cellValueChanged")}cellData;cellType="text";isDisabled=false;prependText;appendText;get host(){return s(this)}table;row;index;column;timeStamp;clickCell;clickAction;valueChanged;cellValueChanged;valueChangedHandler(t){if(this.column.field){c(this.row,this.column.field,t.detail);this.cellValueChanged.emit({id:h(this.row,this.table.fieldId),field:this.column.field,value:t.detail})}}cellValueChangedHandler(t){o(this.host)}renderSerialNumber(){return(this.table.pageNumber-1)*this.table.pageSize+this.index+1}renderDetail(){return l(n,{onToggle:t=>{const e=this.table.host.shadowRoot.querySelector('.row-detail[data-index="'+this.index+'"]');if(e){e.classList.toggle("d-none",!t)}}})}renderActionControl(){return l("storm-table-toolbar",{table:this.table,column:this.column,row:this.row,timeStamp:this.timeStamp,onClickAction:t=>{t.stopPropagation();this.clickAction.emit(t.detail)}})}renderInputControl(){return l("div",{class:"input-group input-group-static"},l("input",{class:"form-control",type:"text","aria-label":this.column.title,disabled:this.isDisabled,value:h(this.row,this.column.field),onClick:t=>t.stopPropagation(),onChange:t=>{t.stopPropagation();this.valueChanged.emit(t.target.value)}}))}renderTextareaControl(){const t=this.cellData;return l("div",{class:"input-group input-group-static"},l("textarea",{class:"form-control",disabled:this.isDisabled,cols:t.cols,rows:t.rows,title:this.column.title,value:h(this.row,this.column.field),onClick:t=>t.stopPropagation(),onChange:t=>{t.stopPropagation();this.valueChanged.emit(t.target.value)}}))}renderDropdownControl(){const t=this.cellData;const e=t.dataSet.map((t=>({...t})));return l("storm-dropdown",{disabled:this.isDisabled,label:t.label,value:h(this.row,this.column.field),dataSet:e,nullable:t.nullable??false,searchable:t.searchable??true,selection:"single",timeStamp:this.timeStamp,type:"select",onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)}})}renderDropdownTreeControl(){const t=this.cellData;let e=t.dataSet;if(t.dataSets&&b(t.dataSets)){const s=t.dataSets.find((t=>m(t.conditions)&&x(t.conditions,this.row)));if(s){e=s.value}}return l("storm-dropdown-tree",{disabled:this.isDisabled,loading:t.loading,partialLoad:t.partialLoad,label:t.label,value:h(this.row,this.column.field),text:t.fieldText?h(this.row,t.fieldText):null,dataSet:e,dataSource:t.dataSource,fieldId:t.fieldId??"id",fieldLabel:t.fieldLabel??"label",fieldChildren:t.fieldChildren??"children",expandLevel:t.expandLevel??2,nodeSelectableRule:t.nodeSelectableRule,nullable:t.nullable??false,searchable:t.searchable??true,selection:"single",timeStamp:this.timeStamp,onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)},onTextChanged:e=>{e.stopPropagation();if(t.fieldText)c(this.row,t.fieldText,e.detail)},onSearchChanged:t=>{t.stopPropagation()}})}renderCheckControl(){return l("storm-checkbox",{type:this.cellType==="checkbox"?"checkbox":"radio",disabled:this.isDisabled,checked:h(this.row,this.column.field)})}renderCheckboxGroupControl(){const t=this.cellData;const e=h(this.row,this.column.field);const s=t.dataSet.filter((t=>t.visible===undefined||typeof t.visible==="function"&&t.visible(this.row)||typeof t.visible==="boolean"&&t.visible)).map((t=>({id:t.id,label:t.label,labelClasses:t.labelClasses,checked:t.checked,disabled:t.disabled})));return l("div",{class:"input-group input-group-static"},l("storm-checkbox-group",{disabled:this.isDisabled,type:t.groupType,value:e,dataSet:s,isSwitch:t.isSwitch??false,isInline:t.isInline??true,onValueChanged:t=>{t.stopPropagation();this.valueChanged.emit(t.detail)}}))}renderCellContent(){switch(this.cellType){case"action":return this.renderActionControl();case"input":return this.renderInputControl();case"checkbox":case"radio":return this.renderCheckControl();case"textarea":return this.renderTextareaControl();case"dropdown":return this.renderDropdownControl();case"dropdownTree":return this.renderDropdownTreeControl();case"checkboxGroup":return this.renderCheckboxGroupControl();case"serialNumber":return this.renderSerialNumber();case"detail":return this.renderDetail();case"text":return this.renderCellValue();default:return null}}renderCell(){if(!this.prependText&&!this.appendText){return this.renderCellContent()}else{return l("div",{class:"d-flex flex-row gap-1 align-items-center"},this.prependText&&l("span",null,this.prependText),this.renderCellContent(),this.appendText&&l("span",null,this.appendText))}}renderCellValue(){let t=h(this.row,this.column.field);if(typeof this.column.render==="function"){t=this.column.render(t,this.row,this.index)}else{if(Array.isArray(t)){t=t.filter((t=>t!=null&&t!=="")).join("、")}if(this.table.escape&&typeof t!=="boolean"&&t!=null){t=u(t)}if(t!=null&&this.column.transform&&this.column.transform[t.toString()]){t=this.column.transform[t]}else if(t&&this.table.searchable&&this.table.searchText){t=p(t,this.table.searchText)}}const e=this.column.cellTemplate||this.table.cellTemplate;const s=t!=null&&t.toString().trim().length>0?t:"-";return l("span",{innerHTML:f(e,{value:s,row:this.row,index:this.index})})}async componentWillRender(){if(!this.column){this.cellType="text";this.cellData=undefined;this.isDisabled=false;this.prependText=undefined;this.appendText=undefined;return}const[t,e]=await Promise.all([this.resolvePropertyValueAsync(this.column,"type"),this.resolvePropertyValueAsync(this.column,"data")]);this.cellType=t||"text";this.cellData=e;if(e&&typeof e==="object"&&!Array.isArray(e)){const[s,l,a]=await Promise.all([this.resolvePropertyValueAsync(e,"disabled"),this.resolvePropertyValueAsync(e,"prependText"),this.resolvePropertyValueAsync(e,"appendText")]);this.isDisabled=s??false;this.prependText=l;this.appendText=a;if(this.isDisabled&&(t==="input"||t==="textarea")){this.cellType="text"}}else{this.isDisabled=false;this.prependText=undefined;this.appendText=undefined}}async resolvePropertyValueAsync(t,e){const s=g(t,e,[this.row,this.index,this.column]);if(S(s)){const t=T(s);if(t.command==="Invoke:DotNet"){const e=h(this.row,this.table?.fieldId);try{return await R(t.value,[e,this.index,this.column.field],{cache:true,regionName:this.table.uid})}catch(t){console.error("InvokeDotNetMethod 執行失敗",t);throw t}}if(t.command==="Get:Field"){return h(this.row,t.value)}}if(m(s)){return x(s,this.row)}if(b(s)){for(const t of s){if(m(t.conditions)&&x(t.conditions,this.row)){return t.value}}return undefined}if(s instanceof Promise){try{const t=await s;return t}catch(t){console.error("屬性 Promise 解析失敗",t);throw t}}return s}render(){return l(a,{key:"19b233f3fafbc444b2ba071e53dac97f6984d29b",onClick:t=>{if(this.cellType==="checkbox"||this.cellType==="radio"){const e=this.cellData;if(e&&e.disabled){t.stopPropagation();t.preventDefault();return}}this.clickCell.emit({id:h(this.row,this.table.fieldId),field:this.column.field})}},this.renderCell())}};j.style=$;export{C as storm_pagination,v as storm_table_body,j as storm_table_cell};
//# sourceMappingURL=p-ed1eea8a.entry.js.map