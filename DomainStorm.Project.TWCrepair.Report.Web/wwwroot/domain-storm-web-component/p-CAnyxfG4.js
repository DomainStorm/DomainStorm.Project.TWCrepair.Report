class t{static materialDashboardStyles=null;static appliedHosts=new WeakSet;static isInitialized=!1;static initializationPromise=null;static async initializeAsync(){if(!this.isInitialized)return this.initializationPromise||(this.initializationPromise=this.performInitialization()),this.initializationPromise}static extractCssFromExistingSheet(){const t=Array.from(document.styleSheets);for(const s of t)if(s.href?.includes("material-dashboard"))try{return Array.from(s.cssRules).map((t=>t.cssText)).join("\n")}catch{return null}return null}static async performInitialization(){if(!("CSSStyleSheet"in globalThis)||!("adoptedStyleSheets"in Document.prototype))return console.warn("SharedStyles: Constructable Stylesheets not supported"),void(this.isInitialized=!0);try{const t=this.extractCssFromExistingSheet();if(t){const s=new CSSStyleSheet;return await s.replace(t),this.materialDashboardStyles=s,void(this.isInitialized=!0)}console.warn("SharedStyles: material-dashboard.css not found or not accessible. Ensure it is loaded via <link> tag."),this.isInitialized=!0}catch(t){throw console.error("Failed to initialize StyleSheets:",t),this.initializationPromise=null,t}}static getStyleSheet(t){return"material"===t?this.materialDashboardStyles:null}static async applyShadowRootStylesAsync(t,...s){if(s.length&&t?.shadowRoot&&!this.appliedHosts.has(t))try{const e=performance.now();await this.initializeAsync();const i=this.getRequestedSheets(s);i.length>0&&this.applyStyleSheets(t,i);const a=performance.now()-e;a>50&&console.warn(`Style application took ${a.toFixed(2)}ms for component:`,t.tagName)}catch(t){console.error("Failed to apply shadow root styles:",t)}}static getRequestedSheets(t){return t.map((t=>this.getStyleSheet(t))).filter((t=>null!==t))}static applyStyleSheets(t,s){try{const e=t.shadowRoot,i=e.adoptedStyleSheets||[],a=s.filter((t=>!i.includes(t)));a.length>0&&(e.adoptedStyleSheets=[...i,...a]),this.appliedHosts.add(t)}catch(t){throw console.error("Failed to apply stylesheets:",t),t}}static removeStyles(t){if(t?.shadowRoot&&this.appliedHosts.has(t))try{const s=t.shadowRoot;if(this.materialDashboardStyles&&s.adoptedStyleSheets){const t=s.adoptedStyleSheets.filter((t=>t!==this.materialDashboardStyles));t.length!==s.adoptedStyleSheets.length&&(s.adoptedStyleSheets=t)}}catch(t){console.error("Failed to remove styles:",t)}finally{this.appliedHosts.delete(t)}}static async preloadStyles(){try{await this.initializeAsync()}catch(t){console.warn("Style preloading failed:",t)}}static isReady(){return this.isInitialized}}export{t as S}