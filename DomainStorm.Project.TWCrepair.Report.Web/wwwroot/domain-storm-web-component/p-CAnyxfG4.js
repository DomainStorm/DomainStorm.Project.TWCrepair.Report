class t{static materialDashboardStyles=null;static appliedHosts=new WeakSet;static isInitialized=false;static initializationPromise=null;static async initializeAsync(){if(this.isInitialized)return;if(this.initializationPromise){return this.initializationPromise}this.initializationPromise=this.performInitialization();return this.initializationPromise}static extractCssFromExistingSheet(){const t=Array.from(document.styleSheets);for(const e of t){if(e.href?.includes("material-dashboard")){try{const t=Array.from(e.cssRules);return t.map((t=>t.cssText)).join("\n")}catch{return null}}}return null}static async performInitialization(){if(!("CSSStyleSheet"in globalThis)||!("adoptedStyleSheets"in Document.prototype)){console.warn("SharedStyles: Constructable Stylesheets not supported");this.isInitialized=true;return}try{const t=this.extractCssFromExistingSheet();if(t){const e=new CSSStyleSheet;await e.replace(t);this.materialDashboardStyles=e;this.isInitialized=true;return}console.warn("SharedStyles: material-dashboard.css not found or not accessible. Ensure it is loaded via <link> tag.");this.isInitialized=true}catch(t){console.error("Failed to initialize StyleSheets:",t);this.initializationPromise=null;throw t}}static getStyleSheet(t){return t==="material"?this.materialDashboardStyles:null}static async applyShadowRootStylesAsync(t,...e){if(!e.length||!t?.shadowRoot){return}if(this.appliedHosts.has(t)){return}try{const s=performance.now();await this.initializeAsync();const i=this.getRequestedSheets(e);if(i.length>0){this.applyStyleSheets(t,i)}const a=performance.now()-s;if(a>50){console.warn(`Style application took ${a.toFixed(2)}ms for component:`,t.tagName)}}catch(t){console.error("Failed to apply shadow root styles:",t)}}static getRequestedSheets(t){return t.map((t=>this.getStyleSheet(t))).filter((t=>t!==null))}static applyStyleSheets(t,e){try{const s=t.shadowRoot;const i=s.adoptedStyleSheets||[];const a=e.filter((t=>!i.includes(t)));if(a.length>0){s.adoptedStyleSheets=[...i,...a]}this.appliedHosts.add(t)}catch(t){console.error("Failed to apply stylesheets:",t);throw t}}static removeStyles(t){if(!t?.shadowRoot||!this.appliedHosts.has(t))return;try{const e=t.shadowRoot;if(this.materialDashboardStyles&&e.adoptedStyleSheets){const t=e.adoptedStyleSheets.filter((t=>t!==this.materialDashboardStyles));if(t.length!==e.adoptedStyleSheets.length){e.adoptedStyleSheets=t}}}catch(t){console.error("Failed to remove styles:",t)}finally{this.appliedHosts.delete(t)}}static async preloadStyles(){try{await this.initializeAsync()}catch(t){console.warn("Style preloading failed:",t)}}static isReady(){return this.isInitialized}}export{t as S};
//# sourceMappingURL=p-CAnyxfG4.js.map