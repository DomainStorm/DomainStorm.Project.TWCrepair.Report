{"version":3,"names":["arrayMoveMutable","array","fromIndex","toIndex","startIndex","length","endIndex","item","splice","stormTableCss","StormTable","logger","createLogger","__columns","__pageDate","__cellCheckChangeTimeoutRafId","__bodyRef","__selectedInfoRef","__breakpoints","size","width","Infinity","fieldId","fieldSelected","fieldIndex","pagination","sidePagination","searchable","pageSizeMenu","pageInfo","selectedInfo","escape","classes","layout","cellTemplate","clickRowTo","selection","pageList","tableHeight","columns","dataSet","pageNumber","pageSize","searchText","sortName","sortOrder","groupBy","totalRows","totalSelected","checkedItemsSum","isColumnResponsive","expand","visibleColumnCount","timeStamp","pageNumberChange","pageSizeChange","sortChange","searchChanged","tableWillRender","rowMove","rowWillSelect","rowWillUnselect","rowSelect","rowUnselect","rowDidSelect","rowDidUnselect","rowSelectChange","selectWillChange","selectChange","selectDidChange","checkWillChange","checkChange","checkDidChange","cellWillCheck","cellWillUncheck","cellCheck","cellUncheck","cellDidCheck","cellDidUncheck","cellCheckChange","clickRow","watchDataSetHandler","newValue","oldValue","this","Date","now","deepEqual","initDataSet","rerender","watchColumnsHandler","initColumns","watchTotalSelectedHandler","_newValue","_oldValue","debouncedDisplaySelectedCount","searchChangedHandler","ev","detail","emit","pageNumberChangeHandler","pageSizeChangeHandler","sortChangeHandler","rowWillSelectHandler","unselectAll","rowSelectHandler","row","getRowById","setFieldValue","updateRowSelection","rowDidSelectHandler","rowWillUnselectHandler","rowUnselectHandler","rowDidUnselectHandler","rowSelectChangeHandler","_","debouncedRowSelectionUpdate","selectWillChangeHandler","selected","getSelected","selectChangeHandler","cellWillCheckHandler","col","getColumnByField","field","type","uncheckAll","cellCheckHandler","id","updateRowCheckbox","column","cellDidCheckHandler","cellWillUncheckHandler","cellUncheckHandler","cellDidUncheckHandler","cellCheckChangeHandler","rafId","clearTimeout","setTimeout","checkWillChangeHandler","checked","getChecked","total","checkChangeHandler","setCheckedItemsSum","updateColumnCheckbox","clickCellHandler","checkClick","clickRowHandler","getFieldValue","unselect","select","moveRow","from","to","arrayMove","forEach","index","rowIndex","dispatchCustomEvent","dispatchCellCustomEvent","cell","host","shadowRoot","querySelector","getRowAt","find","data","result","v","push","String","selectAll","filter","check","uncheck","checkAll","rowsToCheck","option","resolveColumnData","disabled","rowsToUncheck","args","resolvePropertyValue","Promise","debounce","async","forceUpdate","isSelectedInfoVisible","content","innerHTML","unchecked","isPaginationVisible","isPageSizeMenuVisible","getCheckedItemsSum","handleSearchChanged","stopPropagation","value","trim","handleColumnCheckChange","target","handleColumnClick","sortable","undefined","renderPagination","h","class","Math","ceil","onPageChange","renderPageSizeMenu","onChange","Number","currentTarget","map","page","renderSearch","FnSearchInput","placeholder","onValueChanged","renderPageInfo","renderSelectedInfo","ref","elm","renderTableTop","renderTableBottom","checkboxRadioColumns","checkboxRadioColumnsLength","dataSetLength","isStencilPagination","columnCheckedCounts","Map","set","selectedCount","sortData","fieldIdValue","fieldIndexValue","fieldSelectedValue","currentFieldId","currentFieldIndex","currentFieldSelected","generateUid","i","columnFieldValue","get","count","flattenColumnsRecursive","hasNestedColumns","some","children","maxDepth","getHeaderDepth","initColumn","responsive","unshift","visible","checkColumn","toString","depth","clonedColumns","clone","currentDepth","headerRowspan","headerColspan","getColspan","cellType","isModuleFunctionString","createFunctionFromString","includes","align","render","responsiveClassPairs","Object","entries","className","startsWith","rwdClassReversal","hasNone","cls","endsWith","hasCell","noneClass","replace","cellClass","JSON","parse","error","console","warn","cols","childDepth","Array","isArray","colspan","reduce","sum","child","_resizeObserver","responsiveResize","ResizeObserver","entry","contentRect","refreshColumnVisibility","observe","_breakpointIndex","tableWidth","tableElem","currentBreakpoint","previousBreakpoint","newBreakpointIndex","breakpointsLength","bpWidth","isLast","classList","toggle","visibleColumns","hasResponsiveHidden","columnsLength","isVisible","isColumnVisible","detailElems","querySelectorAll","shouldShow","detailElemsLength","newVisibleCount","colspanValue","fullCellElems","fullCellElemsLength","setAttribute","componentWillLoad","SharedStyles","applyShadowRootStylesAsync","disconnectedCallback","values","disconnect","componentWillRender","parseClassNames","toLowerCase","searchableColumns","searchableColumnsLength","sortKeys","sortKeyCount","sortNameValue","isDescending","sort","a","b","key","aValue","bValue","isDesc","aType","bType","localeCompare","slice","Host","border","style","height","table","componentDidRender"],"sources":["node_modules/array-move/index.js","src/components/storm-table/storm-table.scss?tag=storm-table&encapsulation=shadow","src/components/storm-table/storm-table.tsx"],"sourcesContent":["export function arrayMoveMutable(array, fromIndex, toIndex) {\r\n\tconst startIndex = fromIndex < 0 ? array.length + fromIndex : fromIndex;\r\n\r\n\tif (startIndex >= 0 && startIndex < array.length) {\r\n\t\tconst endIndex = toIndex < 0 ? array.length + toIndex : toIndex;\r\n\r\n\t\tconst [item] = array.splice(fromIndex, 1);\r\n\t\tarray.splice(endIndex, 0, item);\r\n\t}\r\n}\r\n\r\nexport function arrayMoveImmutable(array, fromIndex, toIndex) {\r\n\tarray = [...array];\r\n\tarrayMoveMutable(array, fromIndex, toIndex);\r\n\treturn array;\r\n}\r\n",":host {\n  display: block;\n  line-height: 1;\n\n  .table {\n    td,\n    th {\n      white-space: pre-wrap;\n    }\n\n    thead {\n      z-index: 1;\n\n      th {\n        padding: 0.75rem 0.5rem;\n\n        &.thead-xxs {\n          padding: 0.25rem;\n          width: 2.3rem;\n        }\n\n        &.combined-cell {\n          padding-top: 0.25rem;\n          padding-bottom: 0;\n        }\n\n        &.child-cell {\n          padding-top: 0;\n          padding-bottom: 0.25rem;\n        }\n      }\n    }\n\n    &.table-sm {\n      thead {\n        th {\n          padding: 0.5rem 0.25rem;\n\n          &.thead-xxs {\n            padding: 0.125rem;\n          }\n\n          &.combined-cell {\n            padding-top: 0.125rem;\n            padding-bottom: 0;\n          }\n\n          &.child-cell {\n            padding-top: 0.0625rem;\n            padding-bottom: 0;\n          }\n        }\n      }\n    }\n\n    .form-check > .form-check-input[type='radio'] {\n      background-color: #fff;\n      cursor: pointer;\n    }\n  }\n\n  .form-check {\n    padding: 0;\n  }\n\n  .table-sorter {\n    cursor: pointer;\n\n    > .cell {\n      display: inline-block;\n      height: 100%;\n      position: relative;\n      width: 100%;\n      line-height: 1.1;\n\n      &:before {\n        border-top: 5px solid #000;\n        bottom: 0.15rem;\n      }\n\n      &:after {\n        border-bottom: 5px solid #000;\n        border-top: 5px solid transparent;\n        top: -0.2rem;\n      }\n\n      &:after,\n      &:before {\n        content: '';\n        height: 0;\n        width: 0;\n        position: absolute;\n        right: 5px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        opacity: 0.3;\n      }\n    }\n\n    &.asc > .cell {\n      &:after {\n        opacity: 0.7;\n      }\n\n      &:before {\n        opacity: 0;\n      }\n    }\n\n    &.desc > .cell {\n      &:before {\n        opacity: 0.7;\n      }\n\n      &:after {\n        opacity: 0;\n      }\n    }\n  }\n\n  .table-layout-fixed {\n    table-layout: fixed;\n  }\n\n  .table-layout-auto {\n    table-layout: auto;\n  }\n\n  .no-records-found {\n    height: 30vh;\n  }\n\n  .fixed-table-header {\n    th {\n      position: sticky;\n      top: 0;\n    }\n\n    thead {\n      position: sticky;\n      top: 0;\n      background: white;\n\n      tr {\n        border-top-width: 0;\n      }\n    }\n  }\n\n  .table-description {\n    font-size: 0.5rem;\n    font-weight: normal !important;\n  }\n\n  .table-top,\n  .table-bottom {\n    padding: 0.5rem;\n\n    &:after {\n      clear: both;\n      content: ' ';\n      display: table;\n    }\n  }\n\n  .table-top {\n    label {\n      margin-bottom: 0;\n    }\n\n    .table-pageSizeMenu {\n      label {\n        select {\n          border-color: #f0f2f5;\n          border-radius: 0.375rem;\n          padding: 6px;\n        }\n      }\n    }\n  }\n\n  .table-selectedInfo,\n  .table-pageSizeMenu,\n  .table-pageInfo {\n    float: left;\n    color: #7b809a;\n    font-size: 0.875rem;\n  }\n\n  .table-selectedInfo,\n  .table-pageInfo {\n    margin: 0.7rem 0;\n    padding-right: 2rem;\n  }\n\n  .table-search,\n  .table-pagination {\n    float: right;\n  }\n\n  .table-search {\n    input {\n      font-size: 0.875rem;\n      color: #495057;\n      border: 1px solid #f0f2f5;\n      border-radius: 0.375rem;\n      padding: 6px 12px;\n    }\n  }\n\n  .tr {\n    &.table-sorter {\n      cursor: pointer;\n    }\n  }\n\n  tr {\n    storm-toolbar {\n      storm-button {\n        .btn {\n          width: 1.5rem;\n          height: 1.5rem;\n          padding: 0.3rem 0.3rem;\n        }\n      }\n\n      &.storm-dynamic-label {\n        storm-button {\n          .storm-button-label {\n            display: none;\n          }\n        }\n      }\n    }\n\n    &:hover {\n      storm-toolbar {\n        &.storm-dynamic-label {\n          storm-button {\n            .btn:not(.btn-icon-only) {\n              width: auto;\n              height: auto;\n              padding: 0.06rem 0.5rem 0.06rem 0.2rem;\n            }\n\n            .storm-button-label {\n              display: block;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n","import { Component, Element, Env, Event, EventEmitter, forceUpdate, h, Host, Listen, Method, Prop, State, Watch } from '@stencil/core';\nimport { FnSearchInput } from '@utils/functional/functional';\nimport { SharedStyles } from '@utils/shared-styles';\nimport {\n  arrayMove,\n  clone,\n  createFunctionFromString,\n  createLogger,\n  debounce,\n  deepEqual,\n  generateUid,\n  getFieldValue,\n  isModuleFunctionString,\n  parseClassNames,\n  resolvePropertyValue,\n  setFieldValue,\n} from '@utils/utils';\nimport type { RowMoveInterface, TableColumnInterface, TableRenderOption } from './interface';\nimport type {\n  CheckboxGroupControlOptionInterface,\n  CheckControlOptionInterface,\n  ControlOptionInterface,\n  DropdownTreeControlOptionInterface,\n  TextAreaControlOptionInterface,\n} from './storm-table-cell/interface';\n\n@Component({\n  tag: 'storm-table',\n  styleUrl: 'storm-table.scss',\n  shadow: true,\n})\nexport class StormTable {\n  private readonly logger = createLogger('storm-table', Env?.dev);\n  private __columns: TableColumnInterface[];\n  private __pageDate: object[];\n  private __cellCheckChangeTimeoutRafId: Record<string, NodeJS.Timeout> = {};\n  private __bodyRef: HTMLStormTableBodyElement;\n  private __selectedInfoRef: HTMLDivElement;\n  private readonly __breakpoints = [\n    { size: '4xs', width: 239 },\n    { size: '3xs', width: 359 },\n    { size: 'xxs', width: 479 },\n    { size: 'xs', width: 576 },\n    { size: 'sm', width: 768 },\n    { size: 'md', width: 992 },\n    { size: 'lg', width: 1200 },\n    { size: 'xl', width: 1400 },\n    { size: 'xxl', width: 1600 },\n    { size: '3xl', width: 1920 },\n    { size: '4xl', width: Infinity },\n  ];\n\n  @Element() host: HTMLElement;\n\n  @Prop({ mutable: true }) fieldId: string | number = 'id';\n  @Prop({ mutable: true }) fieldSelected: string = '__selected';\n  @Prop() fieldIndex: string = '__index';\n\n  @Prop() pagination: boolean = false;\n  @Prop() sidePagination: 'razor' | 'stencil' = 'stencil';\n  @Prop() searchable: boolean = false;\n  @Prop() pageSizeMenu: boolean = true;\n  @Prop() pageInfo: boolean = true;\n  @Prop() selectedInfo: boolean = true;\n  @Prop() escape: boolean = true;\n  @Prop({ mutable: true }) classes: Record<string, boolean> | string;\n  @Prop({ mutable: true }) layout: 'fixed' | 'auto' = 'fixed';\n\n  @Prop() cellTemplate: string = '{value}';\n\n  @Prop() clickRowTo?: 'select' | 'check';\n  @Prop() selection: 'single' | 'multiple' | 'none' = 'single';\n  @Prop() pageList: Array<number> = [5, 10, 15, 20, 25];\n  @Prop() tableHeight?: string;\n\n  @Prop({ mutable: true, reflect: false }) columns: TableColumnInterface[];\n  @Prop({ mutable: true, reflect: false }) dataSet: object[];\n  @Prop({ mutable: true }) pageNumber: number = 1;\n  @Prop({ mutable: true }) pageSize: number = 10;\n  @Prop({ mutable: true }) searchText?: string;\n  @Prop({ mutable: true }) sortName?: string | number;\n  @Prop({ mutable: true }) sortOrder?: 'asc' | 'desc';\n  @Prop({ mutable: true }) groupBy?: string;\n\n  @Prop({ mutable: true }) totalRows: number;\n  @Prop({ mutable: true }) totalSelected: number;\n  @Prop({ mutable: true, reflect: false }) checkedItemsSum: any;\n\n  @Prop({ mutable: true, reflect: false }) isColumnResponsive: boolean = false;\n\n  @Prop({ reflect: false }) expand: { visibleColumnCount: number } = { visibleColumnCount: 0 };\n\n  @State() timeStamp?: number;\n\n  @Event() pageNumberChange: EventEmitter<number>;\n  @Event() pageSizeChange: EventEmitter<number>;\n  @Event() sortChange: EventEmitter<{ sortName?: string | number; sortOrder?: 'asc' | 'desc' }>;\n  @Event() searchChanged: EventEmitter<string>;\n  @Event() tableWillRender: EventEmitter<TableRenderOption>;\n  @Event() rowMove: EventEmitter<RowMoveInterface>;\n\n  @Event() rowWillSelect: EventEmitter<string>;\n  @Event() rowWillUnselect: EventEmitter<string>;\n  @Event() rowSelect: EventEmitter<string>;\n  @Event() rowUnselect: EventEmitter<string>;\n  @Event() rowDidSelect: EventEmitter<object>;\n  @Event() rowDidUnselect: EventEmitter<object>;\n  @Event() rowSelectChange: EventEmitter<object>;\n\n  @Event() selectWillChange: EventEmitter;\n  @Event() selectChange: EventEmitter<number>;\n  @Event() selectDidChange: EventEmitter<number>;\n\n  @Event() checkWillChange: EventEmitter<string | number>;\n  @Event() checkChange: EventEmitter<{ total: number; field: string | number }>;\n  @Event() checkDidChange: EventEmitter<{ total: number; column: TableColumnInterface }>;\n\n  @Event() cellWillCheck: EventEmitter<{ id: string; field: string | number }>;\n  @Event() cellWillUncheck: EventEmitter<{ id: string; field: string | number }>;\n  @Event() cellCheck: EventEmitter<{ id: string; field: string | number }>;\n  @Event() cellUncheck: EventEmitter<{ id: string; field: string | number }>;\n  @Event() cellDidCheck: EventEmitter<{ row: object; column: TableColumnInterface }>;\n  @Event() cellDidUncheck: EventEmitter<{ row: object; column: TableColumnInterface }>;\n  @Event() cellCheckChange: EventEmitter<{ row: object; column: TableColumnInterface }>;\n\n  @Event() clickRow: EventEmitter<string>;\n\n  @Watch('dataSet')\n  watchDataSetHandler(newValue: object[], oldValue: object[]) {\n    this.timeStamp = Date.now();\n    if (deepEqual(newValue, oldValue)) {\n      return;\n    }\n    this.initDataSet();\n    this.rerender();\n  }\n\n  @Watch('columns')\n  async watchColumnsHandler(newValue: TableColumnInterface[], oldValue: TableColumnInterface[]) {\n    if (deepEqual(newValue, oldValue)) {\n      return;\n    }\n    this.initColumns();\n  }\n\n  @Watch('totalSelected')\n  watchTotalSelectedHandler(_newValue: number, _oldValue: number) {\n    this.debouncedDisplaySelectedCount();\n  }\n\n  @Listen('searchChanged')\n  searchChangedHandler(ev: CustomEvent<string>) {\n    if (this.sidePagination === 'stencil') {\n      this.searchText = ev.detail;\n    } else {\n      this.tableWillRender.emit({\n        pageNumber: this.pageNumber,\n        pageSize: this.pageSize,\n        sortName: this.sortName,\n        sortOrder: this.sortOrder,\n        searchText: ev.detail,\n      });\n    }\n  }\n\n  @Listen('pageNumberChange')\n  pageNumberChangeHandler(ev: CustomEvent<number>) {\n    if (this.sidePagination === 'stencil') {\n      this.pageNumber = ev.detail;\n    } else {\n      this.tableWillRender.emit({ pageNumber: ev.detail, pageSize: this.pageSize, sortName: this.sortName, sortOrder: this.sortOrder, searchText: this.searchText });\n    }\n  }\n\n  @Listen('pageSizeChange')\n  pageSizeChangeHandler(ev: CustomEvent<number>) {\n    if (this.sidePagination === 'stencil') {\n      this.pageSize = ev.detail;\n    } else {\n      this.tableWillRender.emit({ pageNumber: this.pageNumber, pageSize: ev.detail, sortName: this.sortName, sortOrder: this.sortOrder, searchText: this.searchText });\n    }\n  }\n\n  @Listen('sortChange')\n  sortChangeHandler(ev: CustomEvent<{ sortName?: string | number; sortOrder?: 'asc' | 'desc' }>) {\n    if (this.sidePagination === 'stencil') {\n      this.sortName = ev.detail.sortName;\n      this.sortOrder = ev.detail.sortOrder;\n    } else {\n      this.tableWillRender.emit({\n        pageNumber: this.pageNumber,\n        pageSize: this.pageSize,\n        sortName: ev.detail.sortName,\n        sortOrder: ev.detail.sortOrder,\n        searchText: this.searchText,\n      });\n    }\n  }\n\n  @Listen('rowWillSelect')\n  async rowWillSelectHandler(ev: CustomEvent<string>) {\n    if (this.sidePagination === 'stencil') {\n      if (this.selection === 'single') {\n        await this.unselectAll();\n      }\n      this.rowSelect.emit(ev.detail);\n    }\n  }\n\n  @Listen('rowSelect')\n  async rowSelectHandler(ev: CustomEvent<string>) {\n    const row = await this.getRowById(ev.detail);\n    setFieldValue(row, this.fieldSelected, true);\n    this.__bodyRef.updateRowSelection(row);\n    this.rowDidSelect.emit(row);\n  }\n\n  @Listen('rowDidSelect')\n  rowDidSelectHandler(ev: CustomEvent<object>) {\n    this.rowSelectChange.emit(ev.detail);\n  }\n\n  @Listen('rowWillUnselect')\n  rowWillUnselectHandler(ev: CustomEvent<string>) {\n    if (this.sidePagination === 'stencil') {\n      this.rowUnselect.emit(ev.detail);\n    }\n  }\n\n  @Listen('rowUnselect')\n  async rowUnselectHandler(ev: CustomEvent<string>) {\n    const row = await this.getRowById(ev.detail);\n    setFieldValue(row, this.fieldSelected, false);\n    this.__bodyRef.updateRowSelection(row);\n    this.rowDidUnselect.emit(row);\n  }\n\n  @Listen('rowDidUnselect')\n  rowDidUnselectHandler(ev: CustomEvent<object>) {\n    this.rowSelectChange.emit(ev.detail);\n  }\n\n  @Listen('rowSelectChange')\n  rowSelectChangeHandler(_: CustomEvent<object>) {\n    this.debouncedRowSelectionUpdate();\n  }\n\n  @Listen('selectWillChange')\n  async selectWillChangeHandler(_: CustomEvent) {\n    if (this.sidePagination === 'stencil') {\n      const selected = await this.getSelected();\n      this.selectChange.emit(selected.length);\n    }\n  }\n\n  @Listen('selectChange')\n  selectChangeHandler(ev: CustomEvent<number>) {\n    this.totalSelected = ev.detail;\n    this.debouncedDisplaySelectedCount();\n    this.selectDidChange.emit(ev.detail);\n  }\n\n  @Listen('cellWillCheck')\n  async cellWillCheckHandler(ev: CustomEvent<{ id: string; field: string | number }>) {\n    if (this.sidePagination === 'stencil') {\n      const col = await this.getColumnByField(ev.detail.field);\n      if (col.type === 'radio') {\n        await this.uncheckAll(col.field);\n      }\n      this.cellCheck.emit(ev.detail);\n    }\n  }\n\n  @Listen('cellCheck')\n  async cellCheckHandler(ev: CustomEvent<{ id: string; field: string | number }>) {\n    const col = await this.getColumnByField(ev.detail.field);\n    const row = await this.getRowById(ev.detail.id);\n    setFieldValue(row, col.field, true);\n    this.__bodyRef.updateRowCheckbox(row, col);\n    this.cellDidCheck.emit({ row: row, column: col });\n  }\n\n  @Listen('cellDidCheck')\n  cellDidCheckHandler(ev: CustomEvent<{ row: object; column: TableColumnInterface }>) {\n    this.cellCheckChange.emit(ev.detail);\n  }\n\n  @Listen('cellWillUncheck')\n  cellWillUncheckHandler(ev: CustomEvent<{ id: string; field: string | number }>) {\n    if (this.sidePagination === 'stencil') {\n      this.cellUncheck.emit(ev.detail);\n    }\n  }\n\n  @Listen('cellUncheck')\n  async cellUncheckHandler(ev: CustomEvent<{ id: string; field: string | number }>) {\n    const col = await this.getColumnByField(ev.detail.field);\n    const row = await this.getRowById(ev.detail.id);\n    setFieldValue(row, col.field, false);\n    this.__bodyRef.updateRowCheckbox(row, col);\n    this.cellDidUncheck.emit({ row, column: col });\n  }\n\n  @Listen('cellDidUncheck')\n  cellDidUncheckHandler(ev: CustomEvent<{ row: object; column: TableColumnInterface }>) {\n    this.cellCheckChange.emit(ev.detail);\n  }\n\n  @Listen('cellCheckChange')\n  cellCheckChangeHandler(ev: CustomEvent<{ row: object; column: TableColumnInterface }>) {\n    const col = ev.detail.column;\n    const rafId = this.__cellCheckChangeTimeoutRafId[col.field];\n\n    if (rafId) {\n      clearTimeout(rafId);\n      delete this.__cellCheckChangeTimeoutRafId[col.field];\n    }\n\n    this.__cellCheckChangeTimeoutRafId[col.field] = setTimeout(() => {\n      delete this.__cellCheckChangeTimeoutRafId[col.field];\n      this.checkWillChange.emit(col.field);\n    }, 100);\n  }\n\n  @Listen('checkWillChange')\n  async checkWillChangeHandler(ev: CustomEvent<string | number>) {\n    if (this.sidePagination === 'stencil') {\n      const checked = await this.getChecked(ev.detail);\n      this.checkChange.emit({ total: checked.length, field: ev.detail });\n    }\n  }\n\n  @Listen('checkChange')\n  async checkChangeHandler(ev: CustomEvent<{ total: number; field: string | number }>) {\n    this.setCheckedItemsSum(ev.detail.field, ev.detail.total);\n    if (ev.detail.field === this.fieldSelected) {\n      this.totalSelected = ev.detail.total;\n    }\n    const col = await this.getColumnByField(ev.detail.field);\n    await this.__bodyRef.updateColumnCheckbox(col);\n    this.checkDidChange.emit({ total: ev.detail.total, column: col });\n  }\n\n  @Listen('clickCell')\n  async clickCellHandler(ev: CustomEvent<{ id: string; field: string | number }>) {\n    const col = await this.getColumnByField(ev.detail.field);\n    if (col.type === 'checkbox' || col.type === 'radio') {\n      await this.checkClick(ev.detail.id, ev.detail.field);\n    } else {\n      this.clickRow.emit(ev.detail.id);\n    }\n  }\n\n  @Listen('clickRow')\n  async clickRowHandler(ev: CustomEvent<string>) {\n    if (this.clickRowTo === 'check') {\n      await this.checkClick(ev.detail, this.fieldSelected);\n    } else if (this.clickRowTo === 'select') {\n      const row = await this.getRowById(ev.detail);\n      getFieldValue(row, this.fieldSelected) ? this.unselect(ev.detail) : this.select(ev.detail);\n    }\n  }\n\n  @Method()\n  async moveRow(from: number, to: number) {\n    arrayMove(this.dataSet, from, to);\n    this.dataSet.forEach((row, index) => {\n      const rowIndex = getFieldValue(row, this.fieldIndex);\n      if (rowIndex !== index) {\n        this.rowMove.emit({\n          row: row,\n          from: rowIndex as number,\n          to: index,\n        });\n        setFieldValue(row, this.fieldIndex, index);\n      }\n    });\n    this.rerender();\n  }\n\n  @Method()\n  async dispatchCustomEvent(type: string, detail?: object): Promise<void> {\n    this[type].emit(detail);\n  }\n\n  @Method()\n  async dispatchCellCustomEvent(type: string, detail?: object): Promise<void> {\n    const cell = this.host.shadowRoot?.querySelector('tr[data-id=\"' + detail['id'] + '\"] storm-table-cell[data-field=\"' + detail['field'] + '\"]') as HTMLStormTableCellElement;\n    await cell.dispatchCustomEvent(type, detail);\n  }\n\n  @Method()\n  async getRowAt(index: number): Promise<object> {\n    return this.dataSet.find(row => getFieldValue(row, this.fieldIndex) === index);\n  }\n\n  @Method()\n  async getRowById(id: string | object): Promise<object> {\n    if (typeof id === 'object') return id;\n    return this.dataSet.find(row => getFieldValue(row, this.fieldId) === id);\n  }\n\n  @Method()\n  async getColumnByField(field: string | number | TableColumnInterface): Promise<TableColumnInterface> {\n    if (typeof field === 'object') return field;\n    return this.__columns.find(col => col.field === field);\n  }\n\n  @Method()\n  async getSelected(): Promise<string[]> {\n    if (this.sidePagination !== 'stencil') {\n      return null;\n    }\n\n    const data = this.dataSet || [];\n    const result: string[] = [];\n    for (const row of data) {\n      const v = getFieldValue(row, this.fieldSelected);\n      if (v != null && v === true) {\n        const id = getFieldValue(row, this.fieldId);\n        if (id != null) result.push(String(id));\n      }\n    }\n    return result;\n  }\n\n  @Method()\n  async getChecked(field: string | number): Promise<string[]> {\n    if (this.sidePagination !== 'stencil') {\n      return null;\n    }\n    const col = await this.getColumnByField(field);\n    if (!col || !col.field) return [];\n\n    const data = this.dataSet || [];\n\n    const result: string[] = [];\n    for (const row of data) {\n      const v = getFieldValue(row, col.field);\n      if (v != null && v === true) {\n        const id = getFieldValue(row, this.fieldId);\n        if (id != null) result.push(String(id));\n      }\n    }\n    return result;\n  }\n\n  @Method()\n  async select(id: string) {\n    this.rowWillSelect.emit(id);\n  }\n\n  @Method()\n  async selectAll() {\n    this.dataSet\n      .filter(row => !getFieldValue(row, this.fieldSelected))\n      .forEach(row => {\n        this.select(getFieldValue(row, this.fieldId) as string);\n      });\n  }\n\n  @Method()\n  async unselect(id: string) {\n    this.rowWillUnselect.emit(id);\n  }\n\n  @Method()\n  async unselectAll() {\n    this.dataSet\n      .filter(row => getFieldValue(row, this.fieldSelected))\n      .forEach(row => {\n        this.unselect(getFieldValue(row, this.fieldId) as string);\n      });\n  }\n\n  @Method()\n  async check(id: string, field: string | number) {\n    const row = await this.getRowById(id);\n    if (getFieldValue(row, field)) return;\n    this.cellWillCheck.emit({ id: id, field: field });\n  }\n\n  @Method()\n  async uncheck(id: string, field: string | number) {\n    const row = await this.getRowById(id);\n    if (!getFieldValue(row, field)) return;\n    this.cellWillUncheck.emit({ id: id, field: field });\n  }\n\n  @Method()\n  async checkAll(field: string | number) {\n    const col = await this.getColumnByField(field);\n    const rowsToCheck = this.dataSet.filter(row => !getFieldValue(row, field));\n\n    for (const row of rowsToCheck) {\n      const option = await this.resolveColumnData<CheckControlOptionInterface>(col, [row, getFieldValue(row, this.fieldIndex), col]);\n      if (option && option.disabled) continue;\n\n      this.check(getFieldValue(row, this.fieldId) as string, field);\n    }\n  }\n\n  @Method()\n  async uncheckAll(field: string | number) {\n    const col = await this.getColumnByField(field);\n    const rowsToUncheck = this.dataSet.filter(row => getFieldValue(row, field));\n\n    for (const row of rowsToUncheck) {\n      const option = await this.resolveColumnData<CheckControlOptionInterface>(col, [row, getFieldValue(row, this.fieldIndex), col]);\n      if (option && option.disabled) continue;\n\n      this.uncheck(getFieldValue(row, this.fieldId) as string, field);\n    }\n  }\n\n  private async resolveColumnData<T = unknown>(col: TableColumnInterface | null | undefined, args: unknown[]): Promise<T | undefined> {\n    const result = resolvePropertyValue(col, 'data', args);\n    return result instanceof Promise ? await result : result;\n  }\n\n  private readonly rerender = debounce(async () => {\n    this.timeStamp = Date.now();\n    forceUpdate(this);\n  }, 50);\n\n  private readonly debouncedDisplaySelectedCount = debounce(async () => {\n    if (!this.isSelectedInfoVisible() || !this.__selectedInfoRef) return;\n    const content = this.totalSelected ? `已選取 ${this.totalSelected} 筆` : '';\n    if (this.__selectedInfoRef.innerHTML !== content) {\n      this.__selectedInfoRef.innerHTML = content;\n    }\n  }, 50);\n\n  private readonly debouncedRowSelectionUpdate = debounce(async () => {\n    this.selectWillChange.emit();\n  }, 500);\n\n  @Method()\n  async checkClick(id: string, field: string | number | TableColumnInterface) {\n    const col = await this.getColumnByField(field);\n    const row = await this.getRowById(id);\n    if (getFieldValue(row, col.field)) {\n      if (col.type === 'radio' && (!col.data || !(col.data as CheckControlOptionInterface).unchecked)) return;\n      this.uncheck(id, col.field);\n    } else this.check(id, col.field);\n  }\n\n  isPaginationVisible(): boolean {\n    return this.__columns && this.pageInfo && this.pagination && this.__pageDate && this.__pageDate.length > 0;\n  }\n\n  isPageSizeMenuVisible(): boolean {\n    return this.pageSizeMenu && this.isPaginationVisible();\n  }\n\n  isSelectedInfoVisible(): boolean {\n    return this.selectedInfo && this.clickRowTo != null;\n  }\n\n  getCheckedItemsSum(field: string | number): number {\n    if (!this.checkedItemsSum) return 0;\n    return this.checkedItemsSum[field];\n  }\n\n  handleSearchChanged(ev: CustomEvent<string>) {\n    ev.stopPropagation();\n    const value = ev.detail?.trim();\n    if (this.searchText === value) return;\n    this.searchChanged.emit(value);\n  }\n\n  handleColumnCheckChange(ev: Event, col: TableColumnInterface) {\n    const checked = ev.target['checked'];\n    if (checked) this.checkAll(col.field);\n    else this.uncheckAll(col.field);\n  }\n\n  handleColumnClick(col: TableColumnInterface) {\n    if (!col.sortable) return;\n    if (col.field == this.sortName) {\n      if (this.sortOrder == 'desc') this.sortChange.emit({ sortName: undefined, sortOrder: undefined });\n      else this.sortChange.emit({ sortName: this.sortName, sortOrder: 'desc' });\n    } else this.sortChange.emit({ sortName: col.field, sortOrder: 'asc' });\n  }\n\n  renderPagination() {\n    if (!this.isPaginationVisible()) return;\n    return (\n      <div class=\"table-pagination\">\n        <storm-pagination\n          page-number={this.pageNumber}\n          total-pages={Math.ceil(this.totalRows / this.pageSize)}\n          onPageChange={ev => {\n            this.pageNumberChange.emit(ev.detail);\n          }}\n        ></storm-pagination>\n      </div>\n    );\n  }\n\n  renderPageSizeMenu() {\n    if (!this.isPageSizeMenuVisible()) return;\n    return (\n      <div class=\"table-pageSizeMenu\">\n        <label>\n          顯示{' '}\n          <select class=\"table-selector\" onChange={ev => this.pageSizeChange.emit(Number((ev.currentTarget as HTMLInputElement).value))}>\n            {this.pageList.map(page => {\n              return (\n                <option value={page} selected={this.pageSize == page}>\n                  {page}\n                </option>\n              );\n            })}\n          </select>{' '}\n          筆結果\n        </label>\n      </div>\n    );\n  }\n\n  renderSearch() {\n    if (!this.searchable) return;\n    return (\n      <div class=\"table-search\">\n        <FnSearchInput placeholder=\"請輸入關鍵字\" onValueChanged={ev => this.handleSearchChanged(ev)} />\n      </div>\n    );\n  }\n\n  renderPageInfo() {\n    if (!this.pageInfo) return;\n    return (\n      <div class=\"table-pageInfo\">\n        {this.searchable && this.searchText ? `篩選 ${this.__pageDate.length} 筆，` : ''}\n        {this.pagination && this.__pageDate.length > 0\n          ? `顯示第 ${(this.pageNumber - 1) * this.pageSize + 1} 至 ${this.totalRows < this.pageNumber * this.pageSize ? this.totalRows : this.pageNumber * this.pageSize} 筆，`\n          : ''}\n        共 {this.totalRows} 筆\n      </div>\n    );\n  }\n\n  renderSelectedInfo() {\n    if (!this.isSelectedInfoVisible()) return;\n    return <div ref={elm => (this.__selectedInfoRef = elm)} class=\"table-selectedInfo\"></div>;\n  }\n\n  renderTableTop() {\n    if (!this.isPageSizeMenuVisible() && !this.searchable) return;\n    return (\n      <div class=\"table-top p-1\">\n        {this.renderPageSizeMenu()}\n        {this.renderSearch()}\n      </div>\n    );\n  }\n\n  renderTableBottom() {\n    if (!this.isSelectedInfoVisible() && !this.isPaginationVisible()) return;\n    return (\n      <div class=\"table-bottom p-1\">\n        {this.renderPageInfo()}\n        {this.renderSelectedInfo()}\n        {this.renderPagination()}\n      </div>\n    );\n  }\n\n  private initDataSet(): void {\n    if (!this.dataSet?.length || !this.__columns?.length) return;\n\n    const checkboxRadioColumns = this.__columns.filter(column => column.type === 'checkbox' || column.type === 'radio');\n    const checkboxRadioColumnsLength = checkboxRadioColumns.length;\n    const dataSetLength = this.dataSet.length;\n    const isStencilPagination = this.sidePagination === 'stencil';\n    const columnCheckedCounts = new Map<string | number, number>();\n\n    if (checkboxRadioColumnsLength > 0) {\n      checkboxRadioColumns.forEach(column => {\n        columnCheckedCounts.set(column.field, 0);\n      });\n    }\n\n    let selectedCount = 0;\n\n    this.sortData(this.dataSet);\n\n    const fieldIdValue = this.fieldId;\n    const fieldIndexValue = this.fieldIndex;\n    const fieldSelectedValue = this.fieldSelected;\n\n    for (let index = 0; index < dataSetLength; index++) {\n      const row = this.dataSet[index];\n      const currentFieldId = getFieldValue(row, fieldIdValue);\n      const currentFieldIndex = getFieldValue(row, fieldIndexValue);\n      const currentFieldSelected = getFieldValue(row, fieldSelectedValue);\n\n      if (currentFieldId == null) {\n        setFieldValue(row, fieldIdValue, generateUid('row'));\n      }\n      if (currentFieldIndex == null) {\n        setFieldValue(row, fieldIndexValue, index);\n      }\n      if (currentFieldSelected == null) {\n        setFieldValue(row, fieldSelectedValue, false);\n      }\n\n      if (checkboxRadioColumnsLength > 0) {\n        for (let i = 0; i < checkboxRadioColumnsLength; i++) {\n          const column = checkboxRadioColumns[i];\n          const columnFieldValue = getFieldValue(row, column.field);\n\n          if (columnFieldValue == null) {\n            setFieldValue(row, column.field, false);\n          } else if (isStencilPagination && columnFieldValue) {\n            columnCheckedCounts.set(column.field, columnCheckedCounts.get(column.field)! + 1);\n          }\n        }\n      }\n\n      if (isStencilPagination && (currentFieldSelected || getFieldValue(row, fieldSelectedValue))) {\n        selectedCount++;\n      }\n    }\n\n    if (isStencilPagination) {\n      this.totalSelected = selectedCount;\n      this.totalRows = dataSetLength;\n\n      if (checkboxRadioColumnsLength > 0) {\n        for (const [field, count] of columnCheckedCounts) {\n          this.setCheckedItemsSum(field, count);\n        }\n      }\n    } else {\n      this.checkedItemsSum = null;\n    }\n  }\n\n  private initColumns(): void {\n    if (!this.columns) return;\n\n    this.__columns = this.flattenColumnsRecursive(this.columns);\n\n    const hasNestedColumns = this.__columns.some(col => col.children?.length);\n    const maxDepth = hasNestedColumns ? this.getHeaderDepth(this.__columns) : 1;\n\n    this.__columns.forEach((col, index) => {\n      this.initColumn(col, index, maxDepth, 1);\n    });\n\n    if (this.__columns.some(col => col.responsive === true)) {\n      this.isColumnResponsive = true;\n      this.__columns.unshift({\n        type: 'detail',\n      } as TableColumnInterface);\n    }\n\n    this.expand.visibleColumnCount = this.__columns.filter(column => column.visible !== false).length;\n\n    if (this.clickRowTo === 'check') {\n      const checkColumn = this.__columns.find(col => col.type === 'checkbox' || col.type === 'radio');\n      if (checkColumn && (!this.fieldSelected || this.fieldSelected === '__selected')) {\n        this.fieldSelected = checkColumn.field?.toString();\n      }\n    }\n\n    if (!this.dataSet) {\n      this.tableWillRender.emit({\n        pageNumber: this.pageNumber,\n        pageSize: this.pageSize,\n        sortName: this.sortName,\n        sortOrder: this.sortOrder,\n        searchText: this.searchText,\n      });\n    } else {\n      this.initDataSet();\n    }\n  }\n\n  private flattenColumnsRecursive(columns: TableColumnInterface[], depth: number = 1): TableColumnInterface[] {\n    if (!columns?.length) return [];\n\n    const clonedColumns = clone()(columns);\n    const result: TableColumnInterface[] = [];\n\n    for (const col of clonedColumns) {\n      col['__depth'] = depth;\n      result.push(col);\n\n      if (col.children?.length) {\n        result.push(...this.flattenColumnsRecursive(col.children, depth + 1));\n      }\n    }\n\n    return result;\n  }\n\n  private initColumn(col: TableColumnInterface, index: number, maxDepth: number, currentDepth: number): void {\n    col.headerRowspan = col.children?.length ? 1 : maxDepth - currentDepth + 1;\n    col.headerColspan = this.getColspan(col);\n    col.type ??= 'text';\n    if (col.cellType != null && typeof col.cellType === 'string' && isModuleFunctionString(col.cellType)) {\n      col.cellType = createFunctionFromString(col.cellType);\n    }\n    if (col.type !== 'action') {\n      col.field ??= ['checkbox', 'radio'].includes(col.type as string) ? generateUid(col.type as string) : index;\n      col.align ??= ['checkbox', 'radio', 'serialNumber'].includes(col.type as string) ? 'center' : 'left';\n\n      col.searchable ??= this.searchable;\n    }\n\n    if (typeof col.render === 'string' && isModuleFunctionString(col.render)) {\n      col.render = createFunctionFromString(col.render);\n    }\n\n    const classes = col.classes ?? {};\n    const responsiveClassPairs = Object.entries(classes).filter(\n      ([className, value]) => className.startsWith('d-table-') && className !== 'd-table-none' && className !== 'd-table-cell' && value === true,\n    );\n\n    if (responsiveClassPairs.length > 0) {\n      col.responsive = true;\n      col.rwdClassReversal = {};\n\n      const hasNone = responsiveClassPairs.some(([cls]) => cls.endsWith('-none'));\n      const hasCell = responsiveClassPairs.some(([cls]) => cls.endsWith('-cell'));\n\n      if (hasNone && (hasCell || !hasCell)) {\n        col.rwdClassReversal['d-table-none'] = classes['d-table-none'] !== true;\n      }\n      for (const [className] of responsiveClassPairs) {\n        if (className.endsWith('-cell')) {\n          const noneClass = className.replace(/-cell$/, '-none');\n          col.rwdClassReversal[noneClass] = true;\n        } else if (className.endsWith('-none')) {\n          const cellClass = className.replace(/-none$/, '-cell');\n          col.rwdClassReversal[cellClass] = true;\n        }\n      }\n    }\n\n    if (typeof col.data === 'string') {\n      if (isModuleFunctionString(col.data)) {\n        col.data = createFunctionFromString(col.data);\n      } else if (col.data.startsWith('{') && col.data.endsWith('}')) {\n        try {\n          col.data = JSON.parse(col.data) as\n            | ControlOptionInterface\n            | CheckControlOptionInterface\n            | DropdownTreeControlOptionInterface\n            | TextAreaControlOptionInterface\n            | CheckboxGroupControlOptionInterface;\n        } catch (error) {\n          console.warn('無法解析欄位 data JSON：', col.data);\n        }\n      }\n    }\n  }\n\n  private getHeaderDepth(cols: TableColumnInterface[], depth: number = 1): number {\n    let maxDepth = depth;\n\n    for (const col of cols) {\n      if (col.children?.length) {\n        const childDepth = this.getHeaderDepth(col.children, depth + 1);\n        if (childDepth > maxDepth) {\n          maxDepth = childDepth;\n        }\n      }\n    }\n\n    return maxDepth;\n  }\n\n  getColspan(col: TableColumnInterface): number {\n    if (typeof col.headerColspan === 'number') {\n      return col.headerColspan;\n    }\n\n    if (!Array.isArray(col.children) || col.children.length === 0) {\n      return 1;\n    }\n\n    const colspan = col.children.reduce((sum, child) => {\n      return sum + this.getColspan(child);\n    }, 0);\n\n    return colspan;\n  }\n\n  private _resizeObserver?: ResizeObserver;\n  private responsiveResize() {\n    if (this._resizeObserver) return;\n\n    this._resizeObserver = new ResizeObserver(entries => {\n      const entry = entries[0];\n      if (entry) {\n        const { width } = entry.contentRect;\n        this.refreshColumnVisibility(width);\n      }\n    });\n\n    this._resizeObserver.observe(this.host);\n  }\n\n  private _breakpointIndex?: number;\n  private readonly refreshColumnVisibility = debounce((tableWidth: number) => {\n    this.logger('refreshColumnVisibility', tableWidth);\n    const tableElem = this.host.shadowRoot?.querySelector('table');\n    if (!tableElem) return;\n\n    if (this._breakpointIndex != null) {\n      const currentBreakpoint = this.__breakpoints[this._breakpointIndex];\n      const previousBreakpoint = this.__breakpoints[this._breakpointIndex - 1];\n\n      if (tableWidth < currentBreakpoint.width && previousBreakpoint && tableWidth >= previousBreakpoint.width) {\n        return;\n      }\n    }\n\n    // 計算新的 breakpoint index\n    let newBreakpointIndex: number | undefined;\n    const breakpointsLength = this.__breakpoints.length;\n\n    for (let index = 0; index < breakpointsLength; index++) {\n      const { width: bpWidth } = this.__breakpoints[index];\n      const isLast = index === breakpointsLength - 1;\n      if (tableWidth >= bpWidth && (isLast || tableWidth < this.__breakpoints[index + 1].width)) {\n        newBreakpointIndex = index;\n        break;\n      }\n    }\n\n    // 批次更新 table class\n    if (newBreakpointIndex !== undefined) {\n      for (let index = 0; index < breakpointsLength; index++) {\n        const className = `storm-table-${this.__breakpoints[index].size}`;\n        tableElem.classList.toggle(className, index === newBreakpointIndex);\n      }\n    }\n\n    this._breakpointIndex = newBreakpointIndex;\n\n    // 計算可見欄位\n    const visibleColumns: TableColumnInterface[] = [];\n    let hasResponsiveHidden = false;\n    const columnsLength = this.__columns.length;\n\n    for (let i = 0; i < columnsLength; i++) {\n      const col = this.__columns[i];\n      const isVisible = this.isColumnVisible(col);\n      col['__columnVisible'] = isVisible;\n\n      if (isVisible) {\n        visibleColumns.push(col);\n      } else if (col.responsive === true) {\n        hasResponsiveHidden = true;\n      }\n    }\n\n    // 批次更新 detail toggle 和 row-detail 元素\n    if (this.__bodyRef) {\n      const detailElems = this.__bodyRef.querySelectorAll('.detail-toggle, .row-detail');\n      if (detailElems.length > 0) {\n        const shouldShow = hasResponsiveHidden;\n        const detailElemsLength = detailElems.length;\n        for (let i = 0; i < detailElemsLength; i++) {\n          detailElems[i].classList.toggle('d-table-none', !shouldShow);\n        }\n      }\n\n      // 更新 colspan 屬性\n      const newVisibleCount = hasResponsiveHidden ? visibleColumns.length : visibleColumns.filter(col => col.type !== 'detail').length;\n\n      if (this.expand.visibleColumnCount !== newVisibleCount) {\n        this.expand.visibleColumnCount = newVisibleCount;\n        const colspanValue = newVisibleCount.toString();\n        const fullCellElems = this.__bodyRef.querySelectorAll('.full-cell[colspan]');\n        const fullCellElemsLength = fullCellElems.length;\n\n        for (let i = 0; i < fullCellElemsLength; i++) {\n          fullCellElems[i].setAttribute('colspan', colspanValue);\n        }\n      }\n    }\n  }, 250);\n\n  private isColumnVisible(column: TableColumnInterface): boolean {\n    if (column.visible === false) return false;\n    if (!column.classes || column.responsive !== true) return true;\n\n    let isVisible = true;\n\n    if (column.classes['d-table-none'] === true) isVisible = false;\n    if (column.classes['d-table-cell'] === true) isVisible = true;\n\n    if (typeof this._breakpointIndex === 'number' && Array.isArray(this.__breakpoints)) {\n      for (let i = 0; i <= this._breakpointIndex; i++) {\n        const size = this.__breakpoints[i]?.size;\n        if (!size) continue;\n\n        if (column.classes[`d-table-${size}-none`] === true) isVisible = false;\n        if (column.classes[`d-table-${size}-cell`] === true) isVisible = true;\n      }\n    }\n\n    return isVisible;\n  }\n\n  setCheckedItemsSum(field: string | number, total: number) {\n    this.checkedItemsSum ??= {};\n    this.checkedItemsSum[field] = total;\n  }\n\n  async componentWillLoad() {\n    await SharedStyles.applyShadowRootStylesAsync(this.host, 'material');\n\n    this.initColumns();\n  }\n\n  disconnectedCallback() {\n    Object.values(this.__cellCheckChangeTimeoutRafId).forEach(id => {\n      if (id) clearTimeout(id);\n    });\n    this.__cellCheckChangeTimeoutRafId = {};\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n      this._resizeObserver = undefined;\n    }\n  }\n\n  componentWillRender() {\n    if (!this.dataSet || !this.__columns) return;\n\n    this.classes = parseClassNames(this.classes);\n    this.__pageDate = this.dataSet;\n\n    if (this.sidePagination === 'stencil') {\n      if (this.searchable && this.searchText) {\n        const searchText = this.searchText.toLowerCase();\n        const searchableColumns = this.__columns.filter(col => col.searchable);\n        const searchableColumnsLength = searchableColumns.length;\n\n        if (searchableColumnsLength > 0) {\n          this.__pageDate = this.__pageDate.filter(row => {\n            for (let i = 0; i < searchableColumnsLength; i++) {\n              const col = searchableColumns[i];\n              const value = getFieldValue(row, col.field);\n              if (value != null && String(value).toLowerCase().includes(searchText)) {\n                return true;\n              }\n            }\n            return false;\n          });\n        }\n      }\n\n      this.sortData(this.__pageDate);\n    }\n  }\n\n  sortData(data: object[]): void {\n    if (!data || data.length <= 1) return;\n\n    const sortKeys: (string | number)[] = [];\n    if (this.groupBy) sortKeys.push(this.groupBy);\n    if (this.sortName != null) sortKeys.push(this.sortName);\n    if (this.fieldIndex !== undefined) sortKeys.push(this.fieldIndex);\n\n    if (sortKeys.length === 0) return;\n\n    const sortKeyCount = sortKeys.length;\n    const sortNameValue = this.sortName;\n    const isDescending = this.sortOrder === 'desc';\n\n    data.sort((a, b) => {\n      for (let i = 0; i < sortKeyCount; i++) {\n        const key = sortKeys[i];\n        const aValue = getFieldValue(a, key);\n        const bValue = getFieldValue(b, key);\n\n        if (aValue === bValue) continue;\n        if (aValue == null && bValue == null) continue;\n        if (aValue == null) return -1;\n        if (bValue == null) return 1;\n\n        const isDesc = key === sortNameValue && isDescending;\n        const aType = typeof aValue;\n        const bType = typeof bValue;\n\n        if (aType === 'string' && bType === 'string') {\n          const result = (aValue as string).localeCompare(bValue as string);\n          if (result !== 0) return isDesc ? -result : result;\n        } else if (aType === 'number' && bType === 'number') {\n          return isDesc ? (bValue as number) - (aValue as number) : (aValue as number) - (bValue as number);\n        } else {\n          const result = String(aValue).localeCompare(String(bValue));\n          if (result !== 0) return isDesc ? -result : result;\n        }\n      }\n      return 0;\n    });\n  }\n\n  render() {\n    if (!this.__pageDate) return;\n    let data = this.__pageDate;\n    if (this.pagination && this.sidePagination == 'stencil') {\n      const from = (this.pageNumber - 1) * this.pageSize + 1;\n      const to = this.pageNumber * this.pageSize;\n      data = data.slice(from - 1, to);\n    }\n\n    return (\n      <Host>\n        {this.renderTableTop()}\n        <div class={{ 'text-sm': true, 'table-responsive': true, border: this.classes && !!this.classes['table-bordered'] }}>\n          <div class={{ 'table-container': true, 'fixed-table-header': !!this.tableHeight }} style={{ height: !!this.tableHeight ? this.tableHeight : 'inherit' }}>\n            <storm-table-body ref={elm => (this.__bodyRef = elm)} table={this} dataSet={data} columns={this.__columns} timeStamp={this.timeStamp}></storm-table-body>\n          </div>\n        </div>\n        {this.renderTableBottom()}\n      </Host>\n    );\n  }\n\n  componentDidRender() {\n    this.debouncedDisplaySelectedCount();\n    if (!this.__columns || !this.__bodyRef) return;\n    if (this.isColumnResponsive) {\n      this.responsiveResize();\n    }\n    this.__columns.forEach(col => {\n      this.__bodyRef.updateColumnCheckbox(col);\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}