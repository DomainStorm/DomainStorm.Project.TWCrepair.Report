import{r as e,a as s,h as t,H as i}from"./p-SZOiivfx.js";import{b as r}from"./p-BGxJrMAs.js";import{S as a}from"./p-B0cWbvbo.js";const o=".storm-carousel .center{display:block;text-align:-webkit-center}";const c=class{constructor(s){e(this,s)}get host(){return s(this)}dataSet;fade=false;wrap=true;carousel;carouselRef;videoRefs;async componentWillLoad(){await a.applyShadowRootStylesAsync(this.host,"material")}componentDidRender(){if(!this.dataSet)return;this.carousel=new r.Carousel(this.carouselRef,{wrap:this.wrap,ride:"carousel"});this.carouselRef.addEventListener("slid.bs.carousel",(e=>{this.controlInterval(this.dataSet.playListItems[e.to])}));if(this.dataSet&&this.dataSet.playListItems?.length>0){this.controlInterval(this.dataSet.playListItems[0])}this.videoRefs?.forEach((e=>{e.addEventListener("ended",(()=>{this.carousel.next()}))}))}addItem(){if(!this.dataSet)return;this.videoRefs=new Map;return this.dataSet.playListItems.map(((e,s)=>t("div",{class:s==0?"carousel-item center active":"carousel-item center","data-bs-interval":e.playDuration>0?e.playDuration*1e3:false},this.addItemElement(e))))}addItemElement=e=>{if(e.mimeType=="text/html"){return t("div",{innerHTML:e.content})}else if(e.mimeType.startsWith("image/")){return t("img",{class:"d-block",src:e.url})}else if(e.mimeType.startsWith("video/")){return t("video",{ref:s=>this.videoRefs.set(e,s),controls:true,autoplay:true},t("source",{src:e.url,type:e.mimeType}))}};controlInterval=e=>{if(e.mimeType.startsWith("video/")){this.carousel.pause();this.videoRefs.get(e).currentTime=0;this.videoRefs.get(e).play()}else{this.carousel.cycle()}};render(){return t(i,{key:"370bc1563df8a6ec30d00c0642f782b715a70638"},t("div",{key:"26d437c381ef2617a7b2558cefcb608be1e1a22a",id:"carouselControls",class:this.fade?"carousel slide carousel-fade":"carousel slide",ref:e=>this.carouselRef=e},t("div",{key:"d243e1e528e3f197db00a1f54b67e5a7ade245fa",class:"carousel-inner"},this.addItem())))}};c.style=o;export{c as storm_carousel};
//# sourceMappingURL=p-0eb63a77.entry.js.map