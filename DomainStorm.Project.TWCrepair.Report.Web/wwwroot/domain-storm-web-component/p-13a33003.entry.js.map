{"version":3,"names":["stormPaginationCss","StormPagination","pageNumber","totalPages","paginationSuccessivelySize","paginationPagesBySide","pageChange","pageFrom","pageTo","cachedPaginationItems","lastCalculationKey","setPage","newPageNumber","this","emit","componentWillLoad","SharedStyles","applyShadowRootStylesAsync","host","disconnectedCallback","calculatePageRange","halfSize","Math","floor","max","min","componentWillRender","getPaginationItems","currentKey","paginationItems","i","push","page","title","render","h","Host","key","class","href","onClick","newPage","FnIcon","map","x","index","isActive","isDisabled","active","disabled","undefined","toString","stormTableBodyCss","StormTableBody","table","dataSet","timeStamp","rowIndex","columns","clickRow","updateColumnCheckbox","col","type","checkedCount","getCheckedItemsSum","field","stormCheckbox","querySelector","isChecked","totalRows","isIndeterminate","updateRowCheckbox","row","cell","getFieldValue","fieldId","forceUpdate","fieldSelected","updateRowSelection","rowComponent","updateSelection","computeColumnClasses","classes","align","valign","sortable","children","length","asc","sortName","sortOrder","desc","renderThead","columnsByDepth","Map","visibleColumns","filter","visible","depth","has","set","get","headerRows","Array","from","entries","sort","depthA","depthB","renderTheadColumn","content","onValueChanged","ev","handleColumnCheckChange","renderHeaderCell","scope","rowspan","headerRowspan","colSpan","headerColspan","handleColumnClick","description","sortChange","checked","detail","checkAll","uncheckAll","initSelect","checkedItemsSum","renderRow","rowId","onClickRow","renderRows","groupBy","groupItem","result","groupByValue","expand","visibleColumnCount","renderBody","emptyClasses","clickRowTo","layout","parseClassNames","componentDidRender","stormTableRowCss","StormTableRow","isSelected","rowEl","classList","toggle","computeCellClasses","renderCell","cellClasses","renderCellContent","column","onCellDidValueChanged","Date","now","renderDetail","responsive","rwdClassReversal","mainRow","isColumnResponsive","detailCol","find","detailClasses"],"sources":["src/components/storm-pagination/storm-pagination.css?tag=storm-pagination&encapsulation=shadow","src/components/storm-pagination/storm-pagination.tsx","src/components/storm-table/storm-table-body/storm-table-body.scss?tag=storm-table-body","src/components/storm-table/storm-table-body/storm-table-body.tsx","src/components/storm-table/storm-table-row/storm-table-row.scss?tag=storm-table-row","src/components/storm-table/storm-table-row/storm-table-row.tsx"],"sourcesContent":[":host {\r\n  display: block;\r\n}\r\n\r\n:host dl,\r\n:host ol,\r\n:host ul {\r\n  margin-bottom: 0;\r\n}","import { Component, Element, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\r\nimport { FnIcon } from '@utils/functional/functional';\r\nimport { SharedStyles } from '@utils/shared-styles';\r\nimport type { PaginationItem } from './interface';\r\n\r\n@Component({\r\n  tag: 'storm-pagination',\r\n  styleUrl: 'storm-pagination.css',\r\n  shadow: true,\r\n})\r\nexport class StormPagination {\r\n  @Element() host: HTMLElement;\r\n  @Prop({ mutable: true }) pageNumber: number = 1;\r\n  @Prop() totalPages: number;\r\n  @Prop() paginationSuccessivelySize: number = 5;\r\n  @Prop() paginationPagesBySide = 1;\r\n\r\n  @Event() pageChange: EventEmitter<number>;\r\n\r\n  private pageFrom: number = -1;\r\n  private pageTo: number = -1;\r\n  private cachedPaginationItems: PaginationItem[] | null = null;\r\n  private lastCalculationKey: string = '';\r\n\r\n  setPage(newPageNumber: number) {\r\n    // 邊界檢查和驗證\r\n    if (newPageNumber < 1 || newPageNumber > this.totalPages || newPageNumber === this.pageNumber) {\r\n      return;\r\n    }\r\n\r\n    this.pageNumber = newPageNumber;\r\n    // 清除快取，因為頁碼已改變\r\n    this.cachedPaginationItems = null;\r\n    this.lastCalculationKey = '';\r\n    this.pageChange.emit(this.pageNumber);\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    await SharedStyles.applyShadowRootStylesAsync(this.host, 'material');\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    // 清理快取\r\n    this.cachedPaginationItems = null;\r\n    this.lastCalculationKey = '';\r\n  }\r\n\r\n  private calculatePageRange(): void {\r\n    // 提早返回避免不必要的計算\r\n    if (this.totalPages <= 0) {\r\n      this.pageFrom = 1;\r\n      this.pageTo = 0;\r\n      return;\r\n    }\r\n\r\n    // 邊界檢查和自動修正\r\n    if (this.pageNumber > this.totalPages) {\r\n      this.pageNumber = this.totalPages;\r\n    }\r\n    if (this.pageNumber < 1) {\r\n      this.pageNumber = 1;\r\n    }\r\n\r\n    // 簡化計算邏輯\r\n    if (this.totalPages <= this.paginationSuccessivelySize) {\r\n      this.pageFrom = 1;\r\n      this.pageTo = this.totalPages;\r\n      return;\r\n    }\r\n\r\n    // 計算顯示範圍\r\n    const halfSize = Math.floor(this.paginationSuccessivelySize / 2);\r\n    this.pageFrom = Math.max(1, this.pageNumber - halfSize);\r\n    this.pageTo = Math.min(this.totalPages, this.pageFrom + this.paginationSuccessivelySize - 1);\r\n\r\n    // 調整起始位置以保持固定數量的頁面\r\n    if (this.pageTo - this.pageFrom + 1 < this.paginationSuccessivelySize) {\r\n      this.pageFrom = Math.max(1, this.pageTo - this.paginationSuccessivelySize + 1);\r\n    }\r\n  }\r\n\r\n  componentWillRender() {\r\n    this.calculatePageRange();\r\n  }\r\n\r\n  private getPaginationItems(): PaginationItem[] {\r\n    // 使用快取避免重複計算\r\n    const currentKey = `${this.pageNumber}-${this.totalPages}-${this.paginationSuccessivelySize}-${this.paginationPagesBySide}`;\r\n    if (this.lastCalculationKey === currentKey && this.cachedPaginationItems) {\r\n      return this.cachedPaginationItems;\r\n    }\r\n\r\n    const paginationItems: PaginationItem[] = [];\r\n\r\n    // 左側頁面\r\n    if (this.pageFrom > 1) {\r\n      let max = this.paginationPagesBySide;\r\n      if (max >= this.pageFrom) max = this.pageFrom - 1;\r\n\r\n      for (let i = 1; i <= max; i++) {\r\n        paginationItems.push({ page: i });\r\n      }\r\n\r\n      if (this.pageFrom - 1 === max + 1) {\r\n        paginationItems.push({ page: this.pageFrom - 1 });\r\n      } else if (this.pageFrom - 1 > max) {\r\n        paginationItems.push({ title: '...' });\r\n      }\r\n    }\r\n\r\n    // 中間頁面\r\n    for (let i = this.pageFrom; i <= this.pageTo; i++) {\r\n      paginationItems.push({ page: i });\r\n    }\r\n\r\n    // 右側頁面\r\n    if (this.totalPages > this.pageTo) {\r\n      let min = this.totalPages - (this.paginationPagesBySide - 1);\r\n      if (this.pageTo >= min) min = this.pageTo + 1;\r\n\r\n      if (this.pageTo + 1 === min - 1) {\r\n        paginationItems.push({ page: this.pageTo + 1 });\r\n      } else {\r\n        paginationItems.push({ title: '...' });\r\n      }\r\n\r\n      for (let i = min; i <= this.totalPages; i++) {\r\n        paginationItems.push({ page: i });\r\n      }\r\n    }\r\n\r\n    // 快取結果\r\n    this.cachedPaginationItems = paginationItems;\r\n    this.lastCalculationKey = currentKey;\r\n\r\n    return paginationItems;\r\n  }\r\n\r\n  render() {\r\n    const paginationItems = this.getPaginationItems();\r\n\r\n    return (\r\n      <Host>\r\n        <ul class=\"pagination pagination-primary\">\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"上一頁\"\r\n              onClick={() => {\r\n                const newPage = this.pageNumber === 1 ? this.totalPages : this.pageNumber - 1;\r\n                this.setPage(newPage);\r\n              }}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_left</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n          {paginationItems.map((x, index) => {\r\n            const isActive = x.page === this.pageNumber;\r\n            const isDisabled = x.page == null;\r\n\r\n            return (\r\n              <li\r\n                key={x.page ? `page-${x.page}` : `ellipsis-${index}`}\r\n                class={{ 'page-item': true, active: isActive, disabled: isDisabled }}\r\n                onClick={() => {\r\n                  if (x.page && !isActive) this.setPage(x.page);\r\n                }}\r\n              >\r\n                <a class=\"page-link\" href=\"javascript:;\" aria-current={isActive ? 'page' : undefined} aria-label={x.page ? `第 ${x.page} 頁` : undefined}>\r\n                  {x.title || x.page?.toString()}\r\n                </a>\r\n              </li>\r\n            );\r\n          })}\r\n          <li class=\"page-item\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"javascript:;\"\r\n              aria-label=\"下一頁\"\r\n              onClick={() => {\r\n                const newPage = this.pageNumber === this.totalPages ? 1 : this.pageNumber + 1;\r\n                this.setPage(newPage);\r\n              }}\r\n            >\r\n              <span aria-hidden=\"true\">\r\n                <FnIcon>keyboard_arrow_right</FnIcon>\r\n              </span>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","@use 'sass:list';\n\n:host {\n  display: block;\n}\n\n:host .group-item {\n  > th {\n    cursor: auto;\n\n    > div {\n      line-height: 1;\n      margin: 0.25rem;\n    }\n  }\n}\n\n:host span.detail-title {\n  display: inline-block;\n  min-width: 75px;\n  font-weight: bold;\n}\n\n:host .d-table-none {\n  display: none !important;\n}\n\n:host .d-table-cell {\n  display: table-cell !important;\n}\n\nstorm-table-body .table-bordered > :not(caption) > *,\nstorm-table-body .table-bordered > :not(caption) > * > * {\n  border-width: 0;\n}\n\n// 響應式類別設定\n$sizes: 4xs, 3xs, xxs, xs, sm, md, lg, xl, xxl, 3xl, 4xl;\n\n@each $innerSize in $sizes {\n  $none-selectors: ();\n  $cell-selectors: ();\n\n  @each $size in $sizes {\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\n      $none-selectors: list.append($none-selectors, ':host .storm-table-#{$size} .d-table-#{$innerSize}-none', comma);\n    }\n\n    @if list.index($sizes, $size) >= list.index($sizes, $innerSize) {\n      $cell-selectors: list.append($cell-selectors, ':host .storm-table-#{$size} .d-table-#{$innerSize}-cell', comma);\n    }\n  }\n\n  #{$none-selectors} {\n    display: none !important;\n  }\n\n  #{$cell-selectors} {\n    display: table-cell !important;\n  }\n}\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, forceUpdate, h } from '@stencil/core';\nimport { getFieldValue, parseClassNames } from '@utils/utils';\nimport type { TableColumnInterface } from '../interface';\nimport { StormTable } from '../storm-table';\n\n@Component({\n  tag: 'storm-table-body',\n  styleUrl: 'storm-table-body.scss',\n  shadow: false,\n})\nexport class StormTableBody {\n  @Element() host: HTMLElement;\n\n  @Prop() table: StormTable;\n  @Prop({ mutable: true, reflect: false }) dataSet: object[];\n  @Prop({ mutable: true }) timeStamp?: number;\n  @Prop() rowIndex?: number;\n  @Prop({ mutable: true, reflect: false }) columns: TableColumnInterface[];\n\n  @Event() clickRow: EventEmitter<string>;\n\n  @Method()\n  async updateColumnCheckbox(col: TableColumnInterface) {\n    if (!this.dataSet || col.type !== 'checkbox') return;\n    const checkedCount = this.getCheckedItemsSum(col.field);\n    const stormCheckbox = this.host.querySelector('th[data-field=\"' + col.field + '\"] storm-checkbox') as HTMLStormCheckboxElement;\n    if (!stormCheckbox) return;\n    stormCheckbox.isChecked = checkedCount === this.table.totalRows;\n    stormCheckbox.isIndeterminate = checkedCount > 0 && checkedCount < this.table.totalRows;\n  }\n\n  @Method()\n  async updateRowCheckbox(row: object, col: TableColumnInterface) {\n    const cell = this.host.querySelector(\n      'tr[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"] storm-table-cell[data-field=\"' + col.field + '\"]',\n    ) as HTMLStormTableCellElement;\n    if (cell) {\n      forceUpdate(cell);\n    }\n    if (col.field === this.table.fieldSelected) {\n      await this.updateRowSelection(row);\n    }\n  }\n\n  @Method()\n  async updateRowSelection(row: object) {\n    const rowComponent = this.host.querySelector('storm-table-row[data-id=\"' + getFieldValue(row, this.table.fieldId) + '\"]') as HTMLElement & {\n      updateSelection: () => Promise<void>;\n    };\n    if (rowComponent) {\n      await rowComponent.updateSelection();\n    }\n  }\n\n  private computeColumnClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\n    return {\n      'text-center': col.align === 'center',\n      'text-start': !col.align || col.align === 'left',\n      'text-end': col.align === 'right',\n      'align-middle': !col.valign || col.valign === 'middle',\n      'align-top': col.valign === 'top',\n      'align-bottom': col.valign === 'bottom',\n      'font-weight-bolder': true,\n      'text-truncate': true,\n      'table-sorter': col.sortable,\n      'combined-cell': col.children && col.children.length > 0,\n      'child-cell': col['__depth'] && (col['__depth'] as number) > 1,\n      asc: this.table.sortName === col.field && this.table.sortOrder !== 'desc',\n      desc: this.table.sortName === col.field && this.table.sortOrder === 'desc',\n      ...classes,\n      ...col.classes,\n    };\n  }\n\n  renderThead() {\n    if (!this.columns) return;\n\n    const columnsByDepth = new Map<number, TableColumnInterface[]>();\n    const visibleColumns = this.columns.filter(col => col.visible !== false);\n\n    for (const col of visibleColumns) {\n      const depth = (col['__depth'] as number) || 1;\n      if (!columnsByDepth.has(depth)) {\n        columnsByDepth.set(depth, []);\n      }\n      columnsByDepth.get(depth).push(col);\n    }\n\n    const headerRows = Array.from(columnsByDepth.entries())\n      .sort(([depthA], [depthB]) => depthA - depthB)\n      .map(([, columns]) => <tr>{columns.map(col => this.renderTheadColumn(col))}</tr>);\n\n    return <thead>{headerRows}</thead>;\n  }\n\n  renderTheadColumn(col: TableColumnInterface) {\n    let content: any = col.title;\n    const classes: any = {\n      'thead-xxs': col.type === 'detail' || col.type === 'serialNumber' || col.type === 'radio' || col.type === 'checkbox',\n      'detail-toggle': col.type === 'detail',\n    };\n\n    if (content == null && col.type === 'checkbox') {\n      const checkedCount = this.getCheckedItemsSum(col.field);\n      content = (\n        <storm-checkbox\n          type=\"checkbox\"\n          is-indeterminate={checkedCount > 0 && checkedCount < this.table.totalRows}\n          is-checked={checkedCount === this.table.totalRows}\n          onValueChanged={ev => this.handleColumnCheckChange(ev, col)}\n          time-stamp={this.timeStamp}\n        ></storm-checkbox>\n      );\n    }\n\n    return this.renderHeaderCell(content, col, classes);\n  }\n\n  renderHeaderCell(content: any, col: TableColumnInterface, classes: Record<string, boolean> = {}) {\n    return (\n      <th\n        data-field={col.field}\n        scope=\"col\"\n        class={this.computeColumnClasses(col, classes)}\n        rowspan={col.headerRowspan}\n        colSpan={col.headerColspan}\n        onClick={() => this.handleColumnClick(col)}\n      >\n        <div class=\"cell\">{content}</div>\n        {col.description && <div class=\"table-description\">{col.description}</div>}\n      </th>\n    );\n  }\n\n  handleColumnClick(col: TableColumnInterface) {\n    if (!col.sortable) return;\n    if (col.field == this.table.sortName) {\n      if (this.table.sortOrder == 'desc') this.table.sortChange.emit({ sortName: undefined, sortOrder: undefined });\n      else this.table.sortChange.emit({ sortName: this.table.sortName, sortOrder: 'desc' });\n    } else this.table.sortChange.emit({ sortName: col.field, sortOrder: 'asc' });\n  }\n\n  async handleColumnCheckChange(ev: CustomEvent<boolean>, col: TableColumnInterface) {\n    const checked = ev.detail;\n    if (checked) await this.table.checkAll(col.field);\n    else await this.table.uncheckAll(col.field);\n  }\n\n  async initSelect() {\n    if (!this.dataSet || !this.columns) return;\n\n    for (const row of this.dataSet) {\n      await this.updateRowSelection(row);\n    }\n  }\n\n  getCheckedItemsSum(field: string | number): number {\n    if (!this.table.checkedItemsSum) return 0;\n    return this.table.checkedItemsSum[field];\n  }\n\n  private renderRow(row: object, index: number) {\n    const rowId = getFieldValue(row, this.table.fieldId) as string;\n\n    return (\n      <storm-table-row\n        data-id={rowId}\n        table={this.table}\n        row={row}\n        index={index}\n        columns={this.columns}\n        time-stamp={this.timeStamp}\n        onClickRow={(ev: CustomEvent<string>) => this.clickRow.emit(ev.detail)}\n      ></storm-table-row>\n    );\n  }\n\n  private renderRows() {\n    if (this.table.groupBy) {\n      let groupItem: string = '';\n      const result: any[] = [];\n\n      for (const [i, row] of this.dataSet.entries()) {\n        const groupByValue = getFieldValue(row, this.table.groupBy) as string;\n\n        if (groupByValue !== groupItem) {\n          groupItem = groupByValue;\n          result.push(\n            <tr class=\"group-item table-info\">\n              <th class=\"align-middle full-cell\" colSpan={this.table.expand.visibleColumnCount}>\n                {groupByValue}\n              </th>\n            </tr>,\n          );\n        }\n        result.push(this.renderRow(row, i));\n      }\n      return result;\n    }\n\n    return this.dataSet.map((row, index) => this.renderRow(row, index));\n  }\n\n  private renderBody() {\n    if (!this.dataSet?.length) {\n      const emptyClasses = {\n        'align-middle': true,\n        'text-center': true,\n        'full-cell': true,\n        ...(this.table.classes?.['table-sm'] ? { 'height-100': true } : { 'height-300': true }),\n      };\n\n      return (\n        <tbody>\n          <tr>\n            <td class={emptyClasses} colSpan={this.table.expand.visibleColumnCount}>\n              <p class=\"p-4 h6\">沒有找到符合的結果</p>\n            </td>\n          </tr>\n        </tbody>\n      );\n    }\n    return <tbody>{this.renderRows()}</tbody>;\n  }\n\n  render() {\n    return (\n      <Host>\n        <table\n          class={{\n            table: true,\n            'mb-0': true,\n            'table-hover': !!this.table.clickRowTo,\n            'table-layout-auto': this.table.layout === 'auto',\n            'table-layout-fixed': this.table.layout === 'fixed',\n            ...parseClassNames(this.table.classes),\n          }}\n        >\n          {this.renderThead()}\n          {this.renderBody()}\n        </table>\n      </Host>\n    );\n  }\n\n  async componentDidRender() {\n    await this.initSelect();\n  }\n}\n","storm-table-row {\n  display: contents;\n}\n\n.table storm-table-row>tr{\n  border-width: 0;\n}\n\n.table-striped>tbody>storm-table-row:nth-of-type(odd)>tr {\n    background-color: rgba(0, 0, 0, .05);\n}\n","import { Component, Element, Event, EventEmitter, Host, Method, Prop, h } from '@stencil/core';\nimport { getFieldValue } from '@utils/utils';\nimport type { TableColumnInterface } from '../interface';\nimport { StormTable } from '../storm-table';\n\n@Component({\n  tag: 'storm-table-row',\n  styleUrl: 'storm-table-row.scss',\n  shadow: false,\n})\nexport class StormTableRow {\n  @Element() host: HTMLElement;\n\n  @Prop() table: StormTable;\n  @Prop() row: object;\n  @Prop() index: number;\n  @Prop() columns: TableColumnInterface[];\n  @Prop() timeStamp?: number;\n\n  @Event() clickRow: EventEmitter<string>;\n\n  @Method()\n  async updateSelection() {\n    const isSelected = (getFieldValue(this.row, this.table.fieldSelected) as boolean) === true;\n    const rowEl = this.host.querySelector('tr') as HTMLElement;\n    if (rowEl) {\n      rowEl.classList.toggle('table-primary', isSelected);\n    }\n  }\n\n  private computeCellClasses(col: TableColumnInterface, classes?: Record<string, boolean>): Record<string, boolean> {\n    return {\n      'text-center': col.align === 'center',\n      'text-start': col.align === 'left',\n      'text-end': col.align === 'right',\n      'align-middle': !col.valign || col.valign === 'middle',\n      'align-top': col.valign === 'top',\n      'align-bottom': col.valign === 'bottom',\n      ...classes,\n      ...col.classes,\n    };\n  }\n\n  private renderCell(col: TableColumnInterface) {\n    const cellClasses = this.computeCellClasses(col, {\n      'text-xs': col.type === 'serialNumber',\n      'detail-toggle': col.type === 'detail',\n    });\n\n    return (\n      <td data-field={col.field} class={cellClasses}>\n        {this.renderCellContent(col)}\n      </td>\n    );\n  }\n\n  private renderCellContent(col: TableColumnInterface) {\n    return (\n      <storm-table-cell\n        table={this.table}\n        row={this.row}\n        index={this.index}\n        column={col}\n        time-stamp={this.timeStamp}\n        data-field={col.field}\n        onCellDidValueChanged={() => {\n          this.timeStamp = Date.now();\n        }}\n      ></storm-table-cell>\n    );\n  }\n\n  private renderDetail() {\n    return this.columns\n      .filter(col => col.responsive === true && col.visible !== false)\n      .map(col => (\n        <li class={{ 'list-group-item': true, ...col.rwdClassReversal }}>\n          <span class=\"detail-title\">{col.title}</span>\n          <span>{this.renderCellContent(col)}</span>\n        </li>\n      ));\n  }\n\n  render() {\n    const rowId = getFieldValue(this.row, this.table.fieldId) as string;\n    const isSelected = (getFieldValue(this.row, this.table.fieldSelected) as boolean) === true;\n    const visibleColumns = this.columns.filter(col => col.visible !== false && (!col.children || col.children.length === 0));\n\n    const mainRow = (\n      <tr data-id={rowId} class={{ 'table-primary': isSelected }} onClick={() => this.clickRow.emit(rowId)}>\n        {visibleColumns.map(col => this.renderCell(col))}\n      </tr>\n    );\n\n    if (this.table.isColumnResponsive) {\n      const detailCol = this.columns.find(col => col.type === 'detail');\n      const detailClasses = detailCol?.classes ? { ...detailCol.classes, 'row-detail': true, 'd-none': true } : { 'row-detail': true, 'd-none': true };\n\n      return (\n        <Host>\n          {mainRow}\n          <tr class={detailClasses} data-index={this.index}>\n            <td class=\"full-cell\" colSpan={this.table.expand.visibleColumnCount}>\n              <ul class=\"list-group list-group-flush\">{this.renderDetail()}</ul>\n            </td>\n          </tr>\n        </Host>\n      );\n    }\n\n    return <Host>{mainRow}</Host>;\n  }\n}\n"],"mappings":"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","ignoreList":[]}