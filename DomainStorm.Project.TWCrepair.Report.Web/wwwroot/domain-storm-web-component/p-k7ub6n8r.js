import"./p-BOWIeDdp.js";function n(n="",t=""){const e=crypto.randomUUID();const r=[];if(n)r.push(n);r.push(e);if(t)r.push(t);return r.join("_")}const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};const e=/[&<>"'`=/]/g;function r(n){if(!n)return"";return String(n).replace(e,(n=>t[n]))}function o(n,t,e){if(!Array.isArray(n)||n.length===0)return;if(t===e)return;const r=n.length;const o=(t%r+r)%r;const f=(e%r+r)%r;const[i]=n.splice(o,1);n.splice(f,0,i)}function f(n,t){if(n===t)return true;if(n===null&&t===undefined||n===undefined&&t===null){return true}if(!Array.isArray(n)||!Array.isArray(t)){return false}if(n.length!==t.length){return false}for(let e=0;e<n.length;e++){if(n[e]!==t[e]){return false}}return true}const i=new Map;const u=500;function s(n,t){if(n==null)return n;if(typeof t==="number"){return Array.isArray(n)?n[t]:undefined}if(typeof t!=="string"){throw new Error("Field must be a string or a number")}const e=t.trim();if(e==="")return undefined;let r=i.get(e);if(!r){r=c(e);if(i.size>=u){const n=i.keys().next().value;i.delete(n)}i.set(e,r)}switch(r.type){case"pipe":return l(n,r.parts);case"ampersand":return d(n,r.parts);case"dot":const t=s(n,r.firstField);return s(t,r.subField);case"simple":if(Array.isArray(n)&&n.length>0&&typeof n[0]==="object"){return n.map((n=>s(n,e)))}if(typeof n==="object"&&n!==null){return n[e]}return undefined;default:return undefined}}function c(n){const t=n.indexOf("|");const e=n.indexOf("&");const r=n.indexOf(".");if(t!==-1){return{type:"pipe",parts:n.split("|")}}if(e!==-1){return{type:"ampersand",parts:n.split("&")}}if(r!==-1){return{type:"dot",firstField:n.substring(0,r),subField:n.substring(r+1)}}return{type:"simple"}}function a(n,t,e){if(n==null){return}if(typeof t==="number"){if(Array.isArray(n)){n[t]=e}return}if(typeof t!=="string"){throw new Error("Field must be a string or a number")}const r=t.trim();if(r==="")return;let o=i.get(r);if(!o){o=c(r);if(i.size>=u){const n=i.keys().next().value;i.delete(n)}i.set(r,o)}if(o.type==="pipe"||o.type==="ampersand"){const t=o.parts;for(let r=0;r<t.length;r++){const o=t[r].trim();if(o&&s(n,o)!==undefined){a(n,o,e);return}}const r=t[0]?.trim();if(r){a(n,r,e)}return}if(o.type==="dot"){if(typeof n==="object"){const t=n[o.firstField];if(t!==undefined){a(t,o.subField,e)}}return}if(Array.isArray(n)&&n.length>0&&typeof n[0]==="object"){for(let t=0;t<n.length;t++){const o=n[t];if(o&&typeof o==="object"){o[r]=e}}}else if(typeof n==="object"){n[r]=e}}function l(n,t){for(const e of t){const t=e.trim();if(t){const e=s(n,t);if(e!=null)return e}}return null}function d(n,t){const e=[];for(const r of t){const t=r.trim();if(t){const r=s(n,t);if(r!=null){if(Array.isArray(r)){e.push(...r)}else{e.push(r)}}}}return e}function y(n,t,...e){if(t==null)return t;if(typeof t==="string"){if(g(t)){t=p(t)}else{const e=t.split(".");let r=n||(typeof window!=="undefined"?window:globalThis);for(const n of e){r=r?.[n];if(r===undefined)break}if(typeof r==="function"){t=r}}}if(typeof t==="function"){return x(n,t,...e)}return t}function p(n){if(typeof n!=="string"||n.trim()===""){throw new Error("Function string cannot be empty")}const t=/^export default\s+(async\s+)?function\s*\(([^)]*)\)\s*{([\s\S]*)}$/;const e=t.exec(n);if(!e){throw new Error("Invalid function string")}const r=!!e[1];const o=e[2].split(",").map((n=>n.trim())).filter(Boolean);const f=e[3].trim();const i=new Compartment;const u=r?Object.getPrototypeOf((async function(){})).constructor:Function;const s=new i.globalThis[u.name](...o,f);return s}function g(n){if(typeof n!=="string"){return false}const t=n.trim();const e=/^export\s+default\s+function\s*[a-zA-Z0-9_$]*\s*\([^)]*\)\s*{[\s\S]*}$/;return e.test(t)}function b(n,t){const e=n.filter((n=>n.conjunction!=="or"));const r=n.filter((n=>n.conjunction==="or"));if(e.some((n=>!m(n,t)))){return false}if(r.length>0&&!r.some((n=>m(n,t)))){return false}return true}function m(n,t){try{const e=y(null,n.field,t);const r=y(null,n.operator,t);const o=y(null,n.value,t);const f=j(t,e);if(f===null||f===undefined){if(r==="=")return o===null||o===undefined;if(r==="!=")return o!==null&&o!==undefined;if(r==="empty")return true;if(r==="notempty")return false;return false}switch(r){case">":{const n=+f;const t=+o;return!isNaN(n)&&!isNaN(t)&&n>t}case"<":{const n=+f;const t=+o;return!isNaN(n)&&!isNaN(t)&&n<t}case">=":{const n=+f;const t=+o;return!isNaN(n)&&!isNaN(t)&&n>=t}case"<=":{const n=+f;const t=+o;return!isNaN(n)&&!isNaN(t)&&n<=t}case"=":return f===o||typeof f==="number"&&typeof o==="string"&&f===+o&&!isNaN(+o)||typeof f==="string"&&typeof o==="number"&&+f===o&&!isNaN(+f);case"!=":return f!==o&&!(typeof f==="number"&&typeof o==="string"&&f===+o&&!isNaN(+o))&&!(typeof f==="string"&&typeof o==="number"&&+f===o&&!isNaN(+f));case"like":{const n=String(f).toLowerCase();const t=String(o).toLowerCase();return n.includes(t)}case"include":return Array.isArray(f)&&f.includes(o);case"notinclude":return Array.isArray(f)&&!f.includes(o);case"in":return Array.isArray(o)&&o.includes(f);case"notin":return Array.isArray(o)&&!o.includes(f);case"typeof":if(typeof o!=="string"){console.warn("typeof 運算符需要字串型別的比較值");return false}return typeof f===o;case"instanceof":if(typeof o!=="function"){console.warn("instanceof 運算符需要函數型別的比較值");return false}return f instanceof o;case"empty":return f===""||Array.isArray(f)&&f.length===0||typeof f==="object"&&f!==null&&Object.keys(f).length===0;case"notempty":return f!==""&&!(Array.isArray(f)&&f.length===0)&&!(typeof f==="object"&&f!==null&&Object.keys(f).length===0);case"match":try{const n=String(o);return new RegExp(n).test(String(f))}catch(n){console.error("無效的正則表達式:",o);return false}default:throw new Error(`不支援的運算符: ${r}`)}}catch(n){console.error("條件檢查失敗:",n);return false}}function N(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,((n,e)=>{const r=s(t,e);return r!==undefined?String(r):""}))}function w(n){if(!n)return{};if(typeof n==="object")return n;const t=n.trim();if(!t)return{};return t.split(/\s+/).reduce(((n,t)=>{if(t)n[t]=true;return n}),{})}function h(n,t){return{...w(n),...w(t)}}function j(n,t,e){if(!n||typeof n!=="object"){return null}if(!Object.hasOwn(n,t)){if(t.includes(".")){const r=t.split(".");const o=r.shift();if(Object.hasOwn(n,o)){const t=n[o];return j(t,r.join("."),e)}}return null}let r=n[t];if(typeof r==="string"&&g(r)){try{r=n[t]=p(r)}catch(n){console.error(`無法解析函式字串 '${t}':`,n);return null}}try{return x(n,r,...e||[])}catch(n){console.error(`執行屬性 '${t}' 時發生錯誤:`,n);return null}}function A(n,t,e='<span class="bg-warning text-dark">$1</span>'){if(!t||!n){return n}try{const o=r(t);const f=new RegExp(`(${o})`,"gi");const i=e.replace("$1","$&");return n.replace(f,i)}catch(t){console.error("搜尋高亮處理錯誤:",t);return n}}function x(n,t,...e){if(typeof t!=="function"){return t}return t.apply(n,e)}function $(n){if(n==null||!Array.isArray(n)){return false}return n.every((n=>typeof n==="object"&&n!==null&&"field"in n&&"operator"in n&&"value"in n))}function S(n){if(n==null||!Array.isArray(n)){return false}return n.every((n=>typeof n==="object"&&n!==null&&"conditions"in n&&$(n.conditions)&&"value"in n))}function E(n,t,e="single"){if(!Array.isArray(n)||n.length===0)return null;const r=n.filter((n=>n.selected===true&&n.id)).map((n=>String(n.id)));if(r.length===0){if(t||e==="none"){return null}const o=n.find((n=>n.id));if(o){r.push(String(o.id))}else{return null}}return e==="single"?r[0]:r}function F(n,t){if(t<0){console.warn("Delay time must be greater than or equal to 0. Using default value of 300ms.");t=300}let e;let r;let o;const f=function(...f){r=f;o=this;if(e!==undefined){clearTimeout(e)}if(t===0){try{n.apply(this,f)}catch(n){console.error("Error executing debounced function:",n)}return}e=setTimeout((()=>{try{if(r!==undefined){n.apply(o,r)}}catch(n){console.error("Error executing debounced function:",n)}finally{e=undefined;r=undefined}}),t)};f.cancel=function(){if(e!==undefined){clearTimeout(e);e=undefined;r=undefined}};f.flush=function(){if(e!==undefined&&r!==undefined){clearTimeout(e);try{n.apply(o,r)}catch(n){console.error("Error executing debounced function:",n)}finally{e=undefined;r=undefined}}};f.pending=function(){return e!==undefined};return f}function O(n){if(Array.isArray(n)){if(n.length===0){return false}return n.some((n=>O(n)))}return typeof n==="string"&&n.trim()!==""}const T=0xcbf29ce484222325n;const k=0x100000001b3n;const v=0xffffffffffffffffn;function q(n,t){for(let e=0;e<t.length;e++){n^=BigInt(t.charCodeAt(e)&127);n=n*k&v}return n}function B(n){return n.toString(16).padStart(16,"0")}function D(n,t,e,r=true){if(!n||n.length===0)return"";if(r){let r=T;for(let o=0;o<n.length;o++){const f=n[o];r=q(r,"i:");r=q(r,String(t(f)));r=q(r,"|x:");r=q(r,String(e(f)));r=q(r,"#")}r=q(r,`len:${n.length}`);return B(r)}else{let r=0n;for(let o=0;o<n.length;o++){const f=n[o];let i=T;i=q(i,`i:${t(f)}|x:${e(f)}`);r^=i}let o=T;o=q(o,`len:${n.length}`);r^=o;return B(r&v)}}export{f as a,s as b,D as c,F as d,o as e,p as f,n as g,A as h,g as i,y as j,E as k,S as l,h as m,$ as n,b as o,w as p,r as q,j as r,a as s,N as t,O as u};
//# sourceMappingURL=p-k7ub6n8r.js.map