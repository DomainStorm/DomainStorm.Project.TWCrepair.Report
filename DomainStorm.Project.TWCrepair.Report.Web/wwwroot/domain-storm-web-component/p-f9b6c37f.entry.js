import{r as t,c as e,a as s,h as i,H as h,f as l}from"./p-D3vcPeCB.js";import{a as n}from"./p-BNpnTtlt.js";import{S as a}from"./p-B0cWbvbo.js";import{c as r,s as o,b as c,e as d,r as f,d as u,g as b,i as p,f as g,p as m}from"./p-GhrQjYf4.js";const w=':host{display:block;line-height:1}:host .table td,:host .table th{white-space:pre-wrap}:host .table thead{z-index:1}:host .table thead th{padding:0.75rem 0.5rem}:host .table thead th.thead-xxs{width:2.3rem}:host .table.table-sm thead th{padding:0.5rem 0.25rem}:host .table.table-sm thead th.thead-xxs{padding:0.25rem}:host .table .form-check>.form-check-input[type=radio]{background-color:#fff;cursor:pointer}:host .form-check{padding:0}:host .table-sorter{cursor:pointer}:host .table-sorter>.cell{display:inline-block;height:100%;position:relative;width:100%;line-height:1.1}:host .table-sorter>.cell:before{border-top:5px solid #000;bottom:0.15rem}:host .table-sorter>.cell:after{border-bottom:5px solid #000;border-top:5px solid transparent;top:-0.2rem}:host .table-sorter>.cell:after,:host .table-sorter>.cell:before{content:"";height:0;width:0;position:absolute;right:5px;border-left:5px solid transparent;border-right:5px solid transparent;opacity:0.3}:host .table-sorter.asc>.cell:after{opacity:0.7}:host .table-sorter.asc>.cell:before{opacity:0}:host .table-sorter.desc>.cell:before{opacity:0.7}:host .table-sorter.desc>.cell:after{opacity:0}:host .table-layout-fixed{table-layout:fixed}:host .table-layout-auto{table-layout:auto}:host .no-records-found{height:30vh}:host .fixed-table-header th{position:sticky;top:0}:host .fixed-table-header thead{position:sticky;top:0;background:white}:host .fixed-table-header thead tr{border-top-width:0}:host .table-description{font-size:0.5rem;font-weight:normal !important}:host .table-top,:host .table-bottom{padding:0.5rem}:host .table-top:after,:host .table-bottom:after{clear:both;content:" ";display:table}:host .table-top label{margin-bottom:0}:host .table-top .table-pageSizeMenu label select{border-color:#f0f2f5;border-radius:0.375rem;padding:6px}:host .table-selectedInfo,:host .table-pageSizeMenu,:host .table-pageInfo{float:left;color:#7b809a;font-size:0.875rem}:host .table-selectedInfo,:host .table-pageInfo{margin:0.7rem 0;padding-right:2rem}:host .table-search,:host .table-pagination{float:right}:host .table-search input{font-size:0.875rem;color:#495057;border:1px solid #f0f2f5;border-radius:0.375rem;padding:6px 12px}:host .tr.table-sorter{cursor:pointer}:host tr storm-toolbar storm-button .btn{width:1.5rem;height:1.5rem;padding:0.3rem 0.3rem}:host tr storm-toolbar.storm-dynamic-label storm-button .storm-button-label{display:none}:host tr:hover storm-toolbar.storm-dynamic-label storm-button .btn:not(.btn-icon-only){width:auto;height:auto;padding:0.06rem 0.5rem 0.06rem 0.2rem}:host tr:hover storm-toolbar.storm-dynamic-label storm-button .storm-button-label{display:block}';const C=class{constructor(s){t(this,s);this.pageNumberChange=e(this,"pageNumberChange");this.pageSizeChange=e(this,"pageSizeChange");this.sortChange=e(this,"sortChange");this.searchChanged=e(this,"searchChanged");this.tableWillRender=e(this,"tableWillRender");this.rowMove=e(this,"rowMove");this.rowWillSelect=e(this,"rowWillSelect");this.rowWillUnselect=e(this,"rowWillUnselect");this.rowSelect=e(this,"rowSelect");this.rowUnselect=e(this,"rowUnselect");this.rowDidSelect=e(this,"rowDidSelect");this.rowDidUnselect=e(this,"rowDidUnselect");this.rowSelectChange=e(this,"rowSelectChange");this.selectWillChange=e(this,"selectWillChange");this.selectChange=e(this,"selectChange");this.selectDidChange=e(this,"selectDidChange");this.cellWillCheck=e(this,"cellWillCheck");this.cellWillUncheck=e(this,"cellWillUncheck");this.cellCheck=e(this,"cellCheck");this.cellUncheck=e(this,"cellUncheck");this.cellDidCheck=e(this,"cellDidCheck");this.cellDidUncheck=e(this,"cellDidUncheck");this.cellCheckChange=e(this,"cellCheckChange");this.checkWillChange=e(this,"checkWillChange");this.checkChange=e(this,"checkChange");this.checkDidChange=e(this,"checkDidChange");this.clickRow=e(this,"clickRow")}__pageDate;__cellCheckChangeTimeoutRafId={};__bodyRef;__selectedInfoRef;__memoizedDataHash;__breakpoints=[{size:"4xs",width:239},{size:"3xs",width:359},{size:"xxs",width:479},{size:"xs",width:576},{size:"sm",width:768},{size:"md",width:992},{size:"lg",width:1200},{size:"xl",width:1400},{size:"xxl",width:1600},{size:"3xl",width:1920},{size:"4xl",width:Infinity}];get host(){return s(this)}fieldId="id";fieldSelected="__selected";fieldIndex="__index";pagination=false;sidePagination="stencil";searchable=false;pageSizeMenu=true;pageInfo=true;selectedInfo=true;escape=true;classes;layout="fixed";cellTemplate="{value}";clickRowTo;selection="single";pageList=[5,10,15,20,25];tableHeight;columns;dataSet;pageNumber=1;pageSize=10;searchText;sortName;sortOrder;groupBy;totalRows;totalSelected;totalChecked;isColumnResponsive=false;expand={visibleColumnCount:0};timeStamp;pageNumberChange;pageSizeChange;sortChange;searchChanged;tableWillRender;rowMove;rowWillSelect;rowWillUnselect;rowSelect;rowUnselect;rowDidSelect;rowDidUnselect;rowSelectChange;selectWillChange;selectChange;selectDidChange;cellWillCheck;cellWillUncheck;cellCheck;cellUncheck;cellDidCheck;cellDidUncheck;cellCheckChange;checkWillChange;checkChange;checkDidChange;clickRow;watchDataSetHandler(t,e){this.timeStamp=Date.now();if(t===e||t&&e&&t.length===e.length){const e=r(t,(t=>c(t,this.fieldId)),(t=>c(t,this.fieldIndex)));if(this.__memoizedDataHash===e){return}this.__memoizedDataHash=e}this.initDataSet();this.rerender()}async watchColumnsHandler(t,e){if(t===e||this.areColumnsEqual(t,e)){return}this.initColumns()}watchTotalSelectedHandler(t,e){this.debouncedDisplaySelectedCount()}searchChangedHandler(t){if(this.sidePagination==="stencil"){this.searchText=t.detail}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:t.detail})}}pageNumberChangeHandler(t){if(this.sidePagination==="stencil"){this.pageNumber=t.detail}else{this.tableWillRender.emit({pageNumber:t.detail,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}}pageSizeChangeHandler(t){if(this.sidePagination==="stencil"){this.pageSize=t.detail}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:t.detail,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}}sortChangeHandler(t){if(this.sidePagination==="stencil"){this.sortName=t.detail.sortName;this.sortOrder=t.detail.sortOrder}else{this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:t.detail.sortName,sortOrder:t.detail.sortOrder,searchText:this.searchText})}}async rowWillSelectHandler(t){if(this.sidePagination==="stencil"){if(this.selection==="single"){await this.unselectAll()}this.rowSelect.emit(t.detail)}}async rowSelectHandler(t){const e=await this.getRowById(t.detail);o(e,this.fieldSelected,true);this.__bodyRef.updateRowSelection(e);this.rowDidSelect.emit(e)}rowDidSelectHandler(t){this.rowSelectChange.emit(t.detail)}rowWillUnselectHandler(t){if(this.sidePagination==="stencil"){this.rowUnselect.emit(t.detail)}}async rowUnselectHandler(t){const e=await this.getRowById(t.detail);o(e,this.fieldSelected,false);this.__bodyRef.updateRowSelection(e);this.rowDidUnselect.emit(e)}rowDidUnselectHandler(t){this.rowSelectChange.emit(t.detail)}rowSelectChangeHandler(t){this.debouncedRowSelectionUpdate()}async selectWillChangeHandler(t){if(this.sidePagination==="stencil"){const t=await this.getSelected();this.selectChange.emit(t.length)}}selectChangeHandler(t){this.totalSelected=t.detail;this.debouncedDisplaySelectedCount();this.selectDidChange.emit(t.detail)}async cellWillCheckHandler(t){if(this.sidePagination==="stencil"){const e=await this.getColumnByField(t.detail.field);if(e.type==="radio"){await this.uncheckAll(e.field)}this.cellCheck.emit(t.detail)}}async cellCheckHandler(t){const e=await this.getColumnByField(t.detail.field);const s=await this.getRowById(t.detail.id);o(s,e.field,true);this.__bodyRef.updateRowCheckbox(s,e);this.cellDidCheck.emit({row:s,column:e})}cellDidCheckHandler(t){this.cellCheckChange.emit(t.detail)}cellWillUncheckHandler(t){if(this.sidePagination==="stencil"){this.cellUncheck.emit(t.detail)}}async cellUncheckHandler(t){const e=await this.getColumnByField(t.detail.field);const s=await this.getRowById(t.detail.id);o(s,e.field,false);this.__bodyRef.updateRowCheckbox(s,e);this.cellDidUncheck.emit({row:s,column:e})}cellDidUncheckHandler(t){this.cellCheckChange.emit(t.detail)}cellCheckChangeHandler(t){const e=t.detail.column;const s=this.__cellCheckChangeTimeoutRafId[e.field];if(s){clearTimeout(s);delete this.__cellCheckChangeTimeoutRafId[e.field]}this.__cellCheckChangeTimeoutRafId[e.field]=setTimeout((()=>{delete this.__cellCheckChangeTimeoutRafId[e.field];this.checkWillChange.emit(e.field)}),100)}async checkWillChangeHandler(t){if(this.sidePagination==="stencil"){const e=await this.getChecked(t.detail);this.checkChange.emit({total:e.length,field:t.detail})}}async checkChangeHandler(t){this.setTotalChecked(t.detail.field,t.detail.total);if(t.detail.field===this.fieldSelected){this.totalSelected=t.detail.total}const e=await this.getColumnByField(t.detail.field);await this.__bodyRef.updateColumnCheckbox(e);this.checkDidChange.emit({total:t.detail.total,column:e})}async clickCellHandler(t){const e=await this.getColumnByField(t.detail.field);if(e.type==="checkbox"||e.type==="radio"){await this.checkClick(t.detail.id,t.detail.field)}else{this.clickRow.emit(t.detail.id)}}async clickRowHandler(t){if(this.clickRowTo==="check"){await this.checkClick(t.detail,this.fieldSelected)}else if(this.clickRowTo==="select"){const e=await this.getRowById(t.detail);c(e,this.fieldSelected)?this.unselect(t.detail):this.select(t.detail)}}async moveRow(t,e){d(this.dataSet,t,e);this.dataSet.forEach(((t,e)=>{const s=c(t,this.fieldIndex);if(s!==e){this.rowMove.emit({row:t,from:s,to:e});o(t,this.fieldIndex,e)}}));this.rerender()}async dispatchCustomEvent(t,e){this[t].emit(e)}async dispatchCellCustomEvent(t,e){const s=this.host.shadowRoot?.querySelector('tr[data-id="'+e["id"]+'"] storm-table-cell[data-field="'+e["field"]+'"]');await s.dispatchCustomEvent(t,e)}async getRowAt(t){return this.dataSet.find((e=>c(e,this.fieldIndex)===t))}async getRowById(t){if(typeof t==="object")return t;return this.dataSet.find((e=>c(e,this.fieldId)===t))}async getColumnByField(t){if(typeof t==="object")return t;return this.columns.find((e=>e.field===t))}async getSelected(){if(this.sidePagination==="stencil"){return this.dataSet.filter((t=>c(t,this.fieldSelected)))}return null}async getChecked(t){if(this.sidePagination==="stencil"){const e=await this.getColumnByField(t);return this.dataSet.filter((t=>c(t,e.field)!==null&&c(t,e.field)))}return null}async select(t){this.rowWillSelect.emit(t)}async selectAll(){this.dataSet.filter((t=>!c(t,this.fieldSelected))).forEach((t=>{this.select(c(t,this.fieldId))}))}async unselect(t){this.rowWillUnselect.emit(t)}async unselectAll(){this.dataSet.filter((t=>c(t,this.fieldSelected))).forEach((t=>{this.unselect(c(t,this.fieldId))}))}async check(t,e){const s=await this.getRowById(t);if(c(s,e))return;this.cellWillCheck.emit({id:t,field:e})}async uncheck(t,e){const s=await this.getRowById(t);if(!c(s,e))return;this.cellWillUncheck.emit({id:t,field:e})}async checkAll(t){const e=await this.getColumnByField(t);const s=this.dataSet.filter((e=>!c(e,t)));for(const i of s){const s=await this.resolveColumnData(e,[i,c(i,this.fieldIndex),e]);if(s&&s.disabled)continue;this.check(c(i,this.fieldId),t)}}async uncheckAll(t){const e=await this.getColumnByField(t);const s=this.dataSet.filter((e=>c(e,t)));for(const i of s){const s=await this.resolveColumnData(e,[i,c(i,this.fieldIndex),e]);if(s&&s.disabled)continue;this.uncheck(c(i,this.fieldId),t)}}async resolveColumnData(t,e){const s=f(t,"data",e);return s instanceof Promise?await s:s}rerender=u((async()=>{l(this)}),50);debouncedDisplaySelectedCount=u((async()=>{if(!this.isSelectedInfoVisible()||!this.__selectedInfoRef)return;const t=this.totalSelected?`已選取 ${this.totalSelected} 筆`:"";if(this.__selectedInfoRef.innerHTML!==t){this.__selectedInfoRef.innerHTML=t}}),50);debouncedRowSelectionUpdate=u((async()=>{this.selectWillChange.emit()}),500);async checkClick(t,e){const s=await this.getColumnByField(e);const i=await this.getRowById(t);if(c(i,s.field)){if(s.type==="radio"&&(!s.data||!s.data.unchecked))return;this.uncheck(t,s.field)}else this.check(t,s.field)}isPaginationVisible(){return this.columns&&this.pageInfo&&this.pagination&&this.__pageDate&&this.__pageDate.length>0}isPageSizeMenuVisible(){return this.pageSizeMenu&&this.isPaginationVisible()}isSelectedInfoVisible(){return this.selectedInfo&&this.clickRowTo!=null}getTotalChecked(t){if(!this.totalChecked)return 0;return this.totalChecked[t]}handleSearchChanged(t){t.stopPropagation();const e=t.detail?.trim();if(this.searchText===e)return;this.searchChanged.emit(e)}handleColumnCheckChange(t,e){const s=t.target["checked"];if(s)this.checkAll(e.field);else this.uncheckAll(e.field)}handleColumnClick(t){if(!t.sortable)return;if(t.field==this.sortName){if(this.sortOrder=="desc")this.sortChange.emit({sortName:undefined,sortOrder:undefined});else this.sortChange.emit({sortName:this.sortName,sortOrder:"desc"})}else this.sortChange.emit({sortName:t.field,sortOrder:"asc"})}renderPagination(){if(!this.isPaginationVisible())return;return i("div",{class:"table-pagination"},i("storm-pagination",{"page-number":this.pageNumber,"total-pages":Math.ceil(this.totalRows/this.pageSize),onPageChange:t=>{this.pageNumberChange.emit(t.detail)}}))}renderPageSizeMenu(){if(!this.isPageSizeMenuVisible())return;return i("div",{class:"table-pageSizeMenu"},i("label",null,"顯示"," ",i("select",{class:"table-selector",onChange:t=>this.pageSizeChange.emit(Number(t.currentTarget.value))},this.pageList.map((t=>i("option",{value:t,selected:this.pageSize==t},t))))," ","筆結果"))}renderSearch(){if(!this.searchable)return;return i("div",{class:"table-search"},i(n,{placeholder:"請輸入關鍵字",onValueChanged:t=>this.handleSearchChanged(t)}))}renderPageInfo(){if(!this.pageInfo)return;return i("div",{class:"table-pageInfo"},this.searchable&&this.searchText?`篩選 ${this.__pageDate.length} 筆，`:"",this.pagination&&this.__pageDate.length>0?`顯示第 ${(this.pageNumber-1)*this.pageSize+1} 至 ${this.totalRows<this.pageNumber*this.pageSize?this.totalRows:this.pageNumber*this.pageSize} 筆，`:"","共 ",this.totalRows," 筆")}renderSelectedInfo(){if(!this.isSelectedInfoVisible())return;return i("div",{ref:t=>this.__selectedInfoRef=t,class:"table-selectedInfo"})}renderTableTop(){if(!this.isPageSizeMenuVisible()&&!this.searchable)return;return i("div",{class:"table-top p-1"},this.renderPageSizeMenu(),this.renderSearch())}renderTableBottom(){if(!this.isSelectedInfoVisible()&&!this.isPaginationVisible())return;return i("div",{class:"table-bottom p-1"},this.renderPageInfo(),this.renderSelectedInfo(),this.renderPagination())}initDataSet(){if(!this.dataSet?.length||!this.columns?.length)return;const t=this.columns.filter((t=>t.type==="checkbox"||t.type==="radio"));const e=t.length;const s=this.dataSet.length;const i=this.sidePagination==="stencil";const h=new Map;if(e>0){t.forEach((t=>{h.set(t.field,0)}))}let l=0;this.sortData(this.dataSet);const n=this.fieldId;const a=this.fieldIndex;const r=this.fieldSelected;for(let d=0;d<s;d++){const s=this.dataSet[d];const f=c(s,n);const u=c(s,a);const p=c(s,r);if(f==null){o(s,n,b("row"))}if(u==null){o(s,a,d)}if(p==null){o(s,r,false)}if(e>0){for(let l=0;l<e;l++){const e=t[l];const n=c(s,e.field);if(n==null){o(s,e.field,false)}else if(i&&n){h.set(e.field,h.get(e.field)+1)}}}if(i&&(p||c(s,r))){l++}}if(i){this.totalSelected=l;this.totalRows=s;if(e>0){for(const[t,e]of h){this.setTotalChecked(t,e)}}}}initColumns(){if(!this.columns)return;this.columns.forEach(((t,e)=>{if(t.type==null){t.type="text"}else if(typeof t.type==="string"&&p(t.type)){t.type=g(t.type)}if(t.type!=="action"){t.field??=["checkbox","radio"].includes(t.type)?b(t.type,e.toString()):e;t.searchable??=this.searchable}if(typeof t.render==="string"&&p(t.render)){t.render=g(t.render)}const s=t.classes??{};const i=Object.entries(s).filter((([t,e])=>t.startsWith("d-table-")&&t!=="d-table-none"&&t!=="d-table-cell"&&e===true));if(i.length>0){t.responsive=true;t.rwdClassReversal={};const e=i.some((([t])=>t.endsWith("-none")));const h=i.some((([t])=>t.endsWith("-cell")));if(e&&(h||!h)){t.rwdClassReversal["d-table-none"]=s["d-table-none"]!==true}for(const[e]of i){if(e.endsWith("-cell")){const s=e.replace(/-cell$/,"-none");t.rwdClassReversal[s]=true}else if(e.endsWith("-none")){const s=e.replace(/-none$/,"-cell");t.rwdClassReversal[s]=true}}}if(typeof t.data==="string"){if(p(t.data)){t.data=g(t.data)}else if(t.data.startsWith("{")&&t.data.endsWith("}")){try{t.data=JSON.parse(t.data)}catch(e){console.warn("無法解析欄位 data JSON：",t.data)}}}}));if(this.columns.some((t=>t.responsive===true))){this.isColumnResponsive=true;this.columns.unshift({type:"detail"})}this.expand.visibleColumnCount=this.columns.filter((t=>t.visible!==false)).length;if(this.clickRowTo==="check"){const t=this.columns.find((t=>t.type==="checkbox"||t.type==="radio"));if(t&&(!this.fieldSelected||this.fieldSelected==="__selected")){this.fieldSelected=t.field?.toString()}}if(!this.dataSet){this.tableWillRender.emit({pageNumber:this.pageNumber,pageSize:this.pageSize,sortName:this.sortName,sortOrder:this.sortOrder,searchText:this.searchText})}else{this.initDataSet()}}_resizeObserver;responsiveResize(){if(this._resizeObserver)return;this._resizeObserver=new ResizeObserver((()=>{this.refreshColumnVisibility()}));this._resizeObserver.observe(this.host)}_breakpointIndex;refreshColumnVisibility=u((()=>{const t=this.host.shadowRoot?.querySelector("table");if(!t)return;const e=t.offsetWidth;if(this._breakpointIndex!=null){const t=this.__breakpoints[this._breakpointIndex];const s=this.__breakpoints[this._breakpointIndex-1];if(e>=t.width&&(!s||e<s.width)){return}}let s;const i=this.__breakpoints.length;for(let t=0;t<i;t++){const{width:h}=this.__breakpoints[t];const l=t===i-1;if(e>=h&&(l||e<this.__breakpoints[t+1].width)){s=t;break}}if(s!==undefined){for(let e=0;e<i;e++){const i=`storm-table-${this.__breakpoints[e].size}`;t.classList.toggle(i,e===s)}}this._breakpointIndex=s;const h=[];let l=false;const n=this.columns.length;for(let t=0;t<n;t++){const e=this.columns[t];const s=this.isColumnVisible(e);e["__columnVisible"]=s;if(s){h.push(e)}else if(e.responsive===true){l=true}}if(this.__bodyRef){const t=this.__bodyRef.querySelectorAll(".detail-toggle, .row-detail");if(t.length>0){const e=l;const s=t.length;for(let i=0;i<s;i++){t[i].classList.toggle("d-table-none",!e)}}const e=l?h.length:h.filter((t=>t.type!=="detail")).length;if(this.expand.visibleColumnCount!==e){this.expand.visibleColumnCount=e;const t=e.toString();const s=this.__bodyRef.querySelectorAll(".full-cell[colspan]");const i=s.length;for(let e=0;e<i;e++){s[e].setAttribute("colspan",t)}}}}),50);isColumnVisible(t){if(t.visible===false)return false;if(!t.classes||t.responsive!==true)return true;let e=true;if(t.classes["d-table-none"]===true)e=false;if(t.classes["d-table-cell"]===true)e=true;if(typeof this._breakpointIndex==="number"&&Array.isArray(this.__breakpoints)){for(let s=0;s<=this._breakpointIndex;s++){const i=this.__breakpoints[s]?.size;if(!i)continue;if(t.classes[`d-table-${i}-none`]===true)e=false;if(t.classes[`d-table-${i}-cell`]===true)e=true}}return e}setTotalChecked(t,e){this.totalChecked??={};this.totalChecked[t]=e}areColumnsEqual(t,e){if(!t&&!e)return true;if(!t||!e)return false;if(t.length!==e.length)return false;for(let s=0;s<t.length;s++){const i=t[s];const h=e[s];if(i.field!==h.field||i.type!==h.type||i.sortable!==h.sortable||i.searchable!==h.searchable){return false}}return true}async componentWillLoad(){await a.applyShadowRootStylesAsync(this.host,"material");this.initColumns()}disconnectedCallback(){Object.values(this.__cellCheckChangeTimeoutRafId).forEach((t=>{if(t)clearTimeout(t)}));this.__cellCheckChangeTimeoutRafId={};if(this._resizeObserver){this._resizeObserver.disconnect();this._resizeObserver=undefined}}componentWillRender(){if(!this.dataSet||!this.columns)return;this.classes=m(this.classes);this.__pageDate=this.dataSet;if(this.sidePagination==="stencil"){if(this.searchable&&this.searchText){const t=this.searchText.toLowerCase();const e=this.columns.filter((t=>t.searchable));const s=e.length;if(s>0){this.__pageDate=this.__pageDate.filter((i=>{for(let h=0;h<s;h++){const s=e[h];const l=c(i,s.field);if(l!=null&&String(l).toLowerCase().includes(t)){return true}}return false}))}}this.sortData(this.__pageDate)}}sortData(t){if(!t||t.length<=1)return;const e=[];if(this.groupBy)e.push(this.groupBy);if(this.sortName!=null)e.push(this.sortName);if(this.fieldIndex!==undefined)e.push(this.fieldIndex);if(e.length===0)return;const s=e.length;const i=this.sortName;const h=this.sortOrder==="desc";t.sort(((t,l)=>{for(let n=0;n<s;n++){const s=e[n];const a=c(t,s);const r=c(l,s);if(a===r)continue;if(a==null&&r==null)continue;if(a==null)return-1;if(r==null)return 1;const o=s===i&&h;const d=typeof a;const f=typeof r;if(d==="string"&&f==="string"){const t=a.localeCompare(r);if(t!==0)return o?-t:t}else if(d==="number"&&f==="number"){return o?r-a:a-r}else{const t=String(a).localeCompare(String(r));if(t!==0)return o?-t:t}}return 0}))}render(){if(!this.__pageDate)return;let t=this.__pageDate;if(this.pagination&&this.sidePagination=="stencil"){const e=(this.pageNumber-1)*this.pageSize+1;const s=this.pageNumber*this.pageSize;t=t.slice(e-1,s)}return i(h,null,this.renderTableTop(),i("div",{class:{"text-sm":true,"table-responsive":true,border:this.classes&&!!this.classes["table-bordered"]}},i("div",{class:{"table-container":true,"fixed-table-header":!!this.tableHeight},style:{height:!!this.tableHeight?this.tableHeight:"inherit"}},i("storm-table-body",{ref:t=>this.__bodyRef=t,table:this,dataSet:t,timeStamp:this.timeStamp}))),this.renderTableBottom())}componentDidRender(){this.debouncedDisplaySelectedCount();if(this.isColumnResponsive){this.responsiveResize()}}static get watchers(){return{dataSet:["watchDataSetHandler"],columns:["watchColumnsHandler"],totalSelected:["watchTotalSelectedHandler"]}}};C.style=w;export{C as storm_table};
//# sourceMappingURL=p-f9b6c37f.entry.js.map