class t{provider;keyPrefix;defaultTtlMs;constructor(t,s={}){this.provider=t,this.keyPrefix=s.regionName??t.defaultKeyPrefix??"cache",this.defaultTtlMs=s.ttlMillis??6e5,s.maxEntries&&t.setMaxEntries&&t.setMaxEntries(s.maxEntries)}getFullKey(t){return this.keyPrefix+":"+t}isExpired(t){const s="number"!=typeof t.ttlMillis||isNaN(t.ttlMillis)?this.defaultTtlMs:t.ttlMillis;return Date.now()-t.timestamp>s}async get(t){const s=this.getFullKey(t),i=await this.provider.get(s);return i?this.isExpired(i)?(this.provider.delete(s).catch((()=>{})),null):i.value:null}async set(t,s,i=this.defaultTtlMs){const a=this.getFullKey(t),e={value:s,timestamp:Date.now(),ttlMillis:i};await this.provider.set(a,e)}async delete(t){const s=this.getFullKey(t);await this.provider.delete(s)}async clear(){await this.provider.clear()}async size(){return await this.provider.size()}async destroy(){this.provider.destroy?await this.provider.destroy():await this.provider.clear()}}export{t as C}