const t=6e5;class s{provider;keyPrefix;defaultTtlMs;constructor(s,i={}){this.provider=s;this.keyPrefix=i.regionName??s.defaultKeyPrefix??"cache";this.defaultTtlMs=i.ttlMillis??t;if(i.maxEntries&&s.setMaxEntries){s.setMaxEntries(i.maxEntries)}}getFullKey(t){return this.keyPrefix+":"+t}isExpired(t){const s=typeof t.ttlMillis==="number"&&!isNaN(t.ttlMillis)?t.ttlMillis:this.defaultTtlMs;return Date.now()-t.timestamp>s}async get(t){const s=this.getFullKey(t);const i=await this.provider.get(s);if(!i)return null;if(this.isExpired(i)){this.provider.delete(s).catch((()=>{}));return null}return i.value}async set(t,s,i=this.defaultTtlMs){const e=this.getFullKey(t);const a={value:s,timestamp:Date.now(),ttlMillis:i};await this.provider.set(e,a)}async delete(t){const s=this.getFullKey(t);await this.provider.delete(s)}async clear(){await this.provider.clear()}async size(){return await this.provider.size()}async destroy(){if(this.provider.destroy){await this.provider.destroy()}else{await this.provider.clear()}}}export{s as C};
//# sourceMappingURL=p-pMD06zDP.js.map