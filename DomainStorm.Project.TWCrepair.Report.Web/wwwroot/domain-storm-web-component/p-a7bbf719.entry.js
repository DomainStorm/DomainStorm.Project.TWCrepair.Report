import{r as t,c as i,a as s,h as e,H as h}from"./p-BrLtLH4U.js";import{F as n}from"./p-B4NwC13r.js";import{g as a}from"./p-D2aESlmX.js";import"./p-9Du3dL5x.js";import"./p-E-ZsRS8r.js";const r=":host{display:block}.nav-link:not(.active):hover{color:#e91e63 !important}.nav-link.disabled{color:#7b809a !important}";const l=class{constructor(s){t(this,s);this.activeChanged=i(this,"activeChanged")}_resizeObserver;_navPillsRef;_navsRef;_movingDiv;get host(){return s(this)}value;dataSet;direction="horizontal";activeChanged;async watchDataSetHandler(){this.initDataSet()}async valueHandler(){this.moveNav()}initDataSet(){if(!this.dataSet||this.dataSet.length===0){return}this.dataSet.forEach((t=>{if(!t.id){t.id=a("storm-nav")}}));if(this.value){this.dataSet.forEach((t=>{t.active=t.id===this.value}))}else if(!this.dataSet.some((t=>t.active))){this.dataSet[0].active=true;this.value=this.dataSet[0].id}}async setActive(t){this.value=t}handleItemClick(t,i){if(t){t.preventDefault();t.stopPropagation()}this.value=i}checkSize(){}componentDidLoad(){if(!this.dataSet)return;const t=()=>{const i=this._navPillsRef.querySelector(".nav-link.active");if(!i.offsetWidth&&!i.offsetHeight){return requestAnimationFrame(t)}this.actionRender();this.bindMouseOver();this.observeResize()};t();this.moveNav()}bindMouseOver(){this._navPillsRef.addEventListener("mouseover",(t=>{const i=t.target;const s=i.closest("li");if(s){const t=Array.from(s.closest("ul")?.children||[]);const i=t.indexOf(s)+1;this.bindClickEvent(s,t,i)}}))}bindClickEvent(t,i,s){const e=this._navPillsRef.querySelector(`li:nth-child(${s}) .nav-link`);e?.addEventListener("click",(()=>{this.updateNavPosition(t,i,s)}),{once:true})}moveNav(){if(!this.value)return;this.dataSet.forEach((t=>{t.active=t.id===this.value;const i=this._navsRef[t.id];i.classList.toggle("active",t.active)}));this.updateNavPosition(this._navsRef[this.value].parentElement,Array.from(this._navsRef[this.value].closest("ul").children),Array.from(this._navsRef[this.value].closest("ul").children).indexOf(this._navsRef[this.value].parentElement)+1);this.activeChanged.emit(this.value)}updateNavPosition(t,i,s){if(!this._movingDiv){return}let e=0;if(this._navPillsRef.classList.contains("flex-column")){for(let s=1;s<=i.indexOf(t);s++){e+=this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetHeight}this._movingDiv.style.transform=`translate3d(0px, ${e}px, 0px)`;this._movingDiv.style.height=`${this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetHeight}px`}else{for(let s=1;s<=i.indexOf(t);s++){e+=this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetWidth}this._movingDiv.style.transform=`translate3d(${e}px, 0px, 0px)`;this._movingDiv.style.width=`${this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetWidth}px`}}observeResize(){this._resizeObserver=new ResizeObserver((()=>{this.actionRender()}));this._resizeObserver.observe(this.host)}actionRender(){if(this._navPillsRef==null)return;const t=this._navPillsRef.querySelector(".nav-link.active");if(t==null)return;const i=t.parentElement;const s=Array.from(i.closest("ul").children);this.createOrUpdateMovingNav(t);if(i){const t=this._navPillsRef.classList.contains("flex-column");const e=s.indexOf(i)+1;const h=this.calculateNavOffset(e,t);this.updateMovingNav(h,t,e)}this.adjustLayoutForScreenSize()}createOrUpdateMovingNav(t){if(!this._movingDiv){this._movingDiv=document.createElement("div");const i=t.cloneNode();i.textContent="-";this._movingDiv.classList.add("moving-tab","position-absolute","nav-link");this._movingDiv.appendChild(i);this._navPillsRef.appendChild(this._movingDiv)}this._movingDiv.style.padding="0px";this._movingDiv.style.transition=".5s ease";return this._movingDiv}calculateNavOffset(t,i){let s=0;for(let e=1;e<t;e++){const t=i?"offsetHeight":"offsetWidth";s+=this._navPillsRef.querySelector(`li:nth-child(${e})`)[t]}return s}updateMovingNav(t,i,s){this._movingDiv.style.transform=i?`translate3d(0px, ${t}px, 0px)`:`translate3d(${t}px, 0px, 0px)`;this._movingDiv.style[`width`]=this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetWidth+"px";this._movingDiv.style[`height`]=this._navPillsRef.querySelector(`li:nth-child(${s})`).offsetHeight+"px"}adjustLayoutForScreenSize(){if(window.innerWidth<991&&!this._navPillsRef.classList.contains("flex-column")){this.toggleLayout(true)}else if(window.innerWidth>=991&&this._navPillsRef.classList.contains("on-resize")){this.toggleLayout(false)}}toggleLayout(t){if(t){this._navPillsRef.classList.remove("flex-row");this._navPillsRef.classList.add("flex-column","on-resize")}else{this._navPillsRef.classList.remove("flex-column","on-resize");this._navPillsRef.classList.add("flex-row")}const i=this._navPillsRef.querySelector(".nav-link.active").parentElement;const s=Array.from(i.closest("ul").children);const e=this.calculateNavOffset(s.indexOf(i)+1,t);this._movingDiv.style.transform=t?`translate3d(0px, ${e}px, 0px)`:`translate3d(${e}px, 0px, 0px)`}componentWillRender(){this.initDataSet()}render(){this._navsRef={};if(!this.dataSet)return;return e(h,null,e("div",{class:"nav-wrapper position-relative end-0 m-1"},e("ul",{ref:t=>this._navPillsRef=t,class:{nav:true,"nav-pills":true,"nav-fill":true,"p-1":true,"flex-column":this.direction==="vertical"}},this.dataSet.map((t=>e("li",{class:"nav-item"},e("a",{ref:i=>this._navsRef[t.id]=i,class:{"nav-link":true,"mb-0":true,"px-0":true,"py-1":true,active:t.active,disabled:t.disabled},onClick:i=>this.handleItemClick(i,t.id),href:"#"},e(n,null,t.icon),t.name)))))))}static get watchers(){return{dataSet:["watchDataSetHandler"],value:["valueHandler"]}}};l.style=r;export{l as storm_navs};
//# sourceMappingURL=p-a7bbf719.entry.js.map