import{r as t,c as l,a as e,h as s,H as a,f as o}from"./p-CQNG65Br.js";import{F as i}from"./p-tR-hyYiS.js";import{S as r}from"./p-CAnyxfG4.js";import{a as n,p as b}from"./p-CH__wnBt.js";import{d as h}from"./p-9Du3dL5x.js";import"./p-E-ZsRS8r.js";const d=class{constructor(e){t(this,e),this.pageChange=l(this,"pageChange")}get host(){return e(this)}pageNumber=1;totalPages;paginationSuccessivelySize=5;paginationPagesBySide=1;pageChange;pageFrom=-1;pageTo=-1;cachedPaginationItems=null;lastCalculationKey="";setPage(t){t<1||t>this.totalPages||t===this.pageNumber||(this.pageNumber=t,this.cachedPaginationItems=null,this.lastCalculationKey="",this.pageChange.emit(this.pageNumber))}async componentWillLoad(){await r.applyShadowRootStylesAsync(this.host,"material")}disconnectedCallback(){this.cachedPaginationItems=null,this.lastCalculationKey=""}calculatePageRange(){if(this.totalPages<=0)return this.pageFrom=1,void(this.pageTo=0);if(this.pageNumber>this.totalPages&&(this.pageNumber=this.totalPages),this.pageNumber<1&&(this.pageNumber=1),this.totalPages<=this.paginationSuccessivelySize)return this.pageFrom=1,void(this.pageTo=this.totalPages);const t=Math.floor(this.paginationSuccessivelySize/2);this.pageFrom=Math.max(1,this.pageNumber-t),this.pageTo=Math.min(this.totalPages,this.pageFrom+this.paginationSuccessivelySize-1),this.pageTo-this.pageFrom+1<this.paginationSuccessivelySize&&(this.pageFrom=Math.max(1,this.pageTo-this.paginationSuccessivelySize+1))}componentWillRender(){this.calculatePageRange()}getPaginationItems(){const t=`${this.pageNumber}-${this.totalPages}-${this.paginationSuccessivelySize}-${this.paginationPagesBySide}`;if(this.lastCalculationKey===t&&this.cachedPaginationItems)return this.cachedPaginationItems;const l=[];if(this.pageFrom>1){let t=this.paginationPagesBySide;t>=this.pageFrom&&(t=this.pageFrom-1);for(let e=1;e<=t;e++)l.push({page:e});this.pageFrom-1===t+1?l.push({page:this.pageFrom-1}):this.pageFrom-1>t&&l.push({title:"..."})}for(let t=this.pageFrom;t<=this.pageTo;t++)l.push({page:t});if(this.totalPages>this.pageTo){let t=this.totalPages-(this.paginationPagesBySide-1);this.pageTo>=t&&(t=this.pageTo+1),l.push(this.pageTo+1===t-1?{page:this.pageTo+1}:{title:"..."});for(let e=t;e<=this.totalPages;e++)l.push({page:e})}return this.cachedPaginationItems=l,this.lastCalculationKey=t,l}render(){const t=this.getPaginationItems();return s(a,{key:"d4026dc9a5ddbfd2b8b3564eb5ba22da67045321"},s("ul",{key:"3a614e0464851f0a2d39c58c20259d57135b2690",class:"pagination pagination-primary"},s("li",{key:"19efd76f632376fb8a2bb4e4b35e204678e7a894",class:"page-item"},s("a",{key:"696b30519b7bff7bc2b2b5b909ab395b13db459c",class:"page-link",href:"javascript:;","aria-label":"上一頁",onClick:()=>{this.setPage(1===this.pageNumber?this.totalPages:this.pageNumber-1)}},s("span",{key:"791858aa1c4b3f8206f4dfaba90672b60c5f6c63","aria-hidden":"true"},s(i,{key:"a963724b859820313802a6fa9823928deaa2d563"},"keyboard_arrow_left")))),t.map(((t,l)=>{const e=t.page===this.pageNumber;return s("li",{key:t.page?`page-${t.page}`:`ellipsis-${l}`,class:{"page-item":!0,active:e,disabled:null==t.page},onClick:()=>{t.page&&!e&&this.setPage(t.page)}},s("a",{class:"page-link",href:"javascript:;","aria-current":e?"page":void 0,"aria-label":t.page?`第 ${t.page} 頁`:void 0},t.title||t.page?.toString()))})),s("li",{key:"bd65dd4ca4edf71ce2b6630106d7cfe1c6bcbd71",class:"page-item"},s("a",{key:"55317727cfdb7c94a2746d7dbdf0210ec43c78e8",class:"page-link",href:"javascript:;","aria-label":"下一頁",onClick:()=>{this.setPage(this.pageNumber===this.totalPages?1:this.pageNumber+1)}},s("span",{key:"03688a658056d053e981c16bf7720afa79e2d8f5","aria-hidden":"true"},s(i,{key:"d4b14286cef302d4f3e468788551fbd2f1cc1f09"},"keyboard_arrow_right"))))))}};d.style=":host{display:block}:host dl,:host ol,:host ul{margin-bottom:0}";const m=class{constructor(e){t(this,e),this.clickRow=l(this,"clickRow")}get host(){return e(this)}table;dataSet;timeStamp;rowIndex;columns;clickRow;async updateColumnCheckbox(t){if(!this.dataSet||"checkbox"!==t.type)return;const l=this.getCheckedItemsSum(t.field),e=this.host.querySelector('th[data-field="'+t.field+'"] storm-checkbox');e&&(e.isChecked=l===this.table.totalRows,e.isIndeterminate=l>0&&l<this.table.totalRows)}async updateRowCheckbox(t,l){const e=n(t,this.table.fieldId),s="object"==typeof e?JSON.stringify(e):String(e),a=this.host.querySelector('tr[data-id="'+s+'"] storm-table-cell[data-field="'+l.field+'"]');a&&o(a),l.field===this.table.fieldSelected&&await this.updateRowSelection(t)}async updateRowSelection(t){const l=n(t,this.table.fieldId),e="object"==typeof l?JSON.stringify(l):String(l),s=this.host.querySelector('storm-table-row[data-id="'+e+'"]');s&&await s.updateSelection()}computeColumnClasses(t,l){return{"text-center":"center"===t.align,"text-start":!t.align||"left"===t.align,"text-end":"right"===t.align,"align-middle":!t.valign||"middle"===t.valign,"align-top":"top"===t.valign,"align-bottom":"bottom"===t.valign,"font-weight-bolder":!0,"text-truncate":!0,"table-sorter":t.sortable,"combined-cell":t.children&&t.children.length>0,"child-cell":t.__depth&&t.__depth>1,asc:this.table.sortName===t.field&&"desc"!==this.table.sortOrder,desc:this.table.sortName===t.field&&"desc"===this.table.sortOrder,...l,...t.classes}}renderThead(){if(!this.columns)return;const t=new Map,l=this.columns.filter((t=>!1!==t.visible));for(const e of l){const l=e.__depth||1;t.has(l)||t.set(l,[]),t.get(l).push(e)}const e=Array.from(t.entries()).sort((([t],[l])=>t-l)).map((([,t])=>s("tr",null,t.map((t=>this.renderTheadColumn(t))))));return s("thead",null,e)}renderTheadColumn(t){let l=t.title;const e={"thead-xxs":"detail"===t.type||"serialNumber"===t.type||"radio"===t.type||"checkbox"===t.type,"detail-toggle":"detail"===t.type};if(null==l&&"checkbox"===t.type){const e=this.getCheckedItemsSum(t.field);l=s("storm-checkbox",{type:"checkbox","is-indeterminate":e>0&&e<this.table.totalRows,"is-checked":e===this.table.totalRows,onValueChanged:l=>this.handleColumnCheckChange(l,t),"time-stamp":this.timeStamp})}return this.renderHeaderCell(l,t,e)}renderHeaderCell(t,l,e={}){return s("th",{"data-field":l.field,scope:"col",class:this.computeColumnClasses(l,e),rowspan:l.headerRowspan,colSpan:l.headerColspan,onClick:()=>this.handleColumnClick(l)},s("div",{class:"cell"},t),l.description&&s("div",{class:"table-description"},l.description))}handleColumnClick(t){t.sortable&&this.table.sortChange.emit(t.field===this.table.sortName?"desc"===this.table.sortOrder?{sortName:void 0,sortOrder:void 0}:{sortName:this.table.sortName,sortOrder:"desc"}:{sortName:t.field,sortOrder:"asc"})}async handleColumnCheckChange(t,l){t.detail?await this.table.checkAll(l.field):await this.table.uncheckAll(l.field)}async initSelect(){if(this.dataSet&&this.columns)for(const t of this.dataSet)await this.updateRowSelection(t)}getCheckedItemsSum(t){return this.table.checkedItemsSum?this.table.checkedItemsSum[t]??0:0}renderRow(t,l){const e=n(t,this.table.fieldId),a="object"==typeof e?JSON.stringify(e):String(e);return s("storm-table-row",{"data-id":a,table:this.table,row:t,index:l,columns:this.columns,"time-stamp":this.timeStamp,onClickRow:t=>this.clickRow.emit(t.detail)})}renderRows(){if(this.table.groupBy){let t="";const l=[];for(const[e,a]of this.dataSet.entries()){const o=n(a,this.table.groupBy);o!==t&&(t=o,l.push(s("tr",{class:"group-item table-info"},s("th",{class:"align-middle full-cell",colSpan:this.table.expand.visibleColumnCount},o)))),l.push(this.renderRow(a,e))}return l}return this.dataSet.map(((t,l)=>this.renderRow(t,l)))}renderBody(){if(!this.dataSet?.length){const t={"align-middle":!0,"text-center":!0,"full-cell":!0,...this.table.classes?.["table-sm"]?{"height-100":!0}:{"height-300":!0}};return s("tbody",null,s("tr",null,s("td",{class:t,colSpan:this.table.expand.visibleColumnCount},s("p",{class:"p-4 h6"},"沒有找到符合的結果"))))}return s("tbody",null,this.renderRows())}render(){return s(a,{key:"81c58afeadf64a4664d6ce1e8c1497f8ecc36bf3"},s("table",{key:"a7178d8d542c56d88418a827d983513d71e504a0",class:{table:!0,"mb-0":!0,"table-hover":!!this.table.clickRowTo,"table-layout-auto":"auto"===this.table.layout,"table-layout-fixed":"fixed"===this.table.layout,...b(this.table.classes)}},this.renderThead(),this.renderBody()))}async componentDidRender(){await this.initSelect()}};m.style=":host{display:block}:host .group-item>th{cursor:auto}:host .group-item>th>div{line-height:1;margin:0.25rem}:host span.detail-title{display:inline-block;min-width:75px;font-weight:bold}:host .d-table-none{display:none !important}:host .d-table-cell{display:table-cell !important}storm-table-body .table-bordered>:not(caption)>*,storm-table-body .table-bordered>:not(caption)>*>*{border-width:0}:host .storm-table-4xs .d-table-4xs-none,:host .storm-table-3xs .d-table-4xs-none,:host .storm-table-xxs .d-table-4xs-none,:host .storm-table-xs .d-table-4xs-none,:host .storm-table-sm .d-table-4xs-none,:host .storm-table-md .d-table-4xs-none,:host .storm-table-lg .d-table-4xs-none,:host .storm-table-xl .d-table-4xs-none,:host .storm-table-xxl .d-table-4xs-none,:host .storm-table-3xl .d-table-4xs-none,:host .storm-table-4xl .d-table-4xs-none{display:none !important}:host .storm-table-4xs .d-table-4xs-cell,:host .storm-table-3xs .d-table-4xs-cell,:host .storm-table-xxs .d-table-4xs-cell,:host .storm-table-xs .d-table-4xs-cell,:host .storm-table-sm .d-table-4xs-cell,:host .storm-table-md .d-table-4xs-cell,:host .storm-table-lg .d-table-4xs-cell,:host .storm-table-xl .d-table-4xs-cell,:host .storm-table-xxl .d-table-4xs-cell,:host .storm-table-3xl .d-table-4xs-cell,:host .storm-table-4xl .d-table-4xs-cell{display:table-cell !important}:host .storm-table-3xs .d-table-3xs-none,:host .storm-table-xxs .d-table-3xs-none,:host .storm-table-xs .d-table-3xs-none,:host .storm-table-sm .d-table-3xs-none,:host .storm-table-md .d-table-3xs-none,:host .storm-table-lg .d-table-3xs-none,:host .storm-table-xl .d-table-3xs-none,:host .storm-table-xxl .d-table-3xs-none,:host .storm-table-3xl .d-table-3xs-none,:host .storm-table-4xl .d-table-3xs-none{display:none !important}:host .storm-table-3xs .d-table-3xs-cell,:host .storm-table-xxs .d-table-3xs-cell,:host .storm-table-xs .d-table-3xs-cell,:host .storm-table-sm .d-table-3xs-cell,:host .storm-table-md .d-table-3xs-cell,:host .storm-table-lg .d-table-3xs-cell,:host .storm-table-xl .d-table-3xs-cell,:host .storm-table-xxl .d-table-3xs-cell,:host .storm-table-3xl .d-table-3xs-cell,:host .storm-table-4xl .d-table-3xs-cell{display:table-cell !important}:host .storm-table-xxs .d-table-xxs-none,:host .storm-table-xs .d-table-xxs-none,:host .storm-table-sm .d-table-xxs-none,:host .storm-table-md .d-table-xxs-none,:host .storm-table-lg .d-table-xxs-none,:host .storm-table-xl .d-table-xxs-none,:host .storm-table-xxl .d-table-xxs-none,:host .storm-table-3xl .d-table-xxs-none,:host .storm-table-4xl .d-table-xxs-none{display:none !important}:host .storm-table-xxs .d-table-xxs-cell,:host .storm-table-xs .d-table-xxs-cell,:host .storm-table-sm .d-table-xxs-cell,:host .storm-table-md .d-table-xxs-cell,:host .storm-table-lg .d-table-xxs-cell,:host .storm-table-xl .d-table-xxs-cell,:host .storm-table-xxl .d-table-xxs-cell,:host .storm-table-3xl .d-table-xxs-cell,:host .storm-table-4xl .d-table-xxs-cell{display:table-cell !important}:host .storm-table-xs .d-table-xs-none,:host .storm-table-sm .d-table-xs-none,:host .storm-table-md .d-table-xs-none,:host .storm-table-lg .d-table-xs-none,:host .storm-table-xl .d-table-xs-none,:host .storm-table-xxl .d-table-xs-none,:host .storm-table-3xl .d-table-xs-none,:host .storm-table-4xl .d-table-xs-none{display:none !important}:host .storm-table-xs .d-table-xs-cell,:host .storm-table-sm .d-table-xs-cell,:host .storm-table-md .d-table-xs-cell,:host .storm-table-lg .d-table-xs-cell,:host .storm-table-xl .d-table-xs-cell,:host .storm-table-xxl .d-table-xs-cell,:host .storm-table-3xl .d-table-xs-cell,:host .storm-table-4xl .d-table-xs-cell{display:table-cell !important}:host .storm-table-sm .d-table-sm-none,:host .storm-table-md .d-table-sm-none,:host .storm-table-lg .d-table-sm-none,:host .storm-table-xl .d-table-sm-none,:host .storm-table-xxl .d-table-sm-none,:host .storm-table-3xl .d-table-sm-none,:host .storm-table-4xl .d-table-sm-none{display:none !important}:host .storm-table-sm .d-table-sm-cell,:host .storm-table-md .d-table-sm-cell,:host .storm-table-lg .d-table-sm-cell,:host .storm-table-xl .d-table-sm-cell,:host .storm-table-xxl .d-table-sm-cell,:host .storm-table-3xl .d-table-sm-cell,:host .storm-table-4xl .d-table-sm-cell{display:table-cell !important}:host .storm-table-md .d-table-md-none,:host .storm-table-lg .d-table-md-none,:host .storm-table-xl .d-table-md-none,:host .storm-table-xxl .d-table-md-none,:host .storm-table-3xl .d-table-md-none,:host .storm-table-4xl .d-table-md-none{display:none !important}:host .storm-table-md .d-table-md-cell,:host .storm-table-lg .d-table-md-cell,:host .storm-table-xl .d-table-md-cell,:host .storm-table-xxl .d-table-md-cell,:host .storm-table-3xl .d-table-md-cell,:host .storm-table-4xl .d-table-md-cell{display:table-cell !important}:host .storm-table-lg .d-table-lg-none,:host .storm-table-xl .d-table-lg-none,:host .storm-table-xxl .d-table-lg-none,:host .storm-table-3xl .d-table-lg-none,:host .storm-table-4xl .d-table-lg-none{display:none !important}:host .storm-table-lg .d-table-lg-cell,:host .storm-table-xl .d-table-lg-cell,:host .storm-table-xxl .d-table-lg-cell,:host .storm-table-3xl .d-table-lg-cell,:host .storm-table-4xl .d-table-lg-cell{display:table-cell !important}:host .storm-table-xl .d-table-xl-none,:host .storm-table-xxl .d-table-xl-none,:host .storm-table-3xl .d-table-xl-none,:host .storm-table-4xl .d-table-xl-none{display:none !important}:host .storm-table-xl .d-table-xl-cell,:host .storm-table-xxl .d-table-xl-cell,:host .storm-table-3xl .d-table-xl-cell,:host .storm-table-4xl .d-table-xl-cell{display:table-cell !important}:host .storm-table-xxl .d-table-xxl-none,:host .storm-table-3xl .d-table-xxl-none,:host .storm-table-4xl .d-table-xxl-none{display:none !important}:host .storm-table-xxl .d-table-xxl-cell,:host .storm-table-3xl .d-table-xxl-cell,:host .storm-table-4xl .d-table-xxl-cell{display:table-cell !important}:host .storm-table-3xl .d-table-3xl-none,:host .storm-table-4xl .d-table-3xl-none{display:none !important}:host .storm-table-3xl .d-table-3xl-cell,:host .storm-table-4xl .d-table-3xl-cell{display:table-cell !important}:host .storm-table-4xl .d-table-4xl-none{display:none !important}:host .storm-table-4xl .d-table-4xl-cell{display:table-cell !important}";const c=class{constructor(e){t(this,e),this.clickRow=l(this,"clickRow")}get host(){return e(this)}table;row;index;columns;timeStamp;clickRow;async updateSelection(){const t=!0===n(this.row,this.table.fieldSelected),l=this.host.querySelector("tr");l&&l.classList.toggle("table-primary",t)}computeCellClasses(t,l){return{"text-center":"center"===t.align,"text-start":!t.align||"left"===t.align,"text-end":"right"===t.align,"align-middle":!t.valign||"middle"===t.valign,"align-top":"top"===t.valign,"align-bottom":"bottom"===t.valign,...l,...t.classes}}renderCell(t){const l=this.computeCellClasses(t,{"text-xs":"serialNumber"===t.type,"detail-toggle":"detail"===t.type});return s("td",{"data-field":t.field,class:l},this.renderCellContent(t))}rerender=h((()=>{o(this)}),100);renderCellContent(t){return s("storm-table-cell",{table:this.table,row:this.row,index:this.index,column:t,"time-stamp":this.timeStamp,"data-field":t.field,onCellDidValueChanged:()=>{this.rerender()}})}renderDetail(){return this.columns.filter((t=>!0===t.responsive&&!1!==t.visible)).map((t=>s("li",{class:{"list-group-item":!0,...t.rwdClassReversal}},s("span",{class:"detail-title"},t.title),s("span",null,this.renderCellContent(t)))))}render(){const t=n(this.row,this.table.fieldId),l=!0===n(this.row,this.table.fieldSelected),e=this.columns.filter((t=>!1!==t.visible&&(!t.children||0===t.children.length))),o=s("tr",{"data-id":t,class:{"table-primary":l},onClick:()=>this.clickRow.emit(t)},e.map((t=>this.renderCell(t))));if(this.table.isColumnResponsive){const t=this.columns.find((t=>"detail"===t.type)),l=t?.classes?{...t.classes,"row-detail":!0,"d-none":!0}:{"row-detail":!0,"d-none":!0};return s(a,null,o,s("tr",{class:l,"data-index":this.index},s("td",{class:"full-cell",colSpan:this.table.expand.visibleColumnCount},s("ul",{class:"list-group list-group-flush"},this.renderDetail()))))}return s(a,null,o)}};c.style="storm-table-row{display:contents}.table storm-table-row>tr{border-width:0}.table-striped>tbody>storm-table-row:nth-of-type(odd)>tr{background-color:rgba(0, 0, 0, 0.05)}";export{d as storm_pagination,m as storm_table_body,c as storm_table_row}