{"version":3,"file":"p-DfbG4xGV.js","sources":["src/utils/functional/functional.tsx"],"sourcesContent":["import { FunctionalComponent, h } from '@stencil/core';\r\nimport { debounce, parseClassNames } from '../utils';\r\nimport type { FnHrProps, FnIconProps, FnIconSwitchProps, FnSearchInputProps, FnTagProps } from './interface';\r\n\r\n/**\r\n * 圖示\r\n * @param ref 元素的引用函式\r\n * @param class\r\n * @param children 圖示名稱\r\n * @returns JSX 元素\r\n */\r\nexport const FnIcon: FunctionalComponent<FnIconProps & { ref?: (el: HTMLElement | null) => void }> = ({ class: classes, onClick, ref }, children) => {\r\n  if (!children || !Array.isArray(children) || children.length !== 1 || typeof children[0] !== 'string' || !String(children[0]).trim()) return;\r\n\r\n  const iconClass = {\r\n    'material-icons': true,\r\n    'align-middle': true,\r\n    ...parseClassNames(classes),\r\n  };\r\n\r\n  return (\r\n    <i\r\n      class={iconClass}\r\n      ref={ref}\r\n      onClick={ev => {\r\n        if (!onClick) return;\r\n        ev.stopPropagation();\r\n        onClick(ev);\r\n      }}\r\n    >\r\n      {children}\r\n    </i>\r\n  );\r\n};\r\n\r\n/**\r\n * 切換圖示元件\r\n * @param class 類別名稱\r\n * @param on 是否開啟狀態\r\n * @param onToggle 切換狀態的事件處理函式\r\n * @param disabled 是否禁用\r\n * @returns JSX 元素\r\n */\r\nexport const FnIconSwitch: FunctionalComponent<FnIconSwitchProps> = ({ class: classes, on = false, onToggle, toggleOnIcon = 'remove', toggleOffIcon = 'add' }) => {\r\n  let onIconRef: HTMLElement | null = null;\r\n  let offIconRef: HTMLElement | null = null;\r\n  let currentOn = on;\r\n\r\n  const toggleIcons = () => {\r\n    currentOn = !currentOn;\r\n\r\n    if (onIconRef && offIconRef) {\r\n      onIconRef.classList.toggle('d-none', !currentOn);\r\n      offIconRef.classList.toggle('d-none', currentOn);\r\n    }\r\n\r\n    onToggle && onToggle(currentOn);\r\n  };\r\n\r\n  const handleClick = (ev: MouseEvent) => {\r\n    ev.stopPropagation();\r\n    toggleIcons();\r\n  };\r\n  return (\r\n    <span\r\n      class={{\r\n        'cursor-pointer': true,\r\n        ...parseClassNames(classes),\r\n      }}\r\n      onClick={handleClick}\r\n    >\r\n      <FnIcon ref={el => (onIconRef = el)} class={{ 'd-none': !on }}>\r\n        {toggleOnIcon}\r\n      </FnIcon>\r\n      <FnIcon ref={el => (offIconRef = el)} class={{ 'd-none': on }}>\r\n        {toggleOffIcon}\r\n      </FnIcon>\r\n    </span>\r\n  );\r\n};\r\n\r\n/**\r\n * 搜尋框元件\r\n *\r\n * @param ref 對應的 HTMLStormInputGroupElement 元素的引用\r\n * @param value 輸入框目前的值\r\n * @param onValueChanged 當值變更時觸發的事件處理函式\r\n * @param placeholder 輸入框預設文字，預設為 '搜尋'\r\n *\r\n * @returns JSX 元素\r\n */\r\nexport const FnSearchInput: FunctionalComponent<FnSearchInputProps> = ({ ref, value, onValueChanged, placeholder }) => {\r\n  const handleValueChanged = debounce((ev: CustomEvent) => {\r\n    if (!onValueChanged) return;\r\n    onValueChanged(ev);\r\n  }, 1000);\r\n\r\n  return (\r\n    <div class=\"mb-1\">\r\n      <storm-input-group\r\n        ref={ref}\r\n        placeholder={placeholder ?? '搜尋'}\r\n        input-style=\"outline\"\r\n        prepend-icon=\"search\"\r\n        value={value}\r\n        onValueChanged={(ev: CustomEvent) => {\r\n          ev.stopPropagation();\r\n          handleValueChanged(ev);\r\n        }}\r\n        onChange={(ev: CustomEvent) => {\r\n          if (ev) ev.stopPropagation();\r\n        }}\r\n      ></storm-input-group>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const FnHr: FunctionalComponent<FnHrProps> = ({ class: classes }) => (\r\n  <hr\r\n    class={{\r\n      dark: true,\r\n      horizontal: true,\r\n      'mx-2': true,\r\n      'my-0': true,\r\n      ...parseClassNames(classes),\r\n    }}\r\n  />\r\n);\r\n\r\nexport const FnTag: FunctionalComponent<FnTagProps> = ({ lable, onClickCancel }) => (\r\n  <span\r\n    class={{\r\n      'storm-tag': true,\r\n      badge: true,\r\n      'bg-primary': true,\r\n      'rounded-pill': true,\r\n      'me-1': true,\r\n      'px-2': true,\r\n      'py-1': true,\r\n    }}\r\n  >\r\n    {lable}\r\n    {onClickCancel != null ? <FnIcon onClick={onClickCancel}>cancel</FnIcon> : undefined}\r\n  </span>\r\n);\r\n"],"names":[],"mappings":"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"}