const t=6e5;class s{provider;keyPrefix;defaultTtlMs;constructor(s,i={}){this.provider=s;this.keyPrefix=i.regionName?i.regionName:s.defaultKeyPrefix??"cache";this.defaultTtlMs=i.ttlMillis||t;if(i.maxEntries&&s.setMaxEntries){s.setMaxEntries(i.maxEntries)}}getFullKey(t){return this.keyPrefix+":"+t}isExpired(t){const s=typeof t.ttlMillis==="number"&&!isNaN(t.ttlMillis)?t.ttlMillis:this.defaultTtlMs;return Date.now()-t.timestamp>s}async get(t){const s=this.getFullKey(t);const i=await this.provider.get(s);if(!i||this.isExpired(i)){return null}return i.value}async set(t,s,i=this.defaultTtlMs){const e=this.getFullKey(t);await this.provider.set(e,{value:s,timestamp:Date.now(),ttlMillis:i})}async delete(t){const s=this.getFullKey(t);await this.provider.delete(s)}async clear(){await this.provider.clear()}async size(){return await this.provider.size()}}export{s as C};
//# sourceMappingURL=p-Dk4EqV8F.js.map