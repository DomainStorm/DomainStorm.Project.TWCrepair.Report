{"file":"storm-pdf-view.entry.esm.js","mappings":"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","names":[],"sources":["src/utils/browser-env.ts","src/components/storm-pdf-view/storm-pdf-view.css?tag=storm-pdf-view&encapsulation=shadow","src/components/storm-pdf-view/storm-pdf-view.tsx"],"sourcesContent":["import type { BrowserEnvironment } from './interface';\r\n\r\n/**\r\n * High-performance singleton class for browser environment detection with lazy evaluation\r\n */\r\nexport class BrowserEnv implements BrowserEnvironment {\r\n  // Cached detection results\r\n  private _isModernBrowser?: boolean;\r\n  private _isSafariIOSDesktopMode?: boolean;\r\n  private _isMobileDevice?: boolean;\r\n  private _isSafariDesktop?: boolean;\r\n\r\n  // Static singleton and cached browser data\r\n  private static _instance: BrowserEnv | null = null;\r\n  private static _userAgent: string;\r\n  private static _navigator: Navigator;\r\n  private static _isInitialized = false;\r\n\r\n  // Compiled regex patterns for better performance\r\n  private static readonly MOBILE_REGEX = /Mobi|Tablet|Android|iPad|iPhone/;\r\n  private static readonly APPLE_VENDOR_REGEX = /Apple/;\r\n  private static readonly SAFARI_REGEX = /Safari/;\r\n\r\n  /**\r\n   * Private constructor - use getCurrent() to get instance\r\n   */\r\n  private constructor() {\r\n    this.initializeStaticData();\r\n  }\r\n\r\n  /**\r\n   * Initialize static browser data once\r\n   */\r\n  private static initializeStaticData(): void {\r\n    if (!this._isInitialized && typeof window !== 'undefined') {\r\n      this._userAgent = window.navigator.userAgent;\r\n      this._navigator = window.navigator;\r\n      this._isInitialized = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize static data for instance\r\n   */\r\n  private initializeStaticData(): void {\r\n    BrowserEnv.initializeStaticData();\r\n  }\r\n\r\n  /**\r\n   * Detects if browser supports modern JavaScript features\r\n   */\r\n  get isModernBrowser(): boolean {\r\n    if (this._isModernBrowser === undefined) {\r\n      this._isModernBrowser = typeof window?.Promise === 'function';\r\n    }\r\n    return this._isModernBrowser;\r\n  }\r\n\r\n  /**\r\n   * Detects Safari iOS in desktop mode (iPad requesting desktop site)\r\n   */\r\n  get isSafariIOSDesktopMode(): boolean {\r\n    if (this._isSafariIOSDesktopMode === undefined) {\r\n      const nav = BrowserEnv._navigator;\r\n      this._isSafariIOSDesktopMode =\r\n        nav.platform === 'MacIntel' &&\r\n        typeof nav.maxTouchPoints === 'number' &&\r\n        nav.maxTouchPoints > 1;\r\n    }\r\n    return this._isSafariIOSDesktopMode;\r\n  }\r\n\r\n  /**\r\n   * Detects if device is mobile (includes tablets and iOS desktop mode)\r\n   */\r\n  get isMobileDevice(): boolean {\r\n    if (this._isMobileDevice === undefined) {\r\n      this._isMobileDevice =\r\n        this.isSafariIOSDesktopMode ||\r\n        BrowserEnv.MOBILE_REGEX.test(BrowserEnv._userAgent);\r\n    }\r\n    return this._isMobileDevice;\r\n  }\r\n\r\n  /**\r\n   * Detects desktop Safari browser (excludes mobile devices)\r\n   */\r\n  get isSafariDesktop(): boolean {\r\n    if (this._isSafariDesktop === undefined) {\r\n      const nav = BrowserEnv._navigator;\r\n      this._isSafariDesktop =\r\n        !this.isMobileDevice &&\r\n        typeof nav.vendor === 'string' &&\r\n        BrowserEnv.APPLE_VENDOR_REGEX.test(nav.vendor) &&\r\n        BrowserEnv.SAFARI_REGEX.test(BrowserEnv._userAgent);\r\n    }\r\n    return this._isSafariDesktop;\r\n  }\r\n\r\n  /**\r\n   * Gets the current browser environment singleton instance\r\n   * @returns {BrowserEnv} The browser environment singleton instance\r\n   */\r\n  static getCurrent(): BrowserEnv {\r\n    if (!BrowserEnv._instance) {\r\n      BrowserEnv._instance = new BrowserEnv();\r\n    }\r\n    return BrowserEnv._instance;\r\n  }\r\n\r\n  /**\r\n   * Reset singleton instance (mainly for testing)\r\n   */\r\n  static reset(): void {\r\n    BrowserEnv._instance = null;\r\n    BrowserEnv._isInitialized = false;\r\n  }\r\n\r\n  /**\r\n   * Get a summary of browser environment\r\n   */\r\n  getSummary(): BrowserEnvironment {\r\n    return {\r\n      isModernBrowser: this.isModernBrowser,\r\n      isSafariIOSDesktopMode: this.isSafariIOSDesktopMode,\r\n      isMobileDevice: this.isMobileDevice,\r\n      isSafariDesktop: this.isSafariDesktop\r\n    };\r\n  }\r\n}\r\n",":host {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}","import { Component, Element, Prop, h } from '@stencil/core';\r\nimport { BrowserEnv } from '../../utils/browser-env';\r\nimport { SharedStyles } from '../../utils/shared-styles';\r\n\r\n@Component({\r\n  tag: 'storm-pdf-view',\r\n  styleUrl: 'storm-pdf-view.css',\r\n  shadow: true,\r\n})\r\nexport class StormPdfView {\r\n  @Element() host: HTMLElement;\r\n  @Prop() assumptionMode: boolean = true;\r\n  @Prop() supportRedirect: boolean = false;\r\n  @Prop() forceIframe: boolean = false;\r\n  @Prop() url: string;\r\n  @Prop() width: string = '100%';\r\n  @Prop() height: string = '100%';\r\n  @Prop() viewTitle: string = '';\r\n  @Prop() omitInlineStyles: boolean = false;\r\n\r\n  async componentWillLoad() {\r\n    await SharedStyles.applyShadowRootStylesAsync(this.host, 'material');\r\n  }\r\n\r\n  render() {\r\n    if (!this.url) {\r\n      console.log('URL is not valid');\r\n      return;\r\n    }\r\n\r\n    if ((!BrowserEnv.getCurrent().isMobileDevice && BrowserEnv.getCurrent().isModernBrowser) || (this.assumptionMode && !BrowserEnv.getCurrent().isMobileDevice)) {\r\n      if (this.forceIframe || this.supportRedirect || BrowserEnv.getCurrent().isSafariDesktop) {\r\n        return <storm-html-view url={this.url} width={this.width} height={this.height} viewTitle={this.viewTitle} omitInlineStyles={this.omitInlineStyles} />;\r\n      } else {\r\n        let style: any = {};\r\n        if (!this.omitInlineStyles) {\r\n          style.width = this.width;\r\n          style.height = this.height;\r\n        }\r\n        return <embed title={this.viewTitle} src={this.url} type=\"application/pdf\" style={style} />;\r\n      }\r\n    }\r\n    throw new Error('This browser does not support embedded PDFs');\r\n  }\r\n}\r\n"],"version":3}