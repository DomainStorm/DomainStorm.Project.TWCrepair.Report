{"version":3,"names":["BrowserEnv","isModernBrowser","isSafariIOSDesktopMode","isMobileDevice","isSafariDesktop","static","constructor","nav","window","navigator","ua","userAgent","this","Promise","platform","maxTouchPoints","undefined","test","vendor","getCurrent","_current","stormPdfViewCss","StormPdfView","assumptionMode","supportRedirect","forceIframe","url","width","height","viewTitle","omitInlineStyles","componentWillLoad","SharedStyles","applyShadowRootStyles","host","render","console","log","h","style","title","src","type","Error"],"sources":["src/utils/browser-env.ts","src/components/storm-pdf-view/storm-pdf-view.css?tag=storm-pdf-view&encapsulation=shadow","src/components/storm-pdf-view/storm-pdf-view.tsx"],"sourcesContent":["/**\r\n * 瀏覽器環境檢測類別\r\n */\r\nexport class BrowserEnv {\r\n  /**\r\n   * 是否為現代瀏覽器\r\n   */\r\n  isModernBrowser: boolean;\r\n\r\n  /**\r\n   * 是否為 Safari iOS 桌面模式\r\n   */\r\n  isSafariIOSDesktopMode: boolean;\r\n\r\n  /**\r\n   * 是否為移動裝置\r\n   */\r\n  isMobileDevice: boolean;\r\n\r\n  /**\r\n   * 是否為 Safari 桌面版\r\n   */\r\n  isSafariDesktop: boolean;\r\n\r\n  private static _current: BrowserEnv;\r\n\r\n  /**\r\n   * 私有建構子，初始化瀏覽器環境屬性\r\n   */\r\n  private constructor() {\r\n    const nav = window.navigator;\r\n    const ua = window.navigator.userAgent;\r\n\r\n    // 檢查是否支援 Promise，以判斷是否為現代瀏覽器\r\n    this.isModernBrowser = typeof window.Promise === 'function';\r\n\r\n    // 檢查是否為 Safari iOS 桌面模式\r\n    this.isSafariIOSDesktopMode = nav.platform === 'MacIntel' && nav.maxTouchPoints !== undefined && nav.maxTouchPoints > 1;\r\n\r\n    // 檢查是否為移動裝置\r\n    this.isMobileDevice = this.isSafariIOSDesktopMode || /Mobi|Tablet|Android|iPad|iPhone/.test(ua);\r\n\r\n    // 檢查是否為 Safari 桌面版\r\n    this.isSafariDesktop = !this.isMobileDevice && nav.vendor !== undefined && /Apple/.test(nav.vendor) && /Safari/.test(ua);\r\n  }\r\n\r\n  /**\r\n   * 取得目前的瀏覽器環境實例\r\n   * @returns {BrowserEnv} 目前的瀏覽器環境實例\r\n   */\r\n  static getCurrent(): BrowserEnv {\r\n    if (!BrowserEnv._current) {\r\n      BrowserEnv._current = new BrowserEnv();\r\n    }\r\n    return BrowserEnv._current;\r\n  }\r\n}\r\n",":host {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}","import { Component, Element, Prop, h } from '@stencil/core';\r\nimport { BrowserEnv } from '../../utils/browser-env';\r\nimport { SharedStyles } from '../../utils/shared-styles';\r\n\r\n@Component({\r\n  tag: 'storm-pdf-view',\r\n  styleUrl: 'storm-pdf-view.css',\r\n  shadow: true,\r\n})\r\nexport class StormPdfView {\r\n  @Element() host: HTMLElement;\r\n  @Prop() assumptionMode: boolean = true;\r\n  @Prop() supportRedirect: boolean = false;\r\n  @Prop() forceIframe: boolean = false;\r\n  @Prop() url: string;\r\n  @Prop() width: string = '100%';\r\n  @Prop() height: string = '100%';\r\n  @Prop() viewTitle: string = '';\r\n  @Prop() omitInlineStyles: boolean = false;\r\n\r\n  componentWillLoad() {\r\n    SharedStyles.applyShadowRootStyles(this.host);\r\n  }\r\n\r\n  render() {\r\n    if (!this.url) {\r\n      console.log('URL is not valid');\r\n      return;\r\n    }\r\n\r\n    if ((!BrowserEnv.getCurrent().isMobileDevice && BrowserEnv.getCurrent().isModernBrowser) || (this.assumptionMode && !BrowserEnv.getCurrent().isMobileDevice)) {\r\n      if (this.forceIframe || this.supportRedirect || BrowserEnv.getCurrent().isSafariDesktop) {\r\n        return <storm-html-view url={this.url} width={this.width} height={this.height} viewTitle={this.viewTitle} omitInlineStyles={this.omitInlineStyles} />;\r\n      } else {\r\n        let style: any = {};\r\n        if (!this.omitInlineStyles) {\r\n          style.width = this.width;\r\n          style.height = this.height;\r\n        }\r\n        return <embed title={this.viewTitle} src={this.url} type=\"application/pdf\" style={style} />;\r\n      }\r\n    }\r\n    throw new Error('This browser does not support embedded PDFs');\r\n  }\r\n}\r\n"],"mappings":"4FAGaA,EAIXC,gBAKAC,uBAKAC,eAKAC,gBAEQC,gBAKR,WAAAC,GACE,MAAMC,EAAMC,OAAOC,UACnB,MAAMC,EAAKF,OAAOC,UAAUE,UAG5BC,KAAKX,uBAAyBO,OAAOK,UAAY,WAGjDD,KAAKV,uBAAyBK,EAAIO,WAAa,YAAcP,EAAIQ,iBAAmBC,WAAaT,EAAIQ,eAAiB,EAGtHH,KAAKT,eAAiBS,KAAKV,wBAA0B,kCAAkCe,KAAKP,GAG5FE,KAAKR,iBAAmBQ,KAAKT,gBAAkBI,EAAIW,SAAWF,WAAa,QAAQC,KAAKV,EAAIW,SAAW,SAASD,KAAKP,E,CAOvH,iBAAOS,GACL,IAAKnB,EAAWoB,SAAU,CACxBpB,EAAWoB,SAAW,IAAIpB,C,CAE5B,OAAOA,EAAWoB,Q,ECtDtB,MAAMC,EAAkB,uE,MCSXC,EAAY,M,mDAEfC,eAA0B,KAC1BC,gBAA2B,MAC3BC,YAAuB,MACvBC,IACAC,MAAgB,OAChBC,OAAiB,OACjBC,UAAoB,GACpBC,iBAA4B,MAEpC,iBAAAC,GACEC,EAAaC,sBAAsBrB,KAAKsB,K,CAG1C,MAAAC,GACE,IAAKvB,KAAKc,IAAK,CACbU,QAAQC,IAAI,oBACZ,M,CAGF,IAAMrC,EAAWmB,aAAahB,gBAAkBH,EAAWmB,aAAalB,iBAAqBW,KAAKW,iBAAmBvB,EAAWmB,aAAahB,eAAiB,CAC5J,GAAIS,KAAKa,aAAeb,KAAKY,iBAAmBxB,EAAWmB,aAAaf,gBAAiB,CACvF,OAAOkC,EAAiB,mBAAAZ,IAAKd,KAAKc,IAAKC,MAAOf,KAAKe,MAAOC,OAAQhB,KAAKgB,OAAQC,UAAWjB,KAAKiB,UAAWC,iBAAkBlB,KAAKkB,kB,KAC5H,CACL,IAAIS,EAAa,GACjB,IAAK3B,KAAKkB,iBAAkB,CAC1BS,EAAMZ,MAAQf,KAAKe,MACnBY,EAAMX,OAAShB,KAAKgB,M,CAEtB,OAAOU,EAAA,SAAOE,MAAO5B,KAAKiB,UAAWY,IAAK7B,KAAKc,IAAKgB,KAAK,kBAAkBH,MAAOA,G,EAGtF,MAAM,IAAII,MAAM,8C","ignoreList":[]}