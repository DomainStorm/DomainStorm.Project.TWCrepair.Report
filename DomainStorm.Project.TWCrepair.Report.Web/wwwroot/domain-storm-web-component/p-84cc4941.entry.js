import{r as e,a as s,h as t,H as r}from"./p-CSg1USUf.js";import{b as i}from"./p-BGxJrMAs.js";import{S as a}from"./p-C8ENAGO3.js";const o=".storm-carousel .center{display:block;text-align:-webkit-center}";const c=class{constructor(s){e(this,s)}get host(){return s(this)}dataSet;fade=false;wrap=true;carousel;carouselRef;videoRefs;componentWillLoad(){a.applyShadowRootStyles(this.host)}componentDidRender(){if(!this.dataSet)return;this.carousel=new i.Carousel(this.carouselRef,{wrap:this.wrap,ride:"carousel"});this.carouselRef.addEventListener("slid.bs.carousel",(e=>{this.controlInterval(this.dataSet.playListItems[e.to])}));if(this.dataSet&&this.dataSet.playListItems?.length>0){this.controlInterval(this.dataSet.playListItems[0])}this.videoRefs?.forEach((e=>{e.addEventListener("ended",(()=>{this.carousel.next()}))}))}addItem(){if(!this.dataSet)return;this.videoRefs=new Map;return this.dataSet.playListItems.map(((e,s)=>t("div",{class:s==0?"carousel-item center active":"carousel-item center","data-bs-interval":e.playDuration>0?e.playDuration*1e3:false},this.addItemElement(e))))}addItemElement=e=>{if(e.mimeType=="text/html"){return t("div",{innerHTML:e.content})}else if(e.mimeType.startsWith("image/")){return t("img",{class:"d-block",src:e.url})}else if(e.mimeType.startsWith("video/")){return t("video",{ref:s=>this.videoRefs.set(e,s),controls:true,autoplay:true},t("source",{src:e.url,type:e.mimeType}))}};controlInterval=e=>{if(e.mimeType.startsWith("video/")){this.carousel.pause();this.videoRefs.get(e).currentTime=0;this.videoRefs.get(e).play()}else{this.carousel.cycle()}};render(){return t(r,{key:"bc9dc3470f14035de22b27d7b39eb67fc489c145"},t("div",{key:"4e042392074242abdbe1814ac0d3d73a10442094",id:"carouselControls",class:this.fade?"carousel slide carousel-fade":"carousel slide",ref:e=>this.carouselRef=e},t("div",{key:"8d2ed582408eeea0eebbb0d61e381e2e58a57418",class:"carousel-inner"},this.addItem())))}};c.style=o;export{c as storm_carousel};
//# sourceMappingURL=p-84cc4941.entry.js.map