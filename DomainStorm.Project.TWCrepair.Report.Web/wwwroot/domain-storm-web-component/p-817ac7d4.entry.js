import{r as t,c as e,a as l,h as s,H as a,f as o}from"./p-BrLtLH4U.js";import{F as i}from"./p-B4NwC13r.js";import{S as r}from"./p-B0cWbvbo.js";import{a as n,p as b}from"./p-D2THwjm1.js";import"./p-9Du3dL5x.js";import"./p-E-ZsRS8r.js";const h=":host{display:block}:host dl,:host ol,:host ul{margin-bottom:0}";const d=class{constructor(l){t(this,l);this.pageChange=e(this,"pageChange")}get host(){return l(this)}pageNumber=1;totalPages;paginationSuccessivelySize=5;paginationPagesBySide=1;pageChange;pageFrom=-1;pageTo=-1;cachedPaginationItems=null;lastCalculationKey="";setPage(t){if(t<1||t>this.totalPages||t===this.pageNumber){return}this.pageNumber=t;this.cachedPaginationItems=null;this.lastCalculationKey="";this.pageChange.emit(this.pageNumber)}async componentWillLoad(){await r.applyShadowRootStylesAsync(this.host,"material")}disconnectedCallback(){this.cachedPaginationItems=null;this.lastCalculationKey=""}calculatePageRange(){if(this.totalPages<=0){this.pageFrom=1;this.pageTo=0;return}if(this.pageNumber>this.totalPages){this.pageNumber=this.totalPages}if(this.pageNumber<1){this.pageNumber=1}if(this.totalPages<=this.paginationSuccessivelySize){this.pageFrom=1;this.pageTo=this.totalPages;return}const t=Math.floor(this.paginationSuccessivelySize/2);this.pageFrom=Math.max(1,this.pageNumber-t);this.pageTo=Math.min(this.totalPages,this.pageFrom+this.paginationSuccessivelySize-1);if(this.pageTo-this.pageFrom+1<this.paginationSuccessivelySize){this.pageFrom=Math.max(1,this.pageTo-this.paginationSuccessivelySize+1)}}componentWillRender(){this.calculatePageRange()}getPaginationItems(){const t=`${this.pageNumber}-${this.totalPages}-${this.paginationSuccessivelySize}-${this.paginationPagesBySide}`;if(this.lastCalculationKey===t&&this.cachedPaginationItems){return this.cachedPaginationItems}const e=[];if(this.pageFrom>1){let t=this.paginationPagesBySide;if(t>=this.pageFrom)t=this.pageFrom-1;for(let l=1;l<=t;l++){e.push({page:l})}if(this.pageFrom-1===t+1){e.push({page:this.pageFrom-1})}else if(this.pageFrom-1>t){e.push({title:"..."})}}for(let t=this.pageFrom;t<=this.pageTo;t++){e.push({page:t})}if(this.totalPages>this.pageTo){let t=this.totalPages-(this.paginationPagesBySide-1);if(this.pageTo>=t)t=this.pageTo+1;if(this.pageTo+1===t-1){e.push({page:this.pageTo+1})}else{e.push({title:"..."})}for(let l=t;l<=this.totalPages;l++){e.push({page:l})}}this.cachedPaginationItems=e;this.lastCalculationKey=t;return e}render(){const t=this.getPaginationItems();return s(a,{key:"d4026dc9a5ddbfd2b8b3564eb5ba22da67045321"},s("ul",{key:"3a614e0464851f0a2d39c58c20259d57135b2690",class:"pagination pagination-primary"},s("li",{key:"19efd76f632376fb8a2bb4e4b35e204678e7a894",class:"page-item"},s("a",{key:"696b30519b7bff7bc2b2b5b909ab395b13db459c",class:"page-link",href:"javascript:;","aria-label":"上一頁",onClick:()=>{const t=this.pageNumber===1?this.totalPages:this.pageNumber-1;this.setPage(t)}},s("span",{key:"791858aa1c4b3f8206f4dfaba90672b60c5f6c63","aria-hidden":"true"},s(i,{key:"a963724b859820313802a6fa9823928deaa2d563"},"keyboard_arrow_left")))),t.map(((t,e)=>{const l=t.page===this.pageNumber;const a=t.page==null;return s("li",{key:t.page?`page-${t.page}`:`ellipsis-${e}`,class:{"page-item":true,active:l,disabled:a},onClick:()=>{if(t.page&&!l)this.setPage(t.page)}},s("a",{class:"page-link",href:"javascript:;","aria-current":l?"page":undefined,"aria-label":t.page?`第 ${t.page} 頁`:undefined},t.title||t.page?.toString()))})),s("li",{key:"bd65dd4ca4edf71ce2b6630106d7cfe1c6bcbd71",class:"page-item"},s("a",{key:"55317727cfdb7c94a2746d7dbdf0210ec43c78e8",class:"page-link",href:"javascript:;","aria-label":"下一頁",onClick:()=>{const t=this.pageNumber===this.totalPages?1:this.pageNumber+1;this.setPage(t)}},s("span",{key:"03688a658056d053e981c16bf7720afa79e2d8f5","aria-hidden":"true"},s(i,{key:"d4b14286cef302d4f3e468788551fbd2f1cc1f09"},"keyboard_arrow_right"))))))}};d.style=h;const m=":host{display:block}:host .group-item>th{cursor:auto}:host .group-item>th>div{line-height:1;margin:0.25rem}:host span.detail-title{display:inline-block;min-width:75px;font-weight:bold}:host .d-table-none{display:none !important}:host .d-table-cell{display:table-cell !important}storm-table-body .table-bordered>:not(caption)>*,storm-table-body .table-bordered>:not(caption)>*>*{border-width:0}:host .storm-table-4xs .d-table-4xs-none,:host .storm-table-3xs .d-table-4xs-none,:host .storm-table-xxs .d-table-4xs-none,:host .storm-table-xs .d-table-4xs-none,:host .storm-table-sm .d-table-4xs-none,:host .storm-table-md .d-table-4xs-none,:host .storm-table-lg .d-table-4xs-none,:host .storm-table-xl .d-table-4xs-none,:host .storm-table-xxl .d-table-4xs-none,:host .storm-table-3xl .d-table-4xs-none,:host .storm-table-4xl .d-table-4xs-none{display:none !important}:host .storm-table-4xs .d-table-4xs-cell,:host .storm-table-3xs .d-table-4xs-cell,:host .storm-table-xxs .d-table-4xs-cell,:host .storm-table-xs .d-table-4xs-cell,:host .storm-table-sm .d-table-4xs-cell,:host .storm-table-md .d-table-4xs-cell,:host .storm-table-lg .d-table-4xs-cell,:host .storm-table-xl .d-table-4xs-cell,:host .storm-table-xxl .d-table-4xs-cell,:host .storm-table-3xl .d-table-4xs-cell,:host .storm-table-4xl .d-table-4xs-cell{display:table-cell !important}:host .storm-table-3xs .d-table-3xs-none,:host .storm-table-xxs .d-table-3xs-none,:host .storm-table-xs .d-table-3xs-none,:host .storm-table-sm .d-table-3xs-none,:host .storm-table-md .d-table-3xs-none,:host .storm-table-lg .d-table-3xs-none,:host .storm-table-xl .d-table-3xs-none,:host .storm-table-xxl .d-table-3xs-none,:host .storm-table-3xl .d-table-3xs-none,:host .storm-table-4xl .d-table-3xs-none{display:none !important}:host .storm-table-3xs .d-table-3xs-cell,:host .storm-table-xxs .d-table-3xs-cell,:host .storm-table-xs .d-table-3xs-cell,:host .storm-table-sm .d-table-3xs-cell,:host .storm-table-md .d-table-3xs-cell,:host .storm-table-lg .d-table-3xs-cell,:host .storm-table-xl .d-table-3xs-cell,:host .storm-table-xxl .d-table-3xs-cell,:host .storm-table-3xl .d-table-3xs-cell,:host .storm-table-4xl .d-table-3xs-cell{display:table-cell !important}:host .storm-table-xxs .d-table-xxs-none,:host .storm-table-xs .d-table-xxs-none,:host .storm-table-sm .d-table-xxs-none,:host .storm-table-md .d-table-xxs-none,:host .storm-table-lg .d-table-xxs-none,:host .storm-table-xl .d-table-xxs-none,:host .storm-table-xxl .d-table-xxs-none,:host .storm-table-3xl .d-table-xxs-none,:host .storm-table-4xl .d-table-xxs-none{display:none !important}:host .storm-table-xxs .d-table-xxs-cell,:host .storm-table-xs .d-table-xxs-cell,:host .storm-table-sm .d-table-xxs-cell,:host .storm-table-md .d-table-xxs-cell,:host .storm-table-lg .d-table-xxs-cell,:host .storm-table-xl .d-table-xxs-cell,:host .storm-table-xxl .d-table-xxs-cell,:host .storm-table-3xl .d-table-xxs-cell,:host .storm-table-4xl .d-table-xxs-cell{display:table-cell !important}:host .storm-table-xs .d-table-xs-none,:host .storm-table-sm .d-table-xs-none,:host .storm-table-md .d-table-xs-none,:host .storm-table-lg .d-table-xs-none,:host .storm-table-xl .d-table-xs-none,:host .storm-table-xxl .d-table-xs-none,:host .storm-table-3xl .d-table-xs-none,:host .storm-table-4xl .d-table-xs-none{display:none !important}:host .storm-table-xs .d-table-xs-cell,:host .storm-table-sm .d-table-xs-cell,:host .storm-table-md .d-table-xs-cell,:host .storm-table-lg .d-table-xs-cell,:host .storm-table-xl .d-table-xs-cell,:host .storm-table-xxl .d-table-xs-cell,:host .storm-table-3xl .d-table-xs-cell,:host .storm-table-4xl .d-table-xs-cell{display:table-cell !important}:host .storm-table-sm .d-table-sm-none,:host .storm-table-md .d-table-sm-none,:host .storm-table-lg .d-table-sm-none,:host .storm-table-xl .d-table-sm-none,:host .storm-table-xxl .d-table-sm-none,:host .storm-table-3xl .d-table-sm-none,:host .storm-table-4xl .d-table-sm-none{display:none !important}:host .storm-table-sm .d-table-sm-cell,:host .storm-table-md .d-table-sm-cell,:host .storm-table-lg .d-table-sm-cell,:host .storm-table-xl .d-table-sm-cell,:host .storm-table-xxl .d-table-sm-cell,:host .storm-table-3xl .d-table-sm-cell,:host .storm-table-4xl .d-table-sm-cell{display:table-cell !important}:host .storm-table-md .d-table-md-none,:host .storm-table-lg .d-table-md-none,:host .storm-table-xl .d-table-md-none,:host .storm-table-xxl .d-table-md-none,:host .storm-table-3xl .d-table-md-none,:host .storm-table-4xl .d-table-md-none{display:none !important}:host .storm-table-md .d-table-md-cell,:host .storm-table-lg .d-table-md-cell,:host .storm-table-xl .d-table-md-cell,:host .storm-table-xxl .d-table-md-cell,:host .storm-table-3xl .d-table-md-cell,:host .storm-table-4xl .d-table-md-cell{display:table-cell !important}:host .storm-table-lg .d-table-lg-none,:host .storm-table-xl .d-table-lg-none,:host .storm-table-xxl .d-table-lg-none,:host .storm-table-3xl .d-table-lg-none,:host .storm-table-4xl .d-table-lg-none{display:none !important}:host .storm-table-lg .d-table-lg-cell,:host .storm-table-xl .d-table-lg-cell,:host .storm-table-xxl .d-table-lg-cell,:host .storm-table-3xl .d-table-lg-cell,:host .storm-table-4xl .d-table-lg-cell{display:table-cell !important}:host .storm-table-xl .d-table-xl-none,:host .storm-table-xxl .d-table-xl-none,:host .storm-table-3xl .d-table-xl-none,:host .storm-table-4xl .d-table-xl-none{display:none !important}:host .storm-table-xl .d-table-xl-cell,:host .storm-table-xxl .d-table-xl-cell,:host .storm-table-3xl .d-table-xl-cell,:host .storm-table-4xl .d-table-xl-cell{display:table-cell !important}:host .storm-table-xxl .d-table-xxl-none,:host .storm-table-3xl .d-table-xxl-none,:host .storm-table-4xl .d-table-xxl-none{display:none !important}:host .storm-table-xxl .d-table-xxl-cell,:host .storm-table-3xl .d-table-xxl-cell,:host .storm-table-4xl .d-table-xxl-cell{display:table-cell !important}:host .storm-table-3xl .d-table-3xl-none,:host .storm-table-4xl .d-table-3xl-none{display:none !important}:host .storm-table-3xl .d-table-3xl-cell,:host .storm-table-4xl .d-table-3xl-cell{display:table-cell !important}:host .storm-table-4xl .d-table-4xl-none{display:none !important}:host .storm-table-4xl .d-table-4xl-cell{display:table-cell !important}";const c=class{constructor(l){t(this,l);this.clickRow=e(this,"clickRow")}get host(){return l(this)}table;dataSet;timeStamp;rowIndex;columns;clickRow;async updateColumnCheckbox(t){if(!this.dataSet||t.type!=="checkbox")return;const e=this.getCheckedItemsSum(t.field);const l=this.host.querySelector('th[data-field="'+t.field+'"] storm-checkbox');if(!l)return;l.isChecked=e===this.table.totalRows;l.isIndeterminate=e>0&&e<this.table.totalRows}async updateRowCheckbox(t,e){const l=this.host.querySelector('tr[data-id="'+n(t,this.table.fieldId)+'"] storm-table-cell[data-field="'+e.field+'"]');if(l){o(l)}if(e.field===this.table.fieldSelected){await this.updateRowSelection(t)}}async updateRowSelection(t){const e=this.host.querySelector('storm-table-row[data-id="'+n(t,this.table.fieldId)+'"]');if(e){await e.updateSelection()}}computeColumnClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom","font-weight-bolder":true,"text-truncate":true,"table-sorter":t.sortable,"combined-cell":t.children&&t.children.length>0,"child-cell":t["__depth"]&&t["__depth"]>1,asc:this.table.sortName===t.field&&this.table.sortOrder!=="desc",desc:this.table.sortName===t.field&&this.table.sortOrder==="desc",...e,...t.classes}}renderThead(){if(!this.columns)return;const t=new Map;const e=this.columns.filter((t=>t.visible!==false));for(const l of e){const e=l["__depth"]||1;if(!t.has(e)){t.set(e,[])}t.get(e).push(l)}const l=Array.from(t.entries()).sort((([t],[e])=>t-e)).map((([,t])=>s("tr",null,t.map((t=>this.renderTheadColumn(t))))));return s("thead",null,l)}renderTheadColumn(t){let e=t.title;const l={"thead-xxs":t.type==="detail"||t.type==="serialNumber"||t.type==="radio"||t.type==="checkbox","detail-toggle":t.type==="detail"};if(e==null&&t.type==="checkbox"){const l=this.getCheckedItemsSum(t.field);e=s("storm-checkbox",{type:"checkbox","is-indeterminate":l>0&&l<this.table.totalRows,"is-checked":l===this.table.totalRows,onValueChanged:e=>this.handleColumnCheckChange(e,t),"time-stamp":this.timeStamp})}return this.renderHeaderCell(e,t,l)}renderHeaderCell(t,e,l={}){return s("th",{"data-field":e.field,scope:"col",class:this.computeColumnClasses(e,l),rowspan:e.headerRowspan,colSpan:e.headerColspan,onClick:()=>this.handleColumnClick(e)},s("div",{class:"cell"},t),e.description&&s("div",{class:"table-description"},e.description))}handleColumnClick(t){if(!t.sortable)return;if(t.field==this.table.sortName){if(this.table.sortOrder=="desc")this.table.sortChange.emit({sortName:undefined,sortOrder:undefined});else this.table.sortChange.emit({sortName:this.table.sortName,sortOrder:"desc"})}else this.table.sortChange.emit({sortName:t.field,sortOrder:"asc"})}async handleColumnCheckChange(t,e){const l=t.detail;if(l)await this.table.checkAll(e.field);else await this.table.uncheckAll(e.field)}async initSelect(){if(!this.dataSet||!this.columns)return;for(const t of this.dataSet){await this.updateRowSelection(t)}}getCheckedItemsSum(t){if(!this.table.checkedItemsSum)return 0;return this.table.checkedItemsSum[t]}renderRow(t,e){const l=n(t,this.table.fieldId);return s("storm-table-row",{"data-id":l,table:this.table,row:t,index:e,columns:this.columns,"time-stamp":this.timeStamp,onClickRow:t=>this.clickRow.emit(t.detail)})}renderRows(){if(this.table.groupBy){let t="";const e=[];for(const[l,a]of this.dataSet.entries()){const o=n(a,this.table.groupBy);if(o!==t){t=o;e.push(s("tr",{class:"group-item table-info"},s("th",{class:"align-middle full-cell",colSpan:this.table.expand.visibleColumnCount},o)))}e.push(this.renderRow(a,l))}return e}return this.dataSet.map(((t,e)=>this.renderRow(t,e)))}renderBody(){if(!this.dataSet?.length){const t={"align-middle":true,"text-center":true,"full-cell":true,...this.table.classes?.["table-sm"]?{"height-100":true}:{"height-300":true}};return s("tbody",null,s("tr",null,s("td",{class:t,colSpan:this.table.expand.visibleColumnCount},s("p",{class:"p-4 h6"},"沒有找到符合的結果"))))}return s("tbody",null,this.renderRows())}render(){return s(a,{key:"599e1bb71e51ff61a67604ca9d46366c50648aee"},s("table",{key:"5ffae449aa07196ecaa105530346ed940c0d28eb",class:{table:true,"mb-0":true,"table-hover":!!this.table.clickRowTo,"table-layout-auto":this.table.layout==="auto","table-layout-fixed":this.table.layout==="fixed",...b(this.table.classes)}},this.renderThead(),this.renderBody()))}async componentDidRender(){await this.initSelect()}};c.style=m;const x="storm-table-row{display:contents}.table storm-table-row>tr{border-width:0}.table-striped>tbody>storm-table-row:nth-of-type(odd)>tr{background-color:rgba(0, 0, 0, 0.05)}";const p=class{constructor(l){t(this,l);this.clickRow=e(this,"clickRow")}get host(){return l(this)}table;row;index;columns;timeStamp;clickRow;async updateSelection(){const t=n(this.row,this.table.fieldSelected)===true;const e=this.host.querySelector("tr");if(e){e.classList.toggle("table-primary",t)}}computeCellClasses(t,e){return{"text-center":t.align==="center","text-start":!t.align||t.align==="left","text-end":t.align==="right","align-middle":!t.valign||t.valign==="middle","align-top":t.valign==="top","align-bottom":t.valign==="bottom",...e,...t.classes}}renderCell(t){const e=this.computeCellClasses(t,{"text-xs":t.type==="serialNumber","detail-toggle":t.type==="detail"});return s("td",{"data-field":t.field,class:e},this.renderCellContent(t))}renderCellContent(t){return s("storm-table-cell",{table:this.table,row:this.row,index:this.index,column:t,"time-stamp":this.timeStamp,"data-field":t.field,onCellDidValueChanged:()=>{this.timeStamp=Date.now()}})}renderDetail(){return this.columns.filter((t=>t.responsive===true&&t.visible!==false)).map((t=>s("li",{class:{"list-group-item":true,...t.rwdClassReversal}},s("span",{class:"detail-title"},t.title),s("span",null,this.renderCellContent(t)))))}render(){const t=n(this.row,this.table.fieldId);const e=n(this.row,this.table.fieldSelected)===true;const l=this.columns.filter((t=>t.visible!==false&&(!t.children||t.children.length===0)));const o=s("tr",{"data-id":t,class:{"table-primary":e},onClick:()=>this.clickRow.emit(t)},l.map((t=>this.renderCell(t))));if(this.table.isColumnResponsive){const t=this.columns.find((t=>t.type==="detail"));const e=t?.classes?{...t.classes,"row-detail":true,"d-none":true}:{"row-detail":true,"d-none":true};return s(a,null,o,s("tr",{class:e,"data-index":this.index},s("td",{class:"full-cell",colSpan:this.table.expand.visibleColumnCount},s("ul",{class:"list-group list-group-flush"},this.renderDetail()))))}return s(a,null,o)}};p.style=x;export{d as storm_pagination,c as storm_table_body,p as storm_table_row};
//# sourceMappingURL=p-817ac7d4.entry.js.map